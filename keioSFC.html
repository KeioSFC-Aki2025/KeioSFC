<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>KeioSFC コーパス検索</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* 全体スタイル（Version 6 系の色調を維持） */
    body { font-family: "Hiragino Sans","Noto Sans JP",sans-serif;  color:#133; padding:18px; }
    h1 { color:#1f6f3a; margin-bottom:12px; }
    /* Top area (冒頭〜CSVダウンロード) :  */
    .top-area { background: #f5fff5; padding:14px; border-radius:10px; border:0px solid #cfe3ff; margin-bottom:12px; }
    fieldset { background:#fff; border:1px solid #9fcf9f; padding:12px; margin-bottom:12px; border-radius:8px; }
    legend { color:#1f6f3a; font-weight:700; }
    .form { border-collapse:collapse; width:100%; }
    .form td { padding:6px; vertical-align:middle; }
    .form .label { padding-right:8px; text-align:left; white-space:nowrap; width:auto; }
    /* ★ 変更: input[type="text"] の width を 100% に統一 */
    input[type="text"] { width:100%; padding:6px; border:1px solid #9fcf9f; border-radius:6px; background:#f6fff6; box-sizing:border-box; }
    input[type="file"] { width:100%; max-width:380px; padding:6px; border:1px solid #9fcf9f; border-radius:6px; background:#f6fff6; box-sizing:border-box; }
    .controls { display:flex; gap:8px; align-items:center; margin:10px 0; flex-wrap:wrap; }
    button { background:#95d5b2; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:700; }
    button:hover { background:#74c69d; color:white; }
    /* ★ 追加: カスタマイズボタンのスタイル */
    #customizeBtn { background: #d4a373; }
    #customizeBtn:hover { background: #bc6c25; color: white; }
    .hit-count { color:#d00000; font-weight:700; margin:8px 0; display:none; }
    .error { color:#d00000; font-weight:700; margin:8px 0; display:none; }
    .search-grid { display:flex; gap:12px; align-items:flex-start; flex-wrap:wrap; }
    .col { flex:1 1 480px; min-width:260px; }
    table.output { width:100%; border-collapse:collapse; margin-top:12px; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.06); }
    table.output th, table.output td { border:1px solid #c7e7c7; padding:6px; text-align:left; vertical-align:middle; }
    table.output th { background:#dff3df; cursor:pointer; }
    table.output td { background:transparent; }
    
    /* V7.1 追加: 二段表示用スタイル */
    .context-upper {
        margin-bottom: 4px;
        /* 上段はスペース区切りなので、必要に応じて折り返しを許可 */
        white-space: normal; 
    }
    .context-lower {
        font-size: 0.9em;
        color: #555; /* 下段は少し薄く表示 */
    }
    /* キーワードのクリック領域をセル全体に広げる */
    .key-cell-container {
        display: block;
        cursor: pointer;
    }

    .pager { margin:10px 0; display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .small { font-size:0.9em; color:#666; }
    .progress-wrap { width:100%; background:#eee; border-radius:8px; overflow:hidden; height:18px; border:1px solid #cfc; margin-top:8px; display:none; }
    .progress-bar { height:100%; width:0%; background: linear-gradient(90deg,#8fd3a9,#5fbf87); transition:width 0.2s linear; }
    .progress-text { margin-top:6px; font-weight:700; color:#1f6f3a; display:none; }
    .cond-row { display:flex; gap:8px; align-items:center; margin:6px 0; }
    .cond-block { border:1px solid #cfe9d1; padding:8px; border-radius:6px; background:#fbfff9; }
    details summary { cursor:pointer; font-weight:700; }
    .detail-box { background: #ffffff; border:1px solid #ddd; padding:12px; margin-top:14px; border-radius:8px; min-height:64px; box-shadow:0 1px 4px rgba(0,0,0,0.04); position: relative; }
    .detail-header { font-weight:700; color:#1f6f3a; margin-bottom:8px; }
    .sentence-meta { font-size:0.95em; color:#444; margin-bottom:8px; padding:8px; border-radius:6px; border:1px solid #cfc; background:#fbfff9; cursor:pointer; display:inline-block; }
    .sentence-area { line-height:1.8; font-size:1rem; }
    /* post area: 文詳細表示／文章詳細表示以降を薄紫トーンに */
    .post-area { background: #f1fff9; padding:14px; border-radius:10px; border:0px solid #e5d5ff; margin-top:12px; }
    .article-box { background:#fff; border:1px solid #cfc; padding:10px; border-radius:8px; margin-top:10px; display:none; }
    .tooltip { position: fixed; background: #fff; color: #111; padding: 6px 10px; border-radius: 6px; font-size: 0.9em; white-space: pre-line; display: none; pointer-events: none; z-index: 10000; box-shadow: 0px 3px 6px rgba(0,0,0,0.12); border: 1px solid #ccc; max-width: 380px; }
    /* 単語ホバー色（薄め） */
    .word { display:inline-block; padding:2px 4px; margin:0 1px; border-radius:4px; transition: background 0.12s, border 0.12s; position:relative; border: 2px dashed transparent; }
    .word.punct { margin-left:0; margin-right:0; padding:0 2px; }

    .word.key-selected { box-shadow: 0 0 0 0 inset; }
    .selected-row td { background-color: #eaf7ec !important; }
    .meta-box { border:1px solid #cfc; border-radius:6px; padding:8px; background:#fbfff9; display:inline-block; cursor:pointer; }
    .article-header { font-weight:700; color:#1f6f3a; margin-bottom:6px; }
    .keyword-fieldset { border:3px solid #2d6a4f; width: 340px; box-sizing: border-box; }
    .matrix-table { width:100%; border-collapse:collapse; margin-top:6px; }
    .matrix-table th, .matrix-table td { border:1px solid #dfefe0; padding:6px; text-align:center; }
    .matrix-table th { background:#f2fff2; font-weight:700; }
    @media (max-width:700px){ .form .label { width:40%; } }
    
    /* ★ 追加: タブスタイル */
    .tab-btn {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-bottom: 2px solid #9fcf9f;
      border-radius: 6px 6px 0 0;
      background: #f0f0f0;
      font-weight: 700;
      cursor: pointer;
      color: #333;
      margin-bottom: -2px; 
    }
    .tab-btn:hover {
      background: #e9e9e9;
    }
    .tab-btn.active {
      background: #f5fff5; 
      border: 2px solid #9fcf9f;
      border-bottom: 2px solid #f5fff5; 
      color: #1f6f3a;
    }

    
    #udToggleBtn.active {
      background: #57a070;
      color: white;
      font-weight: bold;
    }
    #udCanvas {
      /* キャンバス自体がクリックイベントを拾わないように */
      pointer-events: none;
    }
	

  /* ★ 新UI用: 5セルグリッドレイアウト */
    .search-grid-container {
      display: grid;
      grid-template-areas:
        ". up up up ."
        ". left center right ."
        ". down down down .";
      
      grid-template-columns: 1fr auto 340px auto 1fr;
      grid-gap: 12px;
      align-items: center; /* ★ 変更: H/Dのため、デフォルトを中央揃えに変更 */
    }
    .grid-cell { padding: 10px; }
    .grid-cell.up { grid-area: up; text-align: center; align-self: center; }
    .grid-cell.down { grid-area: down; text-align: center; align-self: center; }
    /* (ファイル上部の .grid-cell.left / .right の定義を修正) */
    .grid-cell.left { 
      grid-area: left; 
      display: flex;
      /* LはHTMLの順序（ボタン→Wrapper）を逆転させ、Wrapperが左、ボタンが右（中央寄り）に来るようにする */
      flex-direction: row-reverse;
      gap: 8px;
      align-self: center; 
      /* ボタンと表を垂直方向に中央揃え */
      align-items: center;
    }
    .grid-cell.right { 
      grid-area: right; 
      display: flex;
      /* Rは通常の横並びで、ボタンが左（中央寄り）、Wrapperが右に来るようにする */
      flex-direction: row;
      gap: 8px;
      align-self: center; 
      /* ボタンと表を垂直方向に中央揃え */
      align-items: center;
    }
    .grid-cell.center { 
      grid-area: center; 
      align-self: center; 
    }
    
    /* ★ 新UI用: L/R/H/D の動的コンテナ */
   .dynamic-container {
      display: flex;
      /* flex-direction: column; */ /* ★ 削除 (各方向のスタイルで指定) */
      gap: 10px;
      align-items: flex-start; /* ★ 追加: アイテムを上揃えにし、高さを可変にする */
    }

//* ★ H/Dラッパー(flex)内のテーブルを中央揃えにし、フィールドセット風にする */
#H-area-wrapper, #D-area-wrapper {
  justify-content: center;
  flex-direction: column; /* ★ 子要素(チェーン)を縦に積む */
  align-items: center; /* ★ 子要素(チェーン)の幅に合わせて伸縮させる */
  
  /* ★ keyword-fieldset のスタイルを適用 */
  background: #fff;
  border: 1px solid #9fcf9f; /* fieldset の色 */
  padding: 12px;
  border-radius: 8px;
  box-sizing: border-box; /* padding を含めて計算 */
  /* H/Dボタンとのマージン */
  margin-top: 8px;
  margin-bottom: 8px;
}

/* L/Rを中央ボックス内に収めたため、外側セルの役割を無効化 */



    /* ★ 追加: H (親) は縦・逆順 */
    .grid-cell.up .dynamic-container {
      flex-direction: column-reverse;
      align-items: stretch; /* ★ 左右幅をコンテナに合わせる */
    }
    /* ★ 追加: D (子) は縦・順方向 (デフォルト通り) */
    .grid-cell.down .dynamic-container {
      flex-direction: column;
      align-items: stretch; /* ★ 左右幅をコンテナに合わせる */
    }

    
    .dynamic-search-box-controls { margin-top: 6px; display:flex; gap: 6px; flex-wrap: wrap; justify-content: center; 
	}
    .dynamic-search-box-controls .add-btn {
      background: #95d5b2;
      font-size: 0.9em;
      padding: 4px 8px;
    }
    .dynamic-search-box-controls .remove-btn {
      background: #f1a3a3;
      font-size: 0.9em;
      padding: 4px 8px;
    }
    
	.dynamic-search-box-controls .remove-btn {
      background: #f1a3a3;
      font-size: 0.9em;
      padding: 4px 8px;
    }
    
   

    /* ★ 新規追加: H/D 検索用のヘッダー (コンテナの外) */
    .dep-header-row {
      display: flex;
      flex-direction: row;
      gap: 6px; /* input間のgapと合わせる */
      margin-bottom: 4px;
      padding-left: 40px; /* H1/H2ラベル分のオフセット */
      box-sizing: border-box;
      width: 100%;
    }
    .dep-header-row .dep-header-label {
      font-size: 0.9em;
      color: #1f6f3a;
      font-weight: bold;
      text-align: left;
      /* ★ 変更: (input 32px) + (td padding 3*2px) = 38px */
      height: 38px; 
      /* 垂直方向の中央揃え (行の高さと合わせる) */
      line-height: 38px;
      box-sizing: border-box;
    }

    /* ★ 新規追加: H/D では .dynamic-search-box を使わない設定 */
    .grid-cell.up .dynamic-search-box,
    .grid-cell.down .dynamic-search-box {
      border: none;
      padding: 0;
      background: none;
      width: 100%;
      min-width: 0; /* 最小幅をリセット */
    }
    .grid-cell.left .add-more-btn,
    .grid-cell.right .add-more-btn,
    .grid-cell.up .add-more-btn,
    .grid-cell.down .add-more-btn {
      display: none;
    }
    
    /* ★ 新規追加: H/D ボックス用の入力行 (H1, H2...) */
    .dep-input-row {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 6px;
      width: auto; 
      padding: 2px 0; /* 行間のアキ */
    }
    .dep-input-row .dep-row-legend {
      font-weight: bold;
      color: #1f6f3a;
      width: 30px; /* 固定幅 */
      text-align: right;
      padding-right: 4px;
      font-size: 0.95em;
      flex-shrink: 0;
    }
    .dep-input-row input[type="text"] {
      flex: 1 1 0; /* 均等幅 */
      min-width: 60px; /* 最小幅 */
    }
    /* H/D 用の削除ボタン */
    .dep-input-row .remove-btn {
      background: #f1a3a3;
      font-size: 0.9em;
      padding: 4px 8px;
      flex-shrink: 0; /* 縮まない */
    }
    /* H/D では「さらに追加」ボタンを非表示 (画像Bにない) */
    .grid-cell.up .add-more-btn,
    .grid-cell.down .add-more-btn {
      display: none;
    }
	
    //* ★ 追加: H/D 用の「横」ヘッダーCSSを .dep-header-row として再定義 */
    .dep-header-row {
      display: flex;
      flex-direction: row;
      gap: 6px; /* input間のgapと合わせる */
      margin-bottom: 4px;
      padding-left: 40px; /* H1/H2ラベル分のオフセット */
      box-sizing: border-box;
      width: auto; /* ★ 変更: 100% から auto へ */
      margin-left: auto;
      margin-right: auto;
    }
    .dep-header-row .dep-header-label {
      font-size: 0.9em;
      color: #1f6f3a;
      font-weight: bold;
      text-align: left;
      flex: 1 1 0; /* 均等幅 */
      min-width: 60px; /* 最小幅 */
    }

       
    
    /* ★ 新規追加: H/D の .dynamic-search-box の幅とラベル非表示 */
    .grid-cell.up .dynamic-search-box,
    .grid-cell.down .dynamic-search-box {
      width: 120px; /* H/Dは入力欄だけなので幅を狭くする */
    }
    .grid-cell.up .dynamic-search-box .label,
    .grid-cell.down .dynamic-search-box .label {
      display: none; /* JSでも非表示にするが、CSSでも強制 */
    }
    
    /* ★ 新UI用: トリガーボタン */
    .trigger-btn {
      background: #e0e0e0;
      padding: 10px 15px;
      font-weight: bold;
      color: #555;
    }
    .trigger-btn:hover { background: #ccc; }
	
    /* ★ 追加: L/R 縦書きトリガーボタン */
    .trigger-btn-vertical {
      writing-mode: vertical-rl;
      text-orientation: mixed;
      padding: 15px 10px;
      height: 200px; /* 高さを指定 */
    }



/* ★ 追加: L/R 動的テーブル用の新スタイル */
    .lr-table {
      border-collapse: collapse;
      border: 2px solid #cfe9d1;
      background: #fbfff9;
      border-radius: 8px;
      overflow: hidden; /* border-radiusを効かせる */
    }
    .lr-table th, .lr-table td {
      border: 1px solid #cfe9d1;
      padding: 3px;
      vertical-align: middle;
      height: 38px; /* 入力欄の高さと揃える */
      box-sizing: border-box;
    }
    /* 縦ヘッダー (一番左の列) */
    .lr-table th.label {
      font-size: 0.9em;
      color: #1f6f3a;
      font-weight: bold;
      text-align: left;
      padding: 0 8px;
      white-space: nowrap;
    }
    /* データセル (入力欄) */
    .lr-table td {
      width: 4em; /* 列の最小幅 (漢字四文字分+余白程度) */
    }
    .lr-table input[type="text"] {
      width: 100%;
    }
    /* 列ヘッダー (L1, L2...) */
    .lr-table td.col-header {
      font-weight: bold;
      color: #1f6f3a;
      padding: 0 4px;
      text-align: center;
      font-size: 0.95em;
      height: 20px; /* legend相当 */
    }
    /* 列フッター (削除ボタン) */
    .lr-table td.col-controls {
      text-align: center;
      height: 34px; /* controls相当 */
      padding: 3px;
    }
    .lr-table .remove-col-btn {
      background: #f1a3a3;
      font-size: 0.9em;
      padding: 4px 8px;
      /* width: 100%; の行を削除 */
    }
	
	/* ★ 追加: キーワードボックス(中央)の幅と配置を調整 */
    #key_table {
      width: auto; /* テーブルが親(fieldset)いっぱいに広がるのを防ぐ */
    }
    #key_table .label {
      text-align: right; /* ラベルを右揃えに */
      width: 1%; /* ラベル列が自動で縮小するように */
      white-space: nowrap; /* ラベルが改行しないように */
    }
    #key_table input[type="text"] {
      width: 120px; /* 入力欄の幅を120pxに固定 */
    }
  </style>
  
  <style id="dynamicPosStyles"></style>
  <script src="https://cdn.jsdelivr.net/npm/encoding-japanese@2.0.0/encoding.min.js"></script>
</head>
<body>
  <h1>KeioSFC: X-Search (Version 2)</h1>
  
  <div style="display:flex; gap:8px; align-items:center; margin-bottom:8px; flex-wrap: wrap;">
      <button id="showUploadBtn" onclick="$('uploadFieldset').style.display='block'; this.style.display='none';">自分のデータをアップロード</button>
    </div>
	<div style="display:flex; gap:8px; align-items:center; margin-bottom:8px; flex-wrap: wrap;">
	      <button id="showDocBtn" onclick="$('docFieldset').style.display='block'; this.style.display='none';">文書情報による検索条件を追加</button>
   </div>

	
	
  <div class="top-area">
    <h2>☞　検索条件入力</h2>

    

    <fieldset id="uploadFieldset" style="display:none;">
      <legend>データ選択（デフォルトは埋め込み。XML をアップロードするとそれを使用）</legend>
      <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;">
        <div><input id="fileInput" type="file" accept=".xml,text/xml" /></div>
        <div>
          <button id="clearDataBtn">データをクリア（デフォルトに戻す）</button>
          <button id="customizeBtn" style="display:none;">取り込んだデータに合わせてカスタマイズ</button>
        </div>
        <div id="fileError" class="error" style="display:none;"></div>
      </div>
    </fieldset>
    
    <fieldset id="docFieldset" style="display:none; min-width:240px; margin-bottom: 12px;">
      <legend>文書情報による検索</legend>
      <table class="form">
        <tr><td class="label">タスク番号</td><td><input id="Task" type="text" placeholder="例：91" /></td></tr>
        <tr><td class="label">作文番号</td><td><input id="textID" type="text" placeholder="例：1" /></td></tr>
        <tr><td class="label">個人ID</td><td><input id="personID" type="text" placeholder="例：1" /></td></tr>
        <tr><td class="label">年齢</td><td><input id="personAge" type="text" placeholder="例：18" /></td></tr>
        <tr><td class="label">使用言語</td><td><input id="language" type="text" placeholder="例：日" /></td></tr>
        <tr><td class="label">第一言語</td><td><input id="personFirstLang" type="text" placeholder="例：日" /></td></tr>
        <tr><td class="label">第二言語</td><td><input id="personSecondLang" type="text" placeholder="例：英" /></td></tr>
      </table>
      <div style="display:flex; gap:8px; margin-top:10px;">
        <button id="clearDocBtn">クリア</button>
        <button id="removeDocBtn" onclick="$('docFieldset').style.display = 'none'; $('showDocBtn').style.display = 'inline-block';">条件の削除</button>
      </div>
    </fieldset>

    
      <div class="search-grid-container">
      
      <div class="grid-cell up">
        <button id="H-add-chain-btn" 
                class="trigger-btn" 
                style="display: none; margin-top: 10px; background-color: #d4a373;" 
                onclick="createDependencyChain('H')">
          さらに別の親関係を指定する
        </button>
		<div id="H-area-wrapper" style="display: none; ...">
        </div>
        <button id="triggerH" class="trigger-btn" onclick="showSearchArea('H')">親ノード検索を指定</button>
        
      </div>

      <div class="grid-cell left">
        <button id="triggerL" class="trigger-btn trigger-btn-vertical" onclick="showSearchArea('L')">Ｌワード検索を指定</button>
        <div id="L-area-wrapper" style="display: none; gap: 8px;"></div>
      </div>

      <div class="grid-cell center">
        <fieldset class="keyword-fieldset">
          <legend>キーワード / キーノード条件</legend>
          <table class="form" id="key_table">
            <tbody id="key_tbody"></tbody>
          </table>
          
        </fieldset>
      </div>
      
      <div class="grid-cell right">
        <button id="triggerR" class="trigger-btn trigger-btn-vertical" onclick="showSearchArea('R')">Ｒワード検索を指定</button>
        <div id="R-area-wrapper" style="display: none; gap: 8px;"></div>
      </div>
      
      <div class="grid-cell down">
        <button id="triggerD" class="trigger-btn" onclick="showSearchArea('D')">子ノード検索を指定</button>
        <div id="D-area-wrapper" style="display: none; ...">
        </div>
        <button id="D-add-chain-btn" 
                class="trigger-btn" 
                style="display: none; margin-top: 10px; background-color: #d4a373;" 
                onclick="createDependencyChain('D')">
          さらに別の子関係を指定する
        </button>
      </div>
    </div>

  
      
      
     

    </div> <div class="controls" style="margin-top:10px;">
      <button id="searchBtn">検索</button>
      <button id="clearBtn">全条件クリア</button>
      表示件数:
      <select id="pageSize">
        <option value="1">1件</option>
        <option value="5">5件</option>
        <option value="10" selected>10件</option>
        <option value="100">100件</option>
        <option value="200">200件</option>
        <option value="500">500件</option>
      </select>
      エンコーディング:
      <select id="encoding">
        <option value="utf-8">UTF-8</option>
        <option value="shift-jis">Shift-JIS</option>
      </select>
      <button id="downloadBtn">CSVダウンロード</button>
    </div>
    <div id="progressArea">
      <div id="progressText" class="progress-text"></div>
      <div class="progress-wrap" id="progressWrap"><div class="progress-bar" id="progressBar"></div></div>
    </div>
    <div id="errorMsg" class="error"></div>
    <div id="hitCount" class="hit-count"></div>
    </div> <h2><b>☞ 検索結果</b></h2>
    <div class="pager" id="pagerTop"></div>
    <div id="tableContainer"></div>
    <div class="pager" id="pagerBottom"></div>
  <div class="post-area">
  <h2>☞　詳細な分析</h2>
    <div class="detail-box" id="sentenceDetail" style="display:none;">
      <div class="detail-header">
        文詳細表示
        <button id="udToggleBtn" style="margin-left: 15px; font-size: 0.8em; padding: 4px 8px; background: #b7e4c7;">UD表示 OFF</button>
      </div>
      <div class="sentence-meta meta-box" id="sentenceMeta" style="display:none;" title="クリックで表の表示位置を変更します"></div>
      
      <div id="udCanvasContainer" style="display:none; position: relative; border: 1px solid #ddd; background: #fdfdfd; margin-top: 10px; overflow-x: auto; overflow-y: hidden;">
        <canvas id="udCanvas" height="100"></canvas>
        <div id="udError" style="color: red; padding: 10px; display: none; text-align: center;"></div>
      </div>
      
      <div class="sentence-area" id="sentenceArea"></div>
    </div>
    <div style="margin-top:8px;">
      <button id="showArticleBtn" style="display:none;">文章全体を表示</button>
      <label id="articleRangeLabel" style="display:none;margin-left:8px;">前後:
        <select id="articleRange" style="margin-left:6px;">
          <option value="1">1文</option>
          <option value="5" selected>5文</option>
          <option value="10">10文</option>
          <option value="50">50文</option>
          <option value="100">100文</option>
          <option value="all">全文（同一 textID のみ）</option>
        </select>
      </label>
    </div>
    <div class="article-box" id="articleBox" style="display:none;">
      <div class="article-header">文章詳細表示</div>
      <div id="articleContent"></div>
    </div>
    <div class="tooltip" id="tooltip"></div>
  </div> <script>
/* Version 7.2
   - V7.1: 検索結果の二段表示
   - V7.2: 検索インターフェイスの動的構築機能
     - XMLアップロード後、「カスタマイズ」ボタンでUIを再構築
     - 検索ロジック(collectConditions, wordMatchesExact)を動的UIに対応
     - UI復元機能(rebuildForms, clearDataBtn)
*/
/* ---------- デフォルトサンプルデータ（埋め込み） ---------- */
const defaultData = ` 
    <document filename="Task01ID00001.txt">
    <s sentId="1" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="場面" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="26" udTo="2/3" original="場面">bamen</w>
        <w wordId="2" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="1" udTo="" original="は">ha</w>
        <w wordId="3" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="1" udTo="" original="、">,</w>
        <w wordId="4" pos="NUM" lemma="一" tag="名詞-数詞" udType="nummod" udFrom="5" udTo="" original="一">ichi</w>
        <w wordId="5" pos="NOUN" lemma="匹" tag="接尾辞-名詞的-助数詞" udType="nmod" udFrom="7" udTo="4/6" original="匹">hiki</w>
        <w wordId="6" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="5" udTo="" original="の">no</w>
        <w wordId="7" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="13" udTo="5/8" original="カメ">kame</w>
        <w wordId="8" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="7" udTo="" original="が">ga</w>
        <w wordId="9" pos="NOUN" lemma="ビン" tag="名詞-普通名詞-一般" udType="nmod" udFrom="11" udTo="10" original="ビン">bin</w>
        <w wordId="10" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="の">no</w>
        <w wordId="11" pos="NOUN" lemma="中" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="13" udTo="9/12" original="中">naka</w>
        <w wordId="12" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="11" udTo="" original="に">ni</w>
        <w wordId="13" pos="VERB" lemma="閉じ込める" tag="動詞-一般" udType="advcl" udFrom="20" udTo="7/11/14/15" original="閉じ込め">tojikome</w>
        <w wordId="14" pos="AUX" lemma="られる" tag="助動詞" udType="aux" udFrom="13" udTo="" original="られ">rare</w>
        <w wordId="15" pos="SCONJ" lemma="ながら" tag="助詞-接続助詞" udType="mark" udFrom="13" udTo="" original="ながら">nagara</w>
        <w wordId="16" pos="NOUN" lemma="海" tag="名詞-普通名詞-一般" udType="nmod" udFrom="18" udTo="17" original="海">umi</w>
        <w wordId="17" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="16" udTo="" original="の">no</w>
        <w wordId="18" pos="NOUN" lemma="上" tag="名詞-普通名詞-副詞可能" udType="obj" udFrom="20" udTo="16/19" original="上">ue</w>
        <w wordId="19" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="18" udTo="" original="を">wo</w>
        <w wordId="20" pos="VERB" lemma="ぷかぷか" tag="副詞" udType="advmod" udFrom="21" udTo="13/18" original="ぷかぷか">pukapuka</w>
        <w wordId="21" pos="VERB" lemma="浮かぶ" tag="動詞-一般" udType="acl" udFrom="24" udTo="20/22" original="浮かん">ukan</w>
        <w wordId="22" pos="SCONJ" lemma="で" tag="助詞-接続助詞" udType="mark" udFrom="21" udTo="23" original="で">de</w>
        <w wordId="23" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="22" udTo="" original="いる">iru</w>
        <w wordId="24" pos="NOUN" lemma="ところ" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="26" udTo="21/25" original="ところ">tokoro</w>
        <w wordId="25" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="24" udTo="" original="から">kara</w>
        <w wordId="26" pos="VERB" lemma="始まる" tag="動詞-一般" udType="ROOT" udFrom="26" udTo="1/24/26/27/28" original="始まり">hajimari</w>
        <w wordId="27" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="26" udTo="" original="ます">masu</w>
        <w wordId="28" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="26" udTo="" original="。">.</w>
    </s>
    <s sentId="2" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="ビン" tag="名詞-固有名詞-人名-一般" udType="nsubj" udFrom="24" udTo="2/3" original="ビン">bin</w>
        <w wordId="2" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="1" udTo="" original="は">ha</w>
        <w wordId="3" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="1" udTo="" original="、">,</w>
        <w wordId="4" pos="NOUN" lemma="波" tag="名詞-普通名詞-一般" udType="obl" udFrom="6" udTo="5" original="波">nami</w>
        <w wordId="5" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="4" udTo="" original="に">ni</w>
        <w wordId="6" pos="VERB" lemma="揺られる" tag="動詞-一般" udType="advcl" udFrom="13" udTo="4/7/8" original="揺られ">yurare</w>
        <w wordId="7" pos="SCONJ" lemma="ながら" tag="助詞-接続助詞" udType="mark" udFrom="6" udTo="" original="ながら">nagara</w>
        <w wordId="8" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="6" udTo="" original="、">,</w>
        <w wordId="9" pos="NOUN" lemma="洞窟" tag="名詞-普通名詞-一般" udType="nmod" udFrom="11" udTo="10" original="洞窟">doukutsu</w>
        <w wordId="10" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="の">no</w>
        <w wordId="11" pos="NOUN" lemma="中" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="13" udTo="9/12" original="中">naka</w>
        <w wordId="12" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="11" udTo="" original="に">ni</w>
        <w wordId="13" pos="VERB" lemma="入る" tag="動詞-一般" udType="advcl" udFrom="19" udTo="6/11/14" original="入り">iri</w>
        <w wordId="14" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="13" udTo="" original="、">,</w>
        <w wordId="15" pos="NOUN" lemma="浅瀬" tag="名詞-普通名詞-一般" udType="obj" udFrom="19" udTo="16" original="浅瀬">asase</w>
        <w wordId="16" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="15" udTo="" original="を">wo</w>
        <w wordId="17" pos="NOUN" lemma="波しぶき" tag="名詞-普通名詞-一般" udType="obj" udFrom="19" udTo="18" original="波しぶき">namishibuki</w>
        <w wordId="18" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="17" udTo="" original="を">wo</w>
        <w wordId="19" pos="VERB" lemma="立てる" tag="動詞-一般" udType="advcl" udFrom="24" udTo="13/15/17/20/21" original="立て">tate</w>
        <w wordId="20" pos="SCONJ" lemma="ながら" tag="助詞-接続助詞" udType="mark" udFrom="19" udTo="" original="ながら">nagara</w>
        <w wordId="21" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="19" udTo="" original="、">,</w>
        <w wordId="22" pos="NOUN" lemma="浜" tag="名詞-普通名詞-一般" udType="obl" udFrom="24" udTo="23" original="浜">hama</w>
        <w wordId="23" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="22" udTo="" original="に">ni</w>
        <w wordId="24" pos="VERB" lemma="打ち上げる" tag="動詞-一般" udType="ROOT" udFrom="24" udTo="1/19/22/24/25/26/27" original="打ち上げ">uchiage</w>
        <w wordId="25" pos="AUX" lemma="られる" tag="助動詞" udType="aux" udFrom="24" udTo="" original="られ">rare</w>
        <w wordId="26" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="24" udTo="" original="ます">masu</w>
        <w wordId="27" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="24" udTo="" original="。">.</w>
    </s>
    <s sentId="3" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="VERB" lemma="打ち上げる" tag="動詞-一般" udType="acl" udFrom="4" udTo="2/3" original="打ち上げ">uchiage</w>
        <w wordId="2" pos="AUX" lemma="られる" tag="助動詞" udType="aux" udFrom="1" udTo="" original="られ">rare</w>
        <w wordId="3" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="1" udTo="" original="た">ta</w>
        <w wordId="4" pos="NOUN" lemma="ビン" tag="名詞-普通名詞-一般" udType="obj" udFrom="11" udTo="1/5/6" original="ビン">bin</w>
        <w wordId="5" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="4" udTo="" original="を">wo</w>
        <w wordId="6" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="4" udTo="" original="、">,</w>
        <w wordId="7" pos="NOUN" lemma="お" tag="接頭辞" udType="compound" udFrom="9" udTo="" original="お">o</w>
        <w wordId="8" pos="NOUN" lemma="じい" tag="名詞-普通名詞-一般" udType="compound" udFrom="9" udTo="" original="じい">jii</w>
        <w wordId="9" pos="NOUN" lemma="さん" tag="接尾辞-名詞的-一般" udType="nsubj" udFrom="11" udTo="7/8/10" original="さん">san</w>
        <w wordId="10" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="が">ga</w>
        <w wordId="11" pos="VERB" lemma="見つける" tag="動詞-一般" udType="advcl" udFrom="15" udTo="4/9/12" original="見つけ">mitsuke</w>
        <w wordId="12" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="11" udTo="" original="て">te</w>
        <w wordId="13" pos="ADV" lemma="持ち上げる" tag="動詞-一般" udType="advmod" udFrom="15" udTo="14" original="持ち上げよう">mochiageyou</w>
        <w wordId="14" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="13" udTo="" original="と">to</w>
        <w wordId="15" pos="VERB" lemma="する" tag="動詞-非自立可能" udType="advcl" udFrom="45" udTo="11/13/16/17/18" original="し">shi</w>
        <w wordId="16" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="15" udTo="" original="ます">masu</w>
        <w wordId="17" pos="SCONJ" lemma="が" tag="助詞-接続助詞" udType="mark" udFrom="15" udTo="" original="が">ga</w>
        <w wordId="18" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="15" udTo="" original="、">,</w>
        <w wordId="19" pos="NOUN" lemma="お" tag="接頭辞" udType="compound" udFrom="21" udTo="" original="お">o</w>
        <w wordId="20" pos="NOUN" lemma="じい" tag="名詞-普通名詞-一般" udType="compound" udFrom="21" udTo="" original="じい">jii</w>
        <w wordId="21" pos="NOUN" lemma="さん" tag="接尾辞-名詞的-一般" udType="nsubj" udFrom="25" udTo="19/20/22" original="さん">san</w>
        <w wordId="22" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="21" udTo="" original="が">ga</w>
        <w wordId="23" pos="NOUN" lemma="手" tag="名詞-普通名詞-助数詞可能" udType="obl" udFrom="25" udTo="24" original="手">te</w>
        <w wordId="24" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="23" udTo="" original="に">ni</w>
        <w wordId="25" pos="VERB" lemma="触れる" tag="動詞-一般" udType="acl" udFrom="27" udTo="21/23/26" original="触れ">fure</w>
        <w wordId="26" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="25" udTo="" original="た">ta</w>
        <w wordId="27" pos="NOUN" lemma="瞬間" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="45" udTo="25/28" original="瞬間">shunkan</w>
        <w wordId="28" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="27" udTo="" original="、">,</w>
        <w wordId="29" pos="NOUN" lemma="ビン" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="31" udTo="30" original="ビン">bin</w>
        <w wordId="30" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="29" udTo="" original="は">ha</w>
        <w wordId="31" pos="VERB" lemma="割れる" tag="動詞-一般" udType="advcl" udFrom="45" udTo="29/32/34/35" original="割れ">ware</w>
        <w wordId="32" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="31" udTo="33" original="て">te</w>
        <w wordId="33" pos="VERB" lemma="しまう" tag="動詞-非自立可能" udType="fixed" udFrom="32" udTo="" original="しまっ">shimatsu</w>
        <w wordId="34" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="31" udTo="" original="て">te</w>
        <w wordId="35" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="31" udTo="" original="、">,</w>
        <w wordId="36" pos="NOUN" lemma="お" tag="接頭辞" udType="compound" udFrom="38" udTo="" original="お">o</w>
        <w wordId="37" pos="NOUN" lemma="じい" tag="名詞-普通名詞-一般" udType="compound" udFrom="38" udTo="" original="じい">jii</w>
        <w wordId="38" pos="NOUN" lemma="さん" tag="接尾辞-名詞的-一般" udType="nsubj" udFrom="41" udTo="36/37/39" original="さん">san</w>
        <w wordId="39" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="38" udTo="" original="は">ha</w>
        <w wordId="40" pos="ADV" lemma="驚く" tag="動詞-一般" udType="advmod" udFrom="41" udTo="" original="驚き">odoroki</w>
        <w wordId="41" pos="VERB" lemma="おののく" tag="動詞-一般" udType="advcl" udFrom="45" udTo="38/40/42" original="おののい">ononoi</w>
        <w wordId="42" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="41" udTo="" original="て">te</w>
        <w wordId="43" pos="NOUN" lemma="尻もち" tag="名詞-普通名詞-一般" udType="obj" udFrom="45" udTo="44" original="尻もち">shirimochi</w>
        <w wordId="44" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="43" udTo="" original="を">wo</w>
        <w wordId="45" pos="VERB" lemma="つく" tag="動詞-一般" udType="ROOT" udFrom="45" udTo="15/27/31/41/43/45/46/47" original="つき">tsuki</w>
        <w wordId="46" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="45" udTo="" original="ます">masu</w>
        <w wordId="47" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="45" udTo="" original="。">.</w>
    </s>
    <s sentId="4" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="一方" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="20" udTo="2" original="一方">ippou</w>
        <w wordId="2" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="で">de</w>
        <w wordId="3" pos="NOUN" lemma="赤ちゃん" tag="名詞-普通名詞-一般" udType="compound" udFrom="4" udTo="" original="赤ちゃん">akachan</w>
        <w wordId="4" pos="NOUN" lemma="ガメ" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="20" udTo="3/5/6" original="ガメ">game</w>
        <w wordId="5" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="4" udTo="" original="は">ha</w>
        <w wordId="6" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="4" udTo="" original="、">,</w>
        <w wordId="7" pos="VERB" lemma="割れる" tag="動詞-一般" udType="acl" udFrom="9" udTo="8" original="割れ">ware</w>
        <w wordId="8" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="7" udTo="" original="た">ta</w>
        <w wordId="9" pos="NOUN" lemma="瓶" tag="名詞-普通名詞-一般" udType="nmod" udFrom="11" udTo="7/10" original="瓶">kame</w>
        <w wordId="10" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="の">no</w>
        <w wordId="11" pos="NOUN" lemma="中" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="13" udTo="9/12" original="中">naka</w>
        <w wordId="12" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="11" udTo="" original="から">kara</w>
        <w wordId="13" pos="VERB" lemma="飛び出す" tag="動詞-一般" udType="advcl" udFrom="18" udTo="11/14/15" original="飛び出し">tobidashi</w>
        <w wordId="14" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="13" udTo="" original="て">te</w>
        <w wordId="15" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="13" udTo="" original="、">,</w>
        <w wordId="16" pos="NOUN" lemma="海" tag="名詞-普通名詞-一般" udType="obl" udFrom="18" udTo="17" original="海">umi</w>
        <w wordId="17" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="16" udTo="" original="に">ni</w>
        <w wordId="18" pos="VERB" lemma="向かう" tag="動詞-一般" udType="advcl" udFrom="20" udTo="13/16/19" original="向かっ">mukatsu</w>
        <w wordId="19" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="18" udTo="" original="て">te</w>
        <w wordId="20" pos="VERB" lemma="いく" tag="動詞-非自立可能" udType="ROOT" udFrom="20" udTo="1/4/18/20/21/22" original="いき">iki</w>
        <w wordId="21" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="20" udTo="" original="ます">masu</w>
        <w wordId="22" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="20" udTo="" original="。">.</w>
    </s>
    <s sentId="5" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="CCONJ" lemma="そして" tag="接続詞" udType="cc" udFrom="30" udTo="2" original="そして">soshite</w>
        <w wordId="2" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="1" udTo="" original="、">,</w>
        <w wordId="3" pos="NOUN" lemma="波" tag="名詞-普通名詞-一般" udType="obl" udFrom="5" udTo="4" original="波">nami</w>
        <w wordId="4" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="3" udTo="" original="に">ni</w>
        <w wordId="5" pos="VERB" lemma="飲み込む" tag="動詞-一般" udType="acl" udFrom="8" udTo="3/6/7" original="飲み込ま">nomikoma</w>
        <w wordId="6" pos="AUX" lemma="れる" tag="助動詞" udType="aux" udFrom="5" udTo="" original="れ">re</w>
        <w wordId="7" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="5" udTo="" original="た">ta</w>
        <w wordId="8" pos="NOUN" lemma="瞬間" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="16" udTo="5/9" original="瞬間">shunkan</w>
        <w wordId="9" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="8" udTo="" original="、">,</w>
        <w wordId="10" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="nmod" udFrom="12" udTo="11" original="カメ">kame</w>
        <w wordId="11" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="10" udTo="" original="の">no</w>
        <w wordId="12" pos="NOUN" lemma="体" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="16" udTo="10/13" original="体">karada</w>
        <w wordId="13" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="12" udTo="" original="は">ha</w>
        <w wordId="14" pos="ADV" lemma="どんどん" tag="副詞" udType="advmod" udFrom="15" udTo="" original="どんどん">dondon</w>
        <w wordId="15" pos="ADJ" lemma="大きい" tag="形容詞-一般" udType="advcl" udFrom="16" udTo="14" original="大きく">ookiku</w>
        <w wordId="16" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="advcl" udFrom="23" udTo="8/12/15/17" original="なり">nari</w>
        <w wordId="17" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="16" udTo="" original="、">,</w>
        <w wordId="18" pos="NOUN" lemma="体調" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="23" udTo="19" original="体調">taichou</w>
        <w wordId="19" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="18" udTo="" original="が">ga</w>
        <w wordId="20" pos="NUM" lemma="1" tag="名詞-数詞" udType="nummod" udFrom="21" udTo="" original="1">1</w>
        <w wordId="21" pos="NOUN" lemma="m" tag="名詞-普通名詞-助数詞可能" udType="nsubj" udFrom="23" udTo="20/22" original="m">m</w>
        <w wordId="22" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="21" udTo="" original="は">ha</w>
        <w wordId="23" pos="VERB" lemma="超える" tag="動詞-一般" udType="advcl" udFrom="30" udTo="16/18/21/24/26" original="超える">koeru</w>
        <w wordId="24" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="23" udTo="25" original="で">de</w>
        <w wordId="25" pos="VERB" lemma="ある" tag="動詞-非自立可能" udType="fixed" udFrom="24" udTo="" original="あろう">arou</w>
        <w wordId="26" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="23" udTo="" original="、">,</w>
        <w wordId="27" pos="ADJ" lemma="大きな" tag="連体詞" udType="amod" udFrom="28" udTo="" original="大きな">ookina</w>
        <w wordId="28" pos="NOUN" lemma="成体" tag="名詞-普通名詞-一般" udType="obl" udFrom="30" udTo="27/29" original="成体">seitai</w>
        <w wordId="29" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="28" udTo="" original="に">ni</w>
        <w wordId="30" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="ROOT" udFrom="30" udTo="1/23/28/30/31/32/33" original="なり">nari</w>
        <w wordId="31" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="30" udTo="" original="まし">mashi</w>
        <w wordId="32" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="30" udTo="" original="た">ta</w>
        <w wordId="33" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="30" udTo="" original="。">.</w>
    </s>
    <s sentId="6" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="27" udTo="2/3" original="カメ">kame</w>
        <w wordId="2" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="1" udTo="" original="は">ha</w>
        <w wordId="3" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="1" udTo="" original="、">,</w>
        <w wordId="4" pos="ADJ" lemma="そのまま" tag="名詞-普通名詞-副詞可能" udType="acl" udFrom="5" udTo="" original="そのまま">sonomama</w>
        <w wordId="5" pos="NOUN" lemma="海" tag="名詞-普通名詞-一般" udType="obl" udFrom="7" udTo="4/6" original="海">umi</w>
        <w wordId="6" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="5" udTo="" original="に">ni</w>
        <w wordId="7" pos="VERB" lemma="向かう" tag="動詞-一般" udType="advcl" udFrom="13" udTo="5/8" original="向かい">mukai</w>
        <w wordId="8" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="7" udTo="" original="、">,</w>
        <w wordId="9" pos="NOUN" lemma="水しぶき" tag="名詞-普通名詞-一般" udType="obj" udFrom="13" udTo="10" original="水しぶき">mizushibuki</w>
        <w wordId="10" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="を">wo</w>
        <w wordId="11" pos="ADJ" lemma="派手" tag="名詞-普通名詞-形状詞可能" udType="advcl" udFrom="13" udTo="12" original="派手">hade</w>
        <w wordId="12" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="11" udTo="" original="に">ni</w>
        <w wordId="13" pos="VERB" lemma="立てる" tag="動詞-一般" udType="advcl" udFrom="18" udTo="7/9/11/14/15" original="立て">tate</w>
        <w wordId="14" pos="SCONJ" lemma="ながら" tag="助詞-接続助詞" udType="mark" udFrom="13" udTo="" original="ながら">nagara</w>
        <w wordId="15" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="13" udTo="" original="、">,</w>
        <w wordId="16" pos="NOUN" lemma="海" tag="名詞-普通名詞-一般" udType="obj" udFrom="18" udTo="17" original="海">umi</w>
        <w wordId="17" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="16" udTo="" original="を">wo</w>
        <w wordId="18" pos="VERB" lemma="進む" tag="動詞-一般" udType="advcl" udFrom="27" udTo="13/16/19" original="進み">susumi</w>
        <w wordId="19" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="18" udTo="" original="、">,</w>
        <w wordId="20" pos="ADV" lemma="すいすい" tag="副詞" udType="advmod" udFrom="21" udTo="" original="すいすい">suisui</w>
        <w wordId="21" pos="VERB" lemma="泳ぐ" tag="動詞-一般" udType="acl" udFrom="23" udTo="20/22" original="泳い">oyoi</w>
        <w wordId="22" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="21" udTo="" original="だ">da</w>
        <w wordId="23" pos="SCONJ" lemma="ところ" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="27" udTo="21/24" original="ところ">tokoro</w>
        <w wordId="24" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="23" udTo="" original="で">de</w>
        <w wordId="25" pos="NOUN" lemma="潜水" tag="名詞-普通名詞-サ変可能" udType="obj" udFrom="27" udTo="26" original="潜水">sensui</w>
        <w wordId="26" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="25" udTo="" original="を">wo</w>
        <w wordId="27" pos="VERB" lemma="始める" tag="動詞-非自立可能" udType="ROOT" udFrom="27" udTo="1/18/23/25/27/28/29" original="始め">hajime</w>
        <w wordId="28" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="27" udTo="" original="ます">masu</w>
        <w wordId="29" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="27" udTo="" original="。">.</w>
    </s>
    <s sentId="7" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="南国" tag="名詞-普通名詞-一般" udType="nmod" udFrom="3" udTo="2" original="南国">nangoku</w>
        <w wordId="2" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="の">no</w>
        <w wordId="3" pos="NOUN" lemma="海" tag="名詞-普通名詞-一般" udType="nmod" udFrom="5" udTo="1/4" original="海">umi</w>
        <w wordId="4" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="3" udTo="" original="の">no</w>
        <w wordId="5" pos="NOUN" lemma="底" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="7" udTo="3/6" original="底">soko</w>
        <w wordId="6" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="5" udTo="" original="は">ha</w>
        <w wordId="7" pos="VERB" lemma="浅い" tag="形容詞-一般" udType="advcl" udFrom="13" udTo="5/8" original="浅く">asaku</w>
        <w wordId="8" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="7" udTo="" original="、">,</w>
        <w wordId="9" pos="NOUN" lemma="太陽" tag="名詞-普通名詞-一般" udType="nmod" udFrom="11" udTo="10" original="太陽">taiyou</w>
        <w wordId="10" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="の">no</w>
        <w wordId="11" pos="NOUN" lemma="光" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="13" udTo="9/12" original="光">hikari</w>
        <w wordId="12" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="11" udTo="" original="が">ga</w>
        <w wordId="13" pos="VERB" lemma="揺らめく" tag="動詞-一般" udType="advcl" udFrom="15" udTo="7/11/14" original="揺らめい">yuramei</w>
        <w wordId="14" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="13" udTo="" original="て">te</w>
        <w wordId="15" pos="ADJ" lemma="美しい" tag="形容詞-一般" udType="acl" udFrom="16" udTo="13" original="美しい">utsukushii</w>
        <w wordId="16" pos="NOUN" lemma="様子" tag="名詞-普通名詞-一般" udType="advcl" udFrom="34" udTo="15/17/18/20/21" original="様子">yousu</w>
        <w wordId="17" pos="AUX" lemma="だ" tag="助動詞" udType="cop" udFrom="16" udTo="" original="な">na</w>
        <w wordId="18" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="16" udTo="19" original="の">no</w>
        <w wordId="19" pos="AUX" lemma="です" tag="助動詞" udType="fixed" udFrom="18" udTo="" original="です">desu</w>
        <w wordId="20" pos="SCONJ" lemma="が" tag="助詞-接続助詞" udType="mark" udFrom="16" udTo="" original="が">ga</w>
        <w wordId="21" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="16" udTo="" original="、">,</w>
        <w wordId="22" pos="NOUN" lemma="先方" tag="名詞-普通名詞-一般" udType="obl" udFrom="29" udTo="23" original="先方">senpou</w>
        <w wordId="23" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="22" udTo="" original="に">ni</w>
        <w wordId="24" pos="ADJ" lemma="急激" tag="形状詞-一般" udType="advcl" udFrom="29" udTo="25" original="急激">kyuugeki</w>
        <w wordId="25" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="24" udTo="" original="に">ni</w>
        <w wordId="26" pos="NOUN" lemma="海底" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="29" udTo="27" original="海底">kaitei</w>
        <w wordId="27" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="26" udTo="" original="が">ga</w>
        <w wordId="28" pos="ADJ" lemma="深い" tag="形容詞-一般" udType="advcl" udFrom="29" udTo="" original="深く">fukaku</w>
        <w wordId="29" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="acl" udFrom="32" udTo="22/24/26/28/30" original="なっ">natsu</w>
        <w wordId="30" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="29" udTo="31" original="て">te</w>
        <w wordId="31" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="30" udTo="" original="いる">iru</w>
        <w wordId="32" pos="NOUN" lemma="場所" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="34" udTo="29/33" original="場所">basho</w>
        <w wordId="33" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="32" udTo="" original="が">ga</w>
        <w wordId="34" pos="VERB" lemma="ある" tag="動詞-非自立可能" udType="ROOT" udFrom="34" udTo="16/32/34/35/36/37" original="あり">ari</w>
        <w wordId="35" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="34" udTo="" original="まし">mashi</w>
        <w wordId="36" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="34" udTo="" original="た">ta</w>
        <w wordId="37" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="34" udTo="" original="。">.</w>
    </s>
    <s sentId="8" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="岩" tag="名詞-普通名詞-一般" udType="obl" udFrom="3" udTo="2" original="岩">iwa</w>
        <w wordId="2" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="に">ni</w>
        <w wordId="3" pos="VERB" lemma="囲む" tag="動詞-一般" udType="acl" udFrom="6" udTo="1/4/5" original="囲ま">kakoma</w>
        <w wordId="4" pos="AUX" lemma="れる" tag="助動詞" udType="aux" udFrom="3" udTo="" original="れ">re</w>
        <w wordId="5" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="3" udTo="" original="た">ta</w>
        <w wordId="6" pos="NOUN" lemma="穴" tag="名詞-普通名詞-一般" udType="nmod" udFrom="8" udTo="3/7" original="穴">ana</w>
        <w wordId="7" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="6" udTo="" original="の">no</w>
        <w wordId="8" pos="NOUN" lemma="よう" tag="形状詞-助動詞語幹" udType="advcl" udFrom="10" udTo="6/9" original="よう">you</w>
        <w wordId="9" pos="AUX" lemma="だ" tag="助動詞" udType="cop" udFrom="8" udTo="" original="に">ni</w>
        <w wordId="10" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="acl" udFrom="14" udTo="8/11" original="なっ">natsu</w>
        <w wordId="11" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="10" udTo="12" original="て">te</w>
        <w wordId="12" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="11" udTo="" original="いる">iru</w>
        <w wordId="13" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="14" udTo="" original="その">sono</w>
        <w wordId="14" pos="NOUN" lemma="窪地" tag="名詞-普通名詞-一般" udType="nmod" udFrom="16" udTo="10/13/15" original="窪地">kubochi</w>
        <w wordId="15" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="14" udTo="" original="の">no</w>
        <w wordId="16" pos="NOUN" lemma="中" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="31" udTo="14/17/18/19" original="中">naka</w>
        <w wordId="17" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="16" udTo="" original="に">ni</w>
        <w wordId="18" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="16" udTo="" original="は">ha</w>
        <w wordId="19" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="16" udTo="" original="、">,</w>
        <w wordId="20" pos="NOUN" lemma="大昔" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="22" udTo="21" original="大昔">oomukashi</w>
        <w wordId="21" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="20" udTo="" original="に">ni</w>
        <w wordId="22" pos="VERB" lemma="沈む" tag="動詞-一般" udType="advcl" udFrom="31" udTo="20/23/24/25/26" original="沈ん">shizun</w>
        <w wordId="23" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="22" udTo="" original="だ">da</w>
        <w wordId="24" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="22" udTo="" original="の">no</w>
        <w wordId="25" pos="PART" lemma="か" tag="助詞-終助詞" udType="mark" udFrom="22" udTo="" original="か">ka</w>
        <w wordId="26" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="22" udTo="" original="、">,</w>
        <w wordId="27" pos="PROPN" lemma="難破船" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="31" udTo="28" original="難破船">nanpasen</w>
        <w wordId="28" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="27" udTo="" original="が">ga</w>
        <w wordId="29" pos="NUM" lemma="一" tag="名詞-数詞" udType="nummod" udFrom="30" udTo="" original="一">ichi</w>
        <w wordId="30" pos="NOUN" lemma="艘" tag="接尾辞-名詞的-助数詞" udType="obl" udFrom="31" udTo="29" original="艘">sou</w>
        <w wordId="31" pos="VERB" lemma="沈む" tag="動詞-一般" udType="ROOT" udFrom="31" udTo="16/22/27/30/31/32/34/35/36" original="沈ん">shizun</w>
        <w wordId="32" pos="SCONJ" lemma="で" tag="助詞-接続助詞" udType="mark" udFrom="31" udTo="33" original="で">de</w>
        <w wordId="33" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="32" udTo="" original="い">i</w>
        <w wordId="34" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="31" udTo="" original="まし">mashi</w>
        <w wordId="35" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="31" udTo="" original="た">ta</w>
        <w wordId="36" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="31" udTo="" original="。">.</w>
    </s>
    <s sentId="9" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="8" udTo="2" original="カメ">kame</w>
        <w wordId="2" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="1" udTo="" original="は">ha</w>
        <w wordId="3" pos="NOUN" lemma="一直線" tag="名詞-普通名詞-一般" udType="obl" udFrom="8" udTo="4" original="一直線">itchokusen</w>
        <w wordId="4" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="3" udTo="" original="に">ni</w>
        <w wordId="5" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="6" udTo="" original="その">sono</w>
        <w wordId="6" pos="NOUN" lemma="船室" tag="名詞-普通名詞-一般" udType="obj" udFrom="8" udTo="5/7" original="船室">senshitsu</w>
        <w wordId="7" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="6" udTo="" original="を">wo</w>
        <w wordId="8" pos="VERB" lemma="目指す" tag="動詞-一般" udType="advcl" udFrom="14" udTo="1/3/6/9" original="目指し">mezashi</w>
        <w wordId="9" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="8" udTo="" original="、">,</w>
        <w wordId="10" pos="NOUN" lemma="船" tag="名詞-普通名詞-一般" udType="nmod" udFrom="12" udTo="11" original="船">fune</w>
        <w wordId="11" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="10" udTo="" original="の">no</w>
        <w wordId="12" pos="NOUN" lemma="中" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="14" udTo="10/13" original="中">naka</w>
        <w wordId="13" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="12" udTo="" original="に">ni</w>
        <w wordId="14" pos="VERB" lemma="入る" tag="動詞-一般" udType="advcl" udFrom="16" udTo="8/12/15" original="入っ">itsutsu</w>
        <w wordId="15" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="14" udTo="" original="て">te</w>
        <w wordId="16" pos="VERB" lemma="いく" tag="動詞-非自立可能" udType="ROOT" udFrom="16" udTo="14/16/17/18/19" original="いき">iki</w>
        <w wordId="17" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="16" udTo="" original="まし">mashi</w>
        <w wordId="18" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="16" udTo="" original="た">ta</w>
        <w wordId="19" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="16" udTo="" original="。">.</w>
    </s>
    <s sentId="10" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="船内" tag="名詞-普通名詞-一般" udType="obl" udFrom="5" udTo="2" original="船内">sennai</w>
        <w wordId="2" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="に">ni</w>
        <w wordId="3" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="5" udTo="4" original="カメ">kame</w>
        <w wordId="4" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="3" udTo="" original="が">ga</w>
        <w wordId="5" pos="VERB" lemma="入る" tag="動詞-一般" udType="acl" udFrom="7" udTo="1/3/6" original="入っ">itsutsu</w>
        <w wordId="6" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="5" udTo="" original="た">ta</w>
        <w wordId="7" pos="NOUN" lemma="瞬間" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="16" udTo="5/8" original="瞬間">shunkan</w>
        <w wordId="8" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="7" udTo="" original="に">ni</w>
        <w wordId="9" pos="NOUN" lemma="画面" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="16" udTo="10" original="画面">gamen</w>
        <w wordId="10" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="9" udTo="" original="は">ha</w>
        <w wordId="11" pos="ADJ" lemma="白い" tag="形容詞-一般" udType="acl" udFrom="12" udTo="" original="白い">shiroi</w>
        <w wordId="12" pos="NOUN" lemma="煙" tag="名詞-普通名詞-一般" udType="nmod" udFrom="14" udTo="11/13" original="煙">kemuri</w>
        <w wordId="13" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="12" udTo="" original="と">to</w>
        <w wordId="14" pos="NOUN" lemma="光" tag="名詞-普通名詞-一般" udType="obl" udFrom="16" udTo="12/15" original="光">hikari</w>
        <w wordId="15" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="14" udTo="" original="で">de</w>
        <w wordId="16" pos="VERB" lemma="満たす" tag="動詞-一般" udType="advcl" udFrom="23" udTo="7/9/14/17/18" original="満たさ">mitasa</w>
        <w wordId="17" pos="AUX" lemma="れる" tag="助動詞" udType="aux" udFrom="16" udTo="" original="れ">re</w>
        <w wordId="18" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="16" udTo="" original="、">,</w>
        <w wordId="19" pos="NOUN" lemma="画面" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="23" udTo="20" original="画面">gamen</w>
        <w wordId="20" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="19" udTo="" original="は">ha</w>
        <w wordId="21" pos="ADJ" lemma="真っ白" tag="形状詞-一般" udType="advcl" udFrom="23" udTo="22" original="真っ白">masshiro</w>
        <w wordId="22" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="21" udTo="" original="に">ni</w>
        <w wordId="23" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="advcl" udFrom="42" udTo="16/19/21/24/26/27" original="なる">naru</w>
        <w wordId="24" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="23" udTo="25" original="の">no</w>
        <w wordId="25" pos="AUX" lemma="です" tag="助動詞" udType="fixed" udFrom="24" udTo="" original="です">desu</w>
        <w wordId="26" pos="SCONJ" lemma="が" tag="助詞-接続助詞" udType="mark" udFrom="23" udTo="" original="が">ga</w>
        <w wordId="27" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="23" udTo="" original="、">,</w>
        <w wordId="28" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="29" udTo="" original="その">sono</w>
        <w wordId="29" pos="NOUN" lemma="煙" tag="名詞-普通名詞-一般" udType="nmod" udFrom="31" udTo="28/30" original="煙">kemuri</w>
        <w wordId="30" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="29" udTo="" original="の">no</w>
        <w wordId="31" pos="NOUN" lemma="向こう" tag="名詞-普通名詞-一般" udType="obl" udFrom="42" udTo="29/32/33" original="向こう">mukou</w>
        <w wordId="32" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="31" udTo="" original="に">ni</w>
        <w wordId="33" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="31" udTo="" original="、">,</w>
        <w wordId="34" pos="ADV" lemma="うっすら" tag="副詞" udType="nmod" udFrom="36" udTo="35" original="うっすら">ussura</w>
        <w wordId="35" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="34" udTo="" original="と">to</w>
        <w wordId="36" pos="PROPN" lemma="人魚" tag="名詞-普通名詞-一般" udType="nmod" udFrom="38" udTo="34/37" original="人魚">ningyo</w>
        <w wordId="37" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="36" udTo="" original="の">no</w>
        <w wordId="38" pos="NOUN" lemma="よう" tag="形状詞-助動詞語幹" udType="acl" udFrom="40" udTo="36/39" original="よう">you</w>
        <w wordId="39" pos="AUX" lemma="だ" tag="助動詞" udType="cop" udFrom="38" udTo="" original="な">na</w>
        <w wordId="40" pos="NOUN" lemma="人影" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="42" udTo="38/41" original="人影">hitokage</w>
        <w wordId="41" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="40" udTo="" original="が">ga</w>
        <w wordId="42" pos="VERB" lemma="見える" tag="動詞-一般" udType="ROOT" udFrom="42" udTo="23/31/40/42/43/44" original="見え">mie</w>
        <w wordId="43" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="42" udTo="" original="ます">masu</w>
        <w wordId="44" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="42" udTo="" original="。">.</w>
    </s>
    <s sentId="11" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="霧" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="3" udTo="2" original="霧">kiri</w>
        <w wordId="2" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="が">ga</w>
        <w wordId="3" pos="VERB" lemma="晴れる" tag="動詞-一般" udType="acl" udFrom="5" udTo="1/4" original="晴れる">hareru</w>
        <w wordId="4" pos="ADP" lemma="より" tag="助詞-格助詞" udType="case" udFrom="3" udTo="" original="より">yori</w>
        <w wordId="5" pos="NOUN" lemma="先" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="17" udTo="3/6/7" original="先">saki</w>
        <w wordId="6" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="5" udTo="" original="に">ni</w>
        <w wordId="7" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="5" udTo="" original="、">,</w>
        <w wordId="8" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="9" udTo="" original="その">sono</w>
        <w wordId="9" pos="NOUN" lemma="二人" tag="名詞-普通名詞-副詞可能" udType="nmod" udFrom="11" udTo="8/10" original="二人">futari</w>
        <w wordId="10" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="の">no</w>
        <w wordId="11" pos="NOUN" lemma="人魚" tag="名詞-普通名詞-一般" udType="acl" udFrom="13" udTo="9/12" original="人魚">ningyo</w>
        <w wordId="12" pos="AUX" lemma="らし" tag="接尾辞-形容詞的" udType="aux" udFrom="11" udTo="" original="らしき">rashiki</w>
        <w wordId="13" pos="NOUN" lemma="人影" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="17" udTo="11/14" original="人影">hitokage</w>
        <w wordId="14" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="13" udTo="" original="は">ha</w>
        <w wordId="15" pos="NOUN" lemma="奥" tag="名詞-普通名詞-一般" udType="obl" udFrom="17" udTo="16" original="奥">oku</w>
        <w wordId="16" pos="ADP" lemma="へ" tag="助詞-格助詞" udType="case" udFrom="15" udTo="" original="へ">he</w>
        <w wordId="17" pos="VERB" lemma="行く" tag="動詞-非自立可能" udType="advcl" udFrom="33" udTo="5/13/15/18/20/21/23" original="行っ">itsu</w>
        <w wordId="18" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="17" udTo="19" original="て">te</w>
        <w wordId="19" pos="VERB" lemma="しまう" tag="動詞-非自立可能" udType="fixed" udFrom="18" udTo="" original="しまっ">shimatsu</w>
        <w wordId="20" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="17" udTo="" original="た">ta</w>
        <w wordId="21" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="17" udTo="22" original="の">no</w>
        <w wordId="22" pos="AUX" lemma="だ" tag="助動詞" udType="fixed" udFrom="21" udTo="" original="で">de</w>
        <w wordId="23" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="17" udTo="" original="、">,</w>
        <w wordId="24" pos="NOUN" lemma="本当" tag="名詞-普通名詞-一般" udType="obl" udFrom="26" udTo="25" original="本当">hontou</w>
        <w wordId="25" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="24" udTo="" original="に">ni</w>
        <w wordId="26" pos="PROPN" lemma="人魚" tag="名詞-普通名詞-一般" udType="advcl" udFrom="30" udTo="24/27/28/29" original="人魚">ningyo</w>
        <w wordId="27" pos="AUX" lemma="だ" tag="助動詞" udType="cop" udFrom="26" udTo="" original="だっ">datsu</w>
        <w wordId="28" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="26" udTo="" original="た">ta</w>
        <w wordId="29" pos="ADP" lemma="か" tag="助詞-副助詞" udType="case" udFrom="26" udTo="" original="か">ka</w>
        <w wordId="30" pos="ADV" lemma="どう" tag="副詞" udType="advmod" udFrom="33" udTo="26/31/32" original="どう">dou</w>
        <w wordId="31" pos="ADP" lemma="か" tag="助詞-副助詞" udType="case" udFrom="30" udTo="" original="か">ka</w>
        <w wordId="32" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="30" udTo="" original="は">ha</w>
        <w wordId="33" pos="VERB" lemma="分かる" tag="動詞-一般" udType="advcl" udFrom="51" udTo="17/30/34/35/36/37/38/39" original="分かり">wakari</w>
        <w wordId="34" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="33" udTo="" original="ませ">mase</w>
        <w wordId="35" pos="AUX" lemma="ぬ" tag="助動詞" udType="aux" udFrom="33" udTo="" original="ん">n</w>
        <w wordId="36" pos="AUX" lemma="です" tag="助動詞" udType="aux" udFrom="33" udTo="" original="でし">deshi</w>
        <w wordId="37" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="33" udTo="" original="た">ta</w>
        <w wordId="38" pos="SCONJ" lemma="が" tag="助詞-接続助詞" udType="mark" udFrom="33" udTo="" original="が">ga</w>
        <w wordId="39" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="33" udTo="" original="、">,</w>
        <w wordId="40" pos="NOUN" lemma="視界" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="42" udTo="41" original="視界">shikai</w>
        <w wordId="41" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="40" udTo="" original="が">ga</w>
        <w wordId="42" pos="VERB" lemma="晴れる" tag="動詞-一般" udType="acl" udFrom="44" udTo="40/43" original="晴れ">hare</w>
        <w wordId="43" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="42" udTo="" original="た">ta</w>
        <w wordId="44" pos="NOUN" lemma="後" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="51" udTo="42/45/46" original="後">nochi</w>
        <w wordId="45" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="44" udTo="" original="は">ha</w>
        <w wordId="46" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="44" udTo="" original="、">,</w>
        <w wordId="47" pos="NOUN" lemma="おんぼろ" tag="名詞-普通名詞-形状詞可能" udType="nmod" udFrom="49" udTo="48" original="おんぼろ">onboro</w>
        <w wordId="48" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="47" udTo="" original="の">no</w>
        <w wordId="49" pos="NOUN" lemma="船内" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="51" udTo="47/50" original="船内">sennai</w>
        <w wordId="50" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="49" udTo="" original="が">ga</w>
        <w wordId="51" pos="VERB" lemma="見える" tag="動詞-一般" udType="advcl" udFrom="66" udTo="33/44/49/52" original="見え">mie</w>
        <w wordId="52" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="51" udTo="" original="、">,</w>
        <w wordId="53" pos="NOUN" lemma="床底" tag="名詞-普通名詞-一般" udType="obl" udFrom="66" udTo="54/55" original="床底">yukasoko</w>
        <w wordId="54" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="53" udTo="" original="に">ni</w>
        <w wordId="55" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="53" udTo="" original="は">ha</w>
        <w wordId="56" pos="NOUN" lemma="宝箱" tag="名詞-普通名詞-一般" udType="nmod" udFrom="58" udTo="57" original="宝箱">takarabako</w>
        <w wordId="57" pos="ADP" lemma="や" tag="助詞-副助詞" udType="case" udFrom="56" udTo="" original="や">ya</w>
        <w wordId="58" pos="NOUN" lemma="壷" tag="名詞-普通名詞-一般" udType="obl" udFrom="60" udTo="56/59" original="壷">tsubo</w>
        <w wordId="59" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="58" udTo="" original="、">,</w>
        <w wordId="60" pos="CCONJ" lemma="そして" tag="接続詞" udType="cc" udFrom="66" udTo="58/61" original="そして">soshite</w>
        <w wordId="61" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="60" udTo="" original="、">,</w>
        <w wordId="62" pos="ADJ" lemma="カラフル" tag="形状詞-一般" udType="acl" udFrom="64" udTo="63" original="カラフル">karafuru</w>
        <w wordId="63" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="62" udTo="" original="な">na</w>
        <w wordId="64" pos="NOUN" lemma="魚" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="66" udTo="62/65" original="魚">sakana</w>
        <w wordId="65" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="64" udTo="" original="が">ga</w>
        <w wordId="66" pos="VERB" lemma="泳ぐ" tag="動詞-一般" udType="csubj" udFrom="71" udTo="51/53/60/64/67/69/70" original="泳い">oyoi</w>
        <w wordId="67" pos="SCONJ" lemma="で" tag="助詞-接続助詞" udType="mark" udFrom="66" udTo="68" original="で">de</w>
        <w wordId="68" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="67" udTo="" original="いる">iru</w>
        <w wordId="69" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="66" udTo="" original="の">no</w>
        <w wordId="70" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="66" udTo="" original="が">ga</w>
        <w wordId="71" pos="VERB" lemma="見える" tag="動詞-一般" udType="ROOT" udFrom="71" udTo="66/71/72/73" original="見え">mie</w>
        <w wordId="72" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="71" udTo="" original="ます">masu</w>
        <w wordId="73" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="71" udTo="" original="。">.</w>
    </s>
    <s sentId="12" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="ADJ" lemma="大きな" tag="連体詞" udType="amod" udFrom="2" udTo="" original="大きな">ookina</w>
        <w wordId="2" pos="NOUN" lemma="ドア" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="4" udTo="1/3" original="ドア">doa</w>
        <w wordId="3" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="2" udTo="" original="が">ga</w>
        <w wordId="4" pos="VERB" lemma="開く" tag="動詞-一般" udType="advcl" udFrom="20" udTo="2/5/7/8/10/11" original="開い">hirai</w>
        <w wordId="5" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="4" udTo="6" original="て">te</w>
        <w wordId="6" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="5" udTo="" original="い">i</w>
        <w wordId="7" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="4" udTo="" original="た">ta</w>
        <w wordId="8" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="4" udTo="9" original="の">no</w>
        <w wordId="9" pos="AUX" lemma="です" tag="助動詞" udType="fixed" udFrom="8" udTo="" original="です">desu</w>
        <w wordId="10" pos="SCONJ" lemma="が" tag="助詞-接続助詞" udType="mark" udFrom="4" udTo="" original="が">ga</w>
        <w wordId="11" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="4" udTo="" original="、">,</w>
        <w wordId="12" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="13" udTo="" original="その">sono</w>
        <w wordId="13" pos="NOUN" lemma="ドア" tag="名詞-普通名詞-一般" udType="obl" udFrom="20" udTo="12/14/15" original="ドア">doa</w>
        <w wordId="14" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="13" udTo="" original="に">ni</w>
        <w wordId="15" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="13" udTo="" original="は">ha</w>
        <w wordId="16" pos="ADJ" lemma="ウミガメ" tag="名詞-普通名詞-一般" udType="advmod" udFrom="18" udTo="17" original="ウミガメ">umigame</w>
        <w wordId="17" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="16" udTo="" original="の">no</w>
        <w wordId="18" pos="NOUN" lemma="姿" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="20" udTo="16/19" original="姿">sugata</w>
        <w wordId="19" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="18" udTo="" original="が">ga</w>
        <w wordId="20" pos="VERB" lemma="描く" tag="動詞-一般" udType="advcl" udFrom="60" udTo="4/13/18/21/22/24" original="描か">egaka</w>
        <w wordId="21" pos="AUX" lemma="れる" tag="助動詞" udType="aux" udFrom="20" udTo="" original="れ">re</w>
        <w wordId="22" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="20" udTo="23" original="て">te</w>
        <w wordId="23" pos="VERB" lemma="おる" tag="動詞-非自立可能" udType="fixed" udFrom="22" udTo="" original="おり">ori</w>
        <w wordId="24" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="20" udTo="" original="、">,</w>
        <w wordId="25" pos="NOUN" lemma="ドア" tag="名詞-普通名詞-一般" udType="nmod" udFrom="27" udTo="26" original="ドア">doa</w>
        <w wordId="26" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="25" udTo="" original="の">no</w>
        <w wordId="27" pos="NOUN" lemma="後ろ" tag="名詞-普通名詞-一般" udType="obl" udFrom="32" udTo="25/28" original="後ろ">ushiro</w>
        <w wordId="28" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="27" udTo="" original="に">ni</w>
        <w wordId="29" pos="PRON" lemma="何" tag="代名詞" udType="obl" udFrom="32" udTo="30/31" original="何">nani</w>
        <w wordId="30" pos="ADP" lemma="か" tag="助詞-副助詞" udType="case" udFrom="29" udTo="" original="か">ka</w>
        <w wordId="31" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="29" udTo="" original="が">ga</w>
        <w wordId="32" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="advcl" udFrom="43" udTo="27/29/33/34/35/36" original="い">i</w>
        <w wordId="33" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="32" udTo="" original="た">ta</w>
        <w wordId="34" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="32" udTo="" original="の">no</w>
        <w wordId="35" pos="PART" lemma="か" tag="助詞-終助詞" udType="mark" udFrom="32" udTo="" original="か">ka</w>
        <w wordId="36" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="32" udTo="" original="、">,</w>
        <w wordId="37" pos="ADV" lemma="突然" tag="副詞" udType="advmod" udFrom="43" udTo="38" original="突然">totsuzen</w>
        <w wordId="38" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="37" udTo="" original="、">,</w>
        <w wordId="39" pos="NOUN" lemma="ドア" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="43" udTo="40" original="ドア">doa</w>
        <w wordId="40" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="39" udTo="" original="は">ha</w>
        <w wordId="41" pos="ADV" lemma="突然" tag="副詞" udType="advmod" udFrom="43" udTo="" original="突然">totsuzen</w>
        <w wordId="42" pos="ADJ" lemma="大きい" tag="形容詞-一般" udType="advcl" udFrom="43" udTo="" original="大きく">ookiku</w>
        <w wordId="43" pos="VERB" lemma="揺れる" tag="動詞-一般" udType="advcl" udFrom="60" udTo="32/37/39/41/42/44/45" original="揺れ">yure</w>
        <w wordId="44" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="43" udTo="" original="て">te</w>
        <w wordId="45" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="43" udTo="" original="、">,</w>
        <w wordId="46" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="47" udTo="" original="その">sono</w>
        <w wordId="47" pos="NOUN" lemma="後" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="60" udTo="46/48" original="後">nochi</w>
        <w wordId="48" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="47" udTo="" original="、">,</w>
        <w wordId="49" pos="ADJ" lemma="不思議" tag="名詞-普通名詞-形状詞可能" udType="acl" udFrom="51" udTo="50" original="不思議">fushigi</w>
        <w wordId="50" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="49" udTo="" original="な">na</w>
        <w wordId="51" pos="NOUN" lemma="こと" tag="名詞-普通名詞-一般" udType="obl" udFrom="60" udTo="49/52/53" original="こと">koto</w>
        <w wordId="52" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="51" udTo="" original="に">ni</w>
        <w wordId="53" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="51" udTo="" original="、">,</w>
        <w wordId="54" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="nmod" udFrom="56" udTo="55" original="カメ">kame</w>
        <w wordId="55" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="54" udTo="" original="の">no</w>
        <w wordId="56" pos="NOUN" lemma="絵" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="60" udTo="54/57" original="絵">e</w>
        <w wordId="57" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="56" udTo="" original="が">ga</w>
        <w wordId="58" pos="NOUN" lemma="黄金色" tag="名詞-普通名詞-一般" udType="obl" udFrom="60" udTo="59" original="黄金色">koganeiro</w>
        <w wordId="59" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="58" udTo="" original="に">ni</w>
        <w wordId="60" pos="VERB" lemma="輝く" tag="動詞-一般" udType="ROOT" udFrom="60" udTo="20/43/47/51/56/58/60/61/62/63/64" original="輝き">kagayaki</w>
        <w wordId="61" pos="VERB" lemma="始める" tag="動詞-非自立可能" udType="advcl" udFrom="60" udTo="" original="始め">hajime</w>
        <w wordId="62" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="60" udTo="" original="まし">mashi</w>
        <w wordId="63" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="60" udTo="" original="た">ta</w>
        <w wordId="64" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="60" udTo="" original="。">.</w>
    </s>
    <s sentId="13" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="光" tag="名詞-普通名詞-一般" udType="obl" udFrom="3" udTo="2" original="光">hikari</w>
        <w wordId="2" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="に">ni</w>
        <w wordId="3" pos="VERB" lemma="包む" tag="動詞-一般" udType="advcl" udFrom="12" udTo="1/4/5/6" original="包ま">tsutsuma</w>
        <w wordId="4" pos="AUX" lemma="れる" tag="助動詞" udType="aux" udFrom="3" udTo="" original="れ">re</w>
        <w wordId="5" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="3" udTo="" original="て">te</w>
        <w wordId="6" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="3" udTo="" original="、">,</w>
        <w wordId="7" pos="NOUN" lemma="世界" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="9" udTo="8" original="世界">sekai</w>
        <w wordId="8" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="7" udTo="" original="が">ga</w>
        <w wordId="9" pos="NOUN" lemma="一度" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="12" udTo="7" original="一度">ichido</w>
        <w wordId="10" pos="ADJ" lemma="完全" tag="形状詞-一般" udType="advcl" udFrom="12" udTo="11" original="完全">kanzen</w>
        <w wordId="11" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="10" udTo="" original="に">ni</w>
        <w wordId="12" pos="VERB" lemma="ホワイトアウト" tag="名詞-固有名詞-一般" udType="acl" udFrom="15" udTo="3/9/10/13/14" original="ホワイトアウト">howaitoauto</w>
        <w wordId="13" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="12" udTo="" original="し">shi</w>
        <w wordId="14" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="12" udTo="" original="た">ta</w>
        <w wordId="15" pos="NOUN" lemma="後" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="26" udTo="12/16/17" original="後">nochi</w>
        <w wordId="16" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="15" udTo="" original="は">ha</w>
        <w wordId="17" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="15" udTo="" original="、">,</w>
        <w wordId="18" pos="ADV" lemma="なぜ" tag="副詞" udType="advmod" udFrom="26" udTo="19" original="なぜ">naze</w>
        <w wordId="19" pos="ADP" lemma="か" tag="助詞-副助詞" udType="case" udFrom="18" udTo="" original="か">ka</w>
        <w wordId="20" pos="NOUN" lemma="アニメ" tag="名詞-普通名詞-一般" udType="nmod" udFrom="22" udTo="21" original="アニメ">anime</w>
        <w wordId="21" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="20" udTo="" original="の">no</w>
        <w wordId="22" pos="NOUN" lemma="よう" tag="形状詞-助動詞語幹" udType="acl" udFrom="24" udTo="20/23" original="よう">you</w>
        <w wordId="23" pos="AUX" lemma="だ" tag="助動詞" udType="cop" udFrom="22" udTo="" original="な">na</w>
        <w wordId="24" pos="NOUN" lemma="世界" tag="名詞-普通名詞-一般" udType="obl" udFrom="26" udTo="22/25" original="世界">sekai</w>
        <w wordId="25" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="24" udTo="" original="に">ni</w>
        <w wordId="26" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="advcl" udFrom="46" udTo="15/18/24/27" original="なり">nari</w>
        <w wordId="27" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="26" udTo="" original="、">,</w>
        <w wordId="28" pos="NOUN" lemma="目" tag="名詞-普通名詞-一般" udType="nmod" udFrom="30" udTo="29" original="目">me</w>
        <w wordId="29" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="28" udTo="" original="の">no</w>
        <w wordId="30" pos="NOUN" lemma="前" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="46" udTo="28/31/32" original="前">mae</w>
        <w wordId="31" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="30" udTo="" original="に">ni</w>
        <w wordId="32" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="30" udTo="" original="は">ha</w>
        <w wordId="33" pos="NOUN" lemma="五体" tag="名詞-普通名詞-一般" udType="nmod" udFrom="35" udTo="34" original="五体">gotai</w>
        <w wordId="34" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="33" udTo="" original="の">no</w>
        <w wordId="35" pos="PROPN" lemma="人魚" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="43" udTo="33/36" original="人魚">ningyo</w>
        <w wordId="36" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="35" udTo="" original="が">ga</w>
        <w wordId="37" pos="NOUN" lemma="木造" tag="名詞-普通名詞-一般" udType="nmod" udFrom="39" udTo="38" original="木造">mokuzou</w>
        <w wordId="38" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="37" udTo="" original="の">no</w>
        <w wordId="39" pos="NOUN" lemma="船室" tag="名詞-普通名詞-一般" udType="nmod" udFrom="41" udTo="37/40" original="船室">senshitsu</w>
        <w wordId="40" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="39" udTo="" original="の">no</w>
        <w wordId="41" pos="NOUN" lemma="中" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="43" udTo="39/42" original="中">naka</w>
        <w wordId="42" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="41" udTo="" original="に">ni</w>
        <w wordId="43" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="acl" udFrom="44" udTo="35/41" original="いる">iru</w>
        <w wordId="44" pos="NOUN" lemma="情景" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="46" udTo="43/45" original="情景">joukei</w>
        <w wordId="45" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="44" udTo="" original="が">ga</w>
        <w wordId="46" pos="VERB" lemma="現れる" tag="動詞-一般" udType="ROOT" udFrom="46" udTo="26/30/44/46/47/48" original="現れ">araware</w>
        <w wordId="47" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="46" udTo="" original="ます">masu</w>
        <w wordId="48" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="46" udTo="" original="。">.</w>
    </s>
    <s sentId="14" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="金髪" tag="名詞-普通名詞-一般" udType="nmod" udFrom="3" udTo="2" original="金髪">kinpatsu</w>
        <w wordId="2" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="と">to</w>
        <w wordId="3" pos="NOUN" lemma="黒髪" tag="名詞-普通名詞-一般" udType="nmod" udFrom="8" udTo="1/4" original="黒髪">kurokami</w>
        <w wordId="4" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="3" udTo="" original="の">no</w>
        <w wordId="5" pos="NUM" lemma="二" tag="名詞-数詞" udType="nummod" udFrom="6" udTo="" original="二">ni</w>
        <w wordId="6" pos="NOUN" lemma="種類" tag="名詞-普通名詞-一般" udType="nmod" udFrom="8" udTo="5/7" original="種類">shurui</w>
        <w wordId="7" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="6" udTo="" original="の">no</w>
        <w wordId="8" pos="NOUN" lemma="人魚" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="10" udTo="3/6/9" original="人魚">ningyo</w>
        <w wordId="9" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="8" udTo="" original="が">ga</w>
        <w wordId="10" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="ROOT" udFrom="10" udTo="8/10/11/12/13" original="いる">iru</w>
        <w wordId="11" pos="AUX" lemma="よう" tag="形状詞-助動詞語幹" udType="aux" udFrom="10" udTo="" original="よう">you</w>
        <w wordId="12" pos="AUX" lemma="です" tag="助動詞" udType="aux" udFrom="10" udTo="" original="です">desu</w>
        <w wordId="13" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="10" udTo="" original="。">.</w>
    </s>
    <s sentId="15" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="PROPN" lemma="人魚" tag="名詞-普通名詞-一般" udType="compound" udFrom="2" udTo="" original="人魚">ningyo</w>
        <w wordId="2" pos="NOUN" lemma="たち" tag="接尾辞-名詞的-一般" udType="nsubj" udFrom="8" udTo="1/3" original="たち">tachi</w>
        <w wordId="3" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="2" udTo="" original="は">ha</w>
        <w wordId="4" pos="ADJ" lemma="無表情" tag="名詞-普通名詞-形状詞可能" udType="advcl" udFrom="8" udTo="5" original="無表情">muhyoujou</w>
        <w wordId="5" pos="AUX" lemma="に" tag="助詞-格助詞" udType="cop" udFrom="4" udTo="" original="に">ni</w>
        <w wordId="6" pos="PRON" lemma="こちら" tag="代名詞" udType="obj" udFrom="8" udTo="7" original="こちら">kochira</w>
        <w wordId="7" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="6" udTo="" original="を">wo</w>
        <w wordId="8" pos="VERB" lemma="見る" tag="動詞-非自立可能" udType="advcl" udFrom="42" udTo="2/4/6/9/11/12/13/14" original="見">ken</w>
        <w wordId="9" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="8" udTo="10" original="て">te</w>
        <w wordId="10" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="9" udTo="" original="い">i</w>
        <w wordId="11" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="8" udTo="" original="まし">mashi</w>
        <w wordId="12" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="8" udTo="" original="た">ta</w>
        <w wordId="13" pos="SCONJ" lemma="が" tag="助詞-接続助詞" udType="mark" udFrom="8" udTo="" original="が">ga</w>
        <w wordId="14" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="8" udTo="" original="、">,</w>
        <w wordId="15" pos="ADV" lemma="突然" tag="副詞" udType="advmod" udFrom="24" udTo="" original="突然">totsuzen</w>
        <w wordId="16" pos="NOUN" lemma="真ん中" tag="名詞-普通名詞-一般" udType="nmod" udFrom="18" udTo="17" original="真ん中">mannaka</w>
        <w wordId="17" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="16" udTo="" original="の">no</w>
        <w wordId="18" pos="NOUN" lemma="黒髪" tag="名詞-普通名詞-一般" udType="nmod" udFrom="20" udTo="16/19" original="黒髪">kurokami</w>
        <w wordId="19" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="18" udTo="" original="の">no</w>
        <w wordId="20" pos="PROPN" lemma="人魚" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="24" udTo="18/21" original="人魚">ningyo</w>
        <w wordId="21" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="20" udTo="" original="が">ga</w>
        <w wordId="22" pos="NOUN" lemma="手" tag="名詞-普通名詞-助数詞可能" udType="obl" udFrom="24" udTo="23" original="手">te</w>
        <w wordId="23" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="22" udTo="" original="に">ni</w>
        <w wordId="24" pos="VERB" lemma="持つ" tag="動詞-一般" udType="acl" udFrom="28" udTo="15/20/22/25/27" original="持っ">motsu</w>
        <w wordId="25" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="24" udTo="26" original="て">te</w>
        <w wordId="26" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="25" udTo="" original="い">i</w>
        <w wordId="27" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="24" udTo="" original="た">ta</w>
        <w wordId="28" pos="NOUN" lemma="槍" tag="名詞-普通名詞-一般" udType="obj" udFrom="31" udTo="24/29" original="槍">yari</w>
        <w wordId="29" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="28" udTo="" original="を">wo</w>
        <w wordId="30" pos="ADJ" lemma="高い" tag="形容詞-一般" udType="advcl" udFrom="31" udTo="" original="高く">takaku</w>
        <w wordId="31" pos="VERB" lemma="上げる" tag="動詞-非自立可能" udType="advcl" udFrom="40" udTo="28/30/32" original="上げ">age</w>
        <w wordId="32" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="31" udTo="" original="、">,</w>
        <w wordId="33" pos="PRON" lemma="そこ" tag="代名詞" udType="obl" udFrom="40" udTo="34/35" original="そこ">soko</w>
        <w wordId="34" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="33" udTo="" original="から">kara</w>
        <w wordId="35" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="33" udTo="" original="、">,</w>
        <w wordId="36" pos="NOUN" lemma="光" tag="名詞-普通名詞-一般" udType="obj" udFrom="40" udTo="37" original="光">hikari</w>
        <w wordId="37" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="36" udTo="" original="を">wo</w>
        <w wordId="38" pos="NOUN" lemma="天井" tag="名詞-普通名詞-一般" udType="obl" udFrom="40" udTo="39" original="天井">tenjou</w>
        <w wordId="39" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="38" udTo="" original="に">ni</w>
        <w wordId="40" pos="VERB" lemma="向ける" tag="動詞-一般" udType="advcl" udFrom="42" udTo="31/33/36/38/41" original="向け">muke</w>
        <w wordId="41" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="40" udTo="" original="て">te</w>
        <w wordId="42" pos="VERB" lemma="放つ" tag="動詞-一般" udType="ROOT" udFrom="42" udTo="8/40/42/43/44/45" original="放ち">houtchi</w>
        <w wordId="43" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="42" udTo="" original="まし">mashi</w>
        <w wordId="44" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="42" udTo="" original="た">ta</w>
        <w wordId="45" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="42" udTo="" original="。">.</w>
    </s>
    <s sentId="16" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="CCONJ" lemma="する" tag="動詞-非自立可能" udType="cc" udFrom="12" udTo="2/3" original="する">suru</w>
        <w wordId="2" pos="SCONJ" lemma="と" tag="助詞-接続助詞" udType="fixed" udFrom="1" udTo="" original="と">to</w>
        <w wordId="3" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="1" udTo="" original="、">,</w>
        <w wordId="4" pos="NOUN" lemma="部屋" tag="名詞-普通名詞-一般" udType="compound" udFrom="5" udTo="" original="部屋">heya</w>
        <w wordId="5" pos="NOUN" lemma="全体" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="12" udTo="4/6" original="全体">zentai</w>
        <w wordId="6" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="5" udTo="" original="は">ha</w>
        <w wordId="7" pos="NOUN" lemma="黄金色" tag="名詞-普通名詞-一般" udType="obl" udFrom="9" udTo="8" original="黄金色">koganeiro</w>
        <w wordId="8" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="7" udTo="" original="に">ni</w>
        <w wordId="9" pos="VERB" lemma="輝く" tag="動詞-一般" udType="advcl" udFrom="12" udTo="7/10" original="輝き">kagayaki</w>
        <w wordId="10" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="9" udTo="" original="、">,</w>
        <w wordId="11" pos="ADJ" lemma="明るい" tag="形容詞-一般" udType="advcl" udFrom="12" udTo="" original="明るく">akaruku</w>
        <w wordId="12" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="ROOT" udFrom="12" udTo="1/5/9/11/12/13/14/15" original="なり">nari</w>
        <w wordId="13" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="12" udTo="" original="まし">mashi</w>
        <w wordId="14" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="12" udTo="" original="た">ta</w>
        <w wordId="15" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="12" udTo="" original="。">.</w>
    </s>
    <s sentId="17" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="PROPN" lemma="人魚" tag="名詞-普通名詞-一般" udType="compound" udFrom="2" udTo="" original="人魚">ningyo</w>
        <w wordId="2" pos="NOUN" lemma="たち" tag="接尾辞-名詞的-一般" udType="nmod" udFrom="4" udTo="1/3" original="たち">tachi</w>
        <w wordId="3" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="2" udTo="" original="の">no</w>
        <w wordId="4" pos="NOUN" lemma="後ろ" tag="名詞-普通名詞-一般" udType="obl" udFrom="10" udTo="2/5/6/7" original="後ろ">ushiro</w>
        <w wordId="5" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="4" udTo="" original="に">ni</w>
        <w wordId="6" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="4" udTo="" original="は">ha</w>
        <w wordId="7" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="4" udTo="" original="、">,</w>
        <w wordId="8" pos="NOUN" lemma="ドア" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="10" udTo="9" original="ドア">doa</w>
        <w wordId="9" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="8" udTo="" original="が">ga</w>
        <w wordId="10" pos="VERB" lemma="ある" tag="動詞-非自立可能" udType="advcl" udFrom="20" udTo="4/8" original="あり">ari</w>
        <w wordId="11" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="12" udTo="" original="その">sono</w>
        <w wordId="12" pos="NOUN" lemma="上" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="20" udTo="11/13/14/15" original="上">ue</w>
        <w wordId="13" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="12" udTo="" original="に">ni</w>
        <w wordId="14" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="12" udTo="" original="は">ha</w>
        <w wordId="15" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="12" udTo="" original="、">,</w>
        <w wordId="16" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="nmod" udFrom="18" udTo="17" original="カメ">kame</w>
        <w wordId="17" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="16" udTo="" original="の">no</w>
        <w wordId="18" pos="NOUN" lemma="絵" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="20" udTo="16/19" original="絵">e</w>
        <w wordId="19" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="18" udTo="" original="が">ga</w>
        <w wordId="20" pos="VERB" lemma="ある" tag="動詞-非自立可能" udType="ROOT" udFrom="20" udTo="10/12/18/20/21/22/23" original="ある">aru</w>
        <w wordId="21" pos="AUX" lemma="よう" tag="形状詞-助動詞語幹" udType="aux" udFrom="20" udTo="" original="よう">you</w>
        <w wordId="22" pos="AUX" lemma="です" tag="助動詞" udType="aux" udFrom="20" udTo="" original="です">desu</w>
        <w wordId="23" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="20" udTo="" original="。">.</w>
    </s>
    <s sentId="18" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="2" udTo="" original="その">sono</w>
        <w wordId="2" pos="NOUN" lemma="後" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="6" udTo="1/3" original="後">nochi</w>
        <w wordId="3" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="2" udTo="" original="、">,</w>
        <w wordId="4" pos="NOUN" lemma="わき" tag="名詞-普通名詞-一般" udType="obl" udFrom="6" udTo="5" original="わき">waki</w>
        <w wordId="5" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="4" udTo="" original="に">ni</w>
        <w wordId="6" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="acl" udFrom="11" udTo="2/4/7" original="い">i</w>
        <w wordId="7" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="6" udTo="" original="た">ta</w>
        <w wordId="8" pos="NUM" lemma="二" tag="名詞-数詞" udType="nummod" udFrom="9" udTo="" original="二">ni</w>
        <w wordId="9" pos="NOUN" lemma="体" tag="名詞-普通名詞-助数詞可能" udType="nmod" udFrom="11" udTo="8/10" original="体">karada</w>
        <w wordId="10" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="の">no</w>
        <w wordId="11" pos="NOUN" lemma="人魚" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="13" udTo="6/9/12" original="人魚">ningyo</w>
        <w wordId="12" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="11" udTo="" original="が">ga</w>
        <w wordId="13" pos="VERB" lemma="跪く" tag="動詞-一般" udType="advcl" udFrom="20" udTo="11/14" original="跪き">hizamazuki</w>
        <w wordId="14" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="13" udTo="" original="、">,</w>
        <w wordId="15" pos="NOUN" lemma="人魚" tag="名詞-普通名詞-一般" udType="compound" udFrom="16" udTo="" original="人魚">ningyo</w>
        <w wordId="16" pos="NOUN" lemma="たち" tag="接尾辞-名詞的-一般" udType="nsubj" udFrom="20" udTo="15/17" original="たち">tachi</w>
        <w wordId="17" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="16" udTo="" original="が">ga</w>
        <w wordId="18" pos="NOUN" lemma="会話" tag="名詞-普通名詞-サ変可能" udType="obj" udFrom="20" udTo="19" original="会話">kaiwa</w>
        <w wordId="19" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="18" udTo="" original="を">wo</w>
        <w wordId="20" pos="VERB" lemma="交わす" tag="動詞-非自立可能" udType="ROOT" udFrom="20" udTo="13/16/18/20/21/22" original="交わし">majiwashi</w>
        <w wordId="21" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="20" udTo="" original="ます">masu</w>
        <w wordId="22" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="20" udTo="" original="。">.</w>
    </s>
    <s sentId="19" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="CCONJ" lemma="そして" tag="接続詞" udType="cc" udFrom="36" udTo="2" original="そして">soshite</w>
        <w wordId="2" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="1" udTo="" original="、">,</w>
        <w wordId="3" pos="ADV" lemma="先ほど" tag="名詞-普通名詞-副詞可能" udType="advmod" udFrom="13" udTo="" original="先ほど">sakihodo</w>
        <w wordId="4" pos="NOUN" lemma="部屋" tag="名詞-普通名詞-一般" udType="obj" udFrom="7" udTo="5" original="部屋">heya</w>
        <w wordId="5" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="4" udTo="" original="を">wo</w>
        <w wordId="6" pos="ADJ" lemma="明るい" tag="形容詞-一般" udType="advcl" udFrom="7" udTo="" original="明るく">akaruku</w>
        <w wordId="7" pos="VERB" lemma="する" tag="動詞-非自立可能" udType="acl" udFrom="9" udTo="4/6/8" original="し">shi</w>
        <w wordId="8" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="7" udTo="" original="た">ta</w>
        <w wordId="9" pos="PROPN" lemma="人魚" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="13" udTo="7/10" original="人魚">ningyo</w>
        <w wordId="10" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="が">ga</w>
        <w wordId="11" pos="NOUN" lemma="上" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="13" udTo="12" original="上">ue</w>
        <w wordId="12" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="11" udTo="" original="に">ni</w>
        <w wordId="13" pos="VERB" lemma="上昇" tag="名詞-普通名詞-サ変可能" udType="advcl" udFrom="21" udTo="3/9/11/14/15" original="上昇">joushou</w>
        <w wordId="14" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="13" udTo="" original="し">shi</w>
        <w wordId="15" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="13" udTo="" original="、">,</w>
        <w wordId="16" pos="NOUN" lemma="槍" tag="名詞-普通名詞-一般" udType="obj" udFrom="21" udTo="17" original="槍">yari</w>
        <w wordId="17" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="16" udTo="" original="を">wo</w>
        <w wordId="18" pos="PRON" lemma="どこ" tag="代名詞" udType="obl" udFrom="21" udTo="19/20" original="どこ">doko</w>
        <w wordId="19" pos="ADP" lemma="か" tag="助詞-副助詞" udType="case" udFrom="18" udTo="" original="か">ka</w>
        <w wordId="20" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="18" udTo="" original="に">ni</w>
        <w wordId="21" pos="VERB" lemma="置く" tag="動詞-非自立可能" udType="advcl" udFrom="29" udTo="13/16/18/22/23/24" original="置い">oi</w>
        <w wordId="22" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="21" udTo="" original="て">te</w>
        <w wordId="23" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="21" udTo="" original="から">kara</w>
        <w wordId="24" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="21" udTo="" original="、">,</w>
        <w wordId="25" pos="NOUN" lemma="ぐるっ" tag="副詞" udType="nmod" udFrom="27" udTo="26" original="ぐるっ">gurutsu</w>
        <w wordId="26" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="25" udTo="" original="と">to</w>
        <w wordId="27" pos="NOUN" lemma="部屋" tag="名詞-普通名詞-一般" udType="obj" udFrom="29" udTo="25/28" original="部屋">heya</w>
        <w wordId="28" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="27" udTo="" original="を">wo</w>
        <w wordId="29" pos="VERB" lemma="回る" tag="動詞-非自立可能" udType="advcl" udFrom="36" udTo="21/27/30/31" original="回っ">mawatsu</w>
        <w wordId="30" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="29" udTo="" original="て">te</w>
        <w wordId="31" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="29" udTo="" original="、">,</w>
        <w wordId="32" pos="NOUN" lemma="ドア" tag="名詞-普通名詞-一般" udType="obj" udFrom="36" udTo="33" original="ドア">doa</w>
        <w wordId="33" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="32" udTo="" original="を">wo</w>
        <w wordId="34" pos="NOUN" lemma="正面" tag="名詞-普通名詞-一般" udType="obl" udFrom="36" udTo="35" original="正面">shoumen</w>
        <w wordId="35" pos="ADP" lemma="に" tag="助詞-格助詞" udType="aux" udFrom="34" udTo="" original="に">ni</w>
        <w wordId="36" pos="VERB" lemma="跪く" tag="動詞-一般" udType="ROOT" udFrom="36" udTo="1/29/32/34/36/37/38/39" original="跪き">hizamazuki</w>
        <w wordId="37" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="36" udTo="" original="まし">mashi</w>
        <w wordId="38" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="36" udTo="" original="た">ta</w>
        <w wordId="39" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="36" udTo="" original="。">.</w>
    </s>
    <s sentId="20" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="DET" lemma="この" tag="連体詞" udType="det" udFrom="2" udTo="" original="この">kono</w>
        <w wordId="2" pos="PROPN" lemma="人魚" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="7" udTo="1/3" original="人魚">ningyo</w>
        <w wordId="3" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="2" udTo="" original="が">ga</w>
        <w wordId="4" pos="NOUN" lemma="ドア" tag="名詞-普通名詞-一般" udType="obj" udFrom="7" udTo="5" original="ドア">doa</w>
        <w wordId="5" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="4" udTo="" original="を">wo</w>
        <w wordId="6" pos="ADV" lemma="まっすぐ" tag="副詞" udType="advmod" udFrom="7" udTo="" original="まっすぐ">massugu</w>
        <w wordId="7" pos="VERB" lemma="見つめる" tag="動詞-一般" udType="advcl" udFrom="17" udTo="2/4/6/8/10" original="見つめる">mitsumeru</w>
        <w wordId="8" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="7" udTo="9" original="の">no</w>
        <w wordId="9" pos="AUX" lemma="だ" tag="助動詞" udType="fixed" udFrom="8" udTo="" original="で">de</w>
        <w wordId="10" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="7" udTo="" original="、">,</w>
        <w wordId="11" pos="NOUN" lemma="ほか" tag="名詞-普通名詞-副詞可能" udType="nmod" udFrom="13" udTo="12" original="ほか">hoka</w>
        <w wordId="12" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="11" udTo="" original="の">no</w>
        <w wordId="13" pos="PROPN" lemma="人魚" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="17" udTo="11/14" original="人魚">ningyo</w>
        <w wordId="14" pos="ADP" lemma="も" tag="助詞-係助詞" udType="case" udFrom="13" udTo="" original="も">mo</w>
        <w wordId="15" pos="NOUN" lemma="ドア" tag="名詞-普通名詞-一般" udType="obj" udFrom="17" udTo="16" original="ドア">doa</w>
        <w wordId="16" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="15" udTo="" original="を">wo</w>
        <w wordId="17" pos="VERB" lemma="見つめる" tag="動詞-一般" udType="advcl" udFrom="38" udTo="7/13/15/18/19" original="見つめる">mitsumeru</w>
        <w wordId="18" pos="SCONJ" lemma="と" tag="助詞-接続助詞" udType="mark" udFrom="17" udTo="" original="と">to</w>
        <w wordId="19" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="17" udTo="" original="、">,</w>
        <w wordId="20" pos="NOUN" lemma="ドア" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="38" udTo="21/22" original="ドア">doa</w>
        <w wordId="21" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="20" udTo="" original="が">ga</w>
        <w wordId="22" pos="ADV" lemma="まばゆい" tag="形容詞-一般" udType="dep" udFrom="20" udTo="" original="まばゆく">mabayuku</w>
        <w wordId="23" pos="ADJ" lemma="白い" tag="形容詞-一般" udType="advcl" udFrom="24" udTo="" original="白く">shiroku</w>
        <w wordId="24" pos="VERB" lemma="光る" tag="動詞-一般" udType="advcl" udFrom="38" udTo="23/25" original="光り">hikari</w>
        <w wordId="25" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="24" udTo="" original="、">,</w>
        <w wordId="26" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="27" udTo="" original="その">sono</w>
        <w wordId="27" pos="NOUN" lemma="光" tag="名詞-普通名詞-一般" udType="nmod" udFrom="29" udTo="26/28" original="光">hikari</w>
        <w wordId="28" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="27" udTo="" original="の">no</w>
        <w wordId="29" pos="NOUN" lemma="中" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="38" udTo="27/30/31" original="中">naka</w>
        <w wordId="30" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="29" udTo="" original="から">kara</w>
        <w wordId="31" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="29" udTo="" original="、">,</w>
        <w wordId="32" pos="NOUN" lemma="着物" tag="名詞-普通名詞-一般" udType="obj" udFrom="34" udTo="33" original="着物">kimono</w>
        <w wordId="33" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="32" udTo="" original="を">wo</w>
        <w wordId="34" pos="VERB" lemma="着る" tag="動詞-一般" udType="acl" udFrom="36" udTo="32/35" original="着">chaku</w>
        <w wordId="35" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="34" udTo="" original="た">ta</w>
        <w wordId="36" pos="NOUN" lemma="女性" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="38" udTo="34/37" original="女性">josei</w>
        <w wordId="37" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="36" udTo="" original="が">ga</w>
        <w wordId="38" pos="VERB" lemma="現れる" tag="動詞-一般" udType="ROOT" udFrom="38" udTo="17/20/24/29/36/38/39/40" original="現れ">araware</w>
        <w wordId="39" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="38" udTo="" original="ます">masu</w>
        <w wordId="40" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="38" udTo="" original="。">.</w>
    </s>
    <s sentId="21" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="紙" tag="名詞-普通名詞-一般" udType="nmod" udFrom="3" udTo="2" original="紙">kami</w>
        <w wordId="2" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="の">no</w>
        <w wordId="3" pos="NOUN" lemma="よう" tag="形状詞-助動詞語幹" udType="acl" udFrom="5" udTo="1/4" original="よう">you</w>
        <w wordId="4" pos="AUX" lemma="だ" tag="助動詞" udType="cop" udFrom="3" udTo="" original="な">na</w>
        <w wordId="5" pos="NOUN" lemma="もの" tag="名詞-普通名詞-サ変可能" udType="obj" udFrom="7" udTo="3/6" original="もの">mono</w>
        <w wordId="6" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="5" udTo="" original="を">wo</w>
        <w wordId="7" pos="VERB" lemma="開く" tag="動詞-一般" udType="advcl" udFrom="21" udTo="5/8/9" original="開く">hiraku</w>
        <w wordId="8" pos="SCONJ" lemma="と" tag="助詞-接続助詞" udType="mark" udFrom="7" udTo="" original="と">to</w>
        <w wordId="9" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="7" udTo="" original="、">,</w>
        <w wordId="10" pos="VERB" lemma="立つ" tag="動詞-一般" udType="acl" udFrom="17" udTo="11/13" original="立っ">tatsu</w>
        <w wordId="11" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="10" udTo="12" original="て">te</w>
        <w wordId="12" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="11" udTo="" original="い">i</w>
        <w wordId="13" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="10" udTo="" original="た">ta</w>
        <w wordId="14" pos="NUM" lemma="二" tag="名詞-数詞" udType="nummod" udFrom="15" udTo="" original="二">ni</w>
        <w wordId="15" pos="NOUN" lemma="体" tag="名詞-普通名詞-助数詞可能" udType="nmod" udFrom="17" udTo="14/16" original="体">karada</w>
        <w wordId="16" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="15" udTo="" original="の">no</w>
        <w wordId="17" pos="NOUN" lemma="人魚" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="21" udTo="10/15/18" original="人魚">ningyo</w>
        <w wordId="18" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="17" udTo="" original="が">ga</w>
        <w wordId="19" pos="VERB" lemma="慌てる" tag="動詞-一般" udType="advcl" udFrom="21" udTo="20" original="慌て">awate</w>
        <w wordId="20" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="19" udTo="" original="て">te</w>
        <w wordId="21" pos="VERB" lemma="上昇" tag="名詞-普通名詞-サ変可能" udType="advcl" udFrom="26" udTo="7/17/19/22" original="上昇">joushou</w>
        <w wordId="22" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="21" udTo="" original="し">shi</w>
        <w wordId="23" pos="PRON" lemma="どこ" tag="代名詞" udType="obl" udFrom="26" udTo="24/25" original="どこ">doko</w>
        <w wordId="24" pos="ADP" lemma="か" tag="助詞-副助詞" udType="case" udFrom="23" udTo="" original="か">ka</w>
        <w wordId="25" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="23" udTo="" original="に">ni</w>
        <w wordId="26" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="advcl" udFrom="28" udTo="21/23/27" original="い">i</w>
        <w wordId="27" pos="AUX" lemma="ない" tag="助動詞" udType="aux" udFrom="26" udTo="" original="なく">naku</w>
        <w wordId="28" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="ROOT" udFrom="28" udTo="26/28/29/31/32" original="なっ">natsu</w>
        <w wordId="29" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="28" udTo="30" original="て">te</w>
        <w wordId="30" pos="VERB" lemma="しまう" tag="動詞-非自立可能" udType="fixed" udFrom="29" udTo="" original="しまい">shimai</w>
        <w wordId="31" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="28" udTo="" original="ます">masu</w>
        <w wordId="32" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="28" udTo="" original="。">.</w>
    </s>
    <s sentId="22" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="VERB" lemma="残す" tag="動詞-一般" udType="advcl" udFrom="4" udTo="2/3" original="残さ">nokosa</w>
        <w wordId="2" pos="AUX" lemma="れる" tag="助動詞" udType="aux" udFrom="1" udTo="" original="れ">re</w>
        <w wordId="3" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="1" udTo="" original="た">ta</w>
        <w wordId="4" pos="VERB" lemma="座る" tag="動詞-一般" udType="acl" udFrom="11" udTo="1/5/7" original="座っ">suwatsu</w>
        <w wordId="5" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="4" udTo="6" original="て">te</w>
        <w wordId="6" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="5" udTo="" original="い">i</w>
        <w wordId="7" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="4" udTo="" original="た">ta</w>
        <w wordId="8" pos="NUM" lemma="三" tag="名詞-数詞" udType="nummod" udFrom="9" udTo="" original="三">san</w>
        <w wordId="9" pos="NOUN" lemma="体" tag="名詞-普通名詞-助数詞可能" udType="nmod" udFrom="11" udTo="8/10" original="体">karada</w>
        <w wordId="10" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="の">no</w>
        <w wordId="11" pos="NOUN" lemma="人魚" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="14" udTo="4/9/12/13" original="人魚">ningyo</w>
        <w wordId="12" pos="ADP" lemma="も" tag="助詞-係助詞" udType="case" udFrom="11" udTo="" original="も">mo</w>
        <w wordId="13" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="11" udTo="" original="、">,</w>
        <w wordId="14" pos="VERB" lemma="続く" tag="動詞-非自立可能" udType="advcl" udFrom="25" udTo="11/15/16" original="続い">tsuzui</w>
        <w wordId="15" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="14" udTo="" original="て">te</w>
        <w wordId="16" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="14" udTo="" original="、">,</w>
        <w wordId="17" pos="VERB" lemma="慌てふためく" tag="動詞-一般" udType="advcl" udFrom="23" udTo="18/19" original="慌てふためい">awatefutamei</w>
        <w wordId="18" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="17" udTo="" original="て">te</w>
        <w wordId="19" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="17" udTo="" original="、">,</w>
        <w wordId="20" pos="PRON" lemma="どこ" tag="代名詞" udType="obl" udFrom="23" udTo="21/22" original="どこ">doko</w>
        <w wordId="21" pos="ADP" lemma="か" tag="助詞-副助詞" udType="case" udFrom="20" udTo="" original="か">ka</w>
        <w wordId="22" pos="ADP" lemma="へ" tag="助詞-格助詞" udType="case" udFrom="20" udTo="" original="へ">he</w>
        <w wordId="23" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="advcl" udFrom="25" udTo="17/20/24" original="い">i</w>
        <w wordId="24" pos="AUX" lemma="ない" tag="助動詞" udType="aux" udFrom="23" udTo="" original="なく">naku</w>
        <w wordId="25" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="ROOT" udFrom="25" udTo="14/23/25/26/28/29" original="なっ">natsu</w>
        <w wordId="26" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="25" udTo="27" original="て">te</w>
        <w wordId="27" pos="VERB" lemma="しまう" tag="動詞-非自立可能" udType="fixed" udFrom="26" udTo="" original="しまい">shimai</w>
        <w wordId="28" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="25" udTo="" original="ます">masu</w>
        <w wordId="29" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="25" udTo="" original="。">.</w>
    </s>
    <s sentId="23" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="ADV" lemma="一人" tag="名詞-普通名詞-副詞可能" udType="advmod" udFrom="2" udTo="" original="一人">hitori</w>
        <w wordId="2" pos="VERB" lemma="たたずむ" tag="動詞-一般" udType="acl" udFrom="3" udTo="1" original="たたずむ">tatazumu</w>
        <w wordId="3" pos="NOUN" lemma="女性" tag="名詞-普通名詞-一般" udType="nmod" udFrom="5" udTo="2/4" original="女性">josei</w>
        <w wordId="4" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="3" udTo="" original="の">no</w>
        <w wordId="5" pos="NOUN" lemma="手" tag="名詞-普通名詞-助数詞可能" udType="obl" udFrom="13" udTo="3/6/7" original="手">te</w>
        <w wordId="6" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="5" udTo="" original="から">kara</w>
        <w wordId="7" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="5" udTo="" original="、">,</w>
        <w wordId="8" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="9" udTo="" original="その">sono</w>
        <w wordId="9" pos="NOUN" lemma="紙" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="13" udTo="8/10" original="紙">kami</w>
        <w wordId="10" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="が">ga</w>
        <w wordId="11" pos="ADV" lemma="ひらひら" tag="副詞" udType="advmod" udFrom="13" udTo="12" original="ひらひら">hirahira</w>
        <w wordId="12" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="11" udTo="" original="と">to</w>
        <w wordId="13" pos="VERB" lemma="落ちる" tag="動詞-一般" udType="advcl" udFrom="17" udTo="5/9/11/14" original="落ち">ochi</w>
        <w wordId="14" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="13" udTo="" original="、">,</w>
        <w wordId="15" pos="NOUN" lemma="手前" tag="名詞-普通名詞-一般" udType="obl" udFrom="17" udTo="16" original="手前">temae</w>
        <w wordId="16" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="15" udTo="" original="に">ni</w>
        <w wordId="17" pos="VERB" lemma="やる" tag="動詞-非自立可能" udType="advcl" udFrom="19" udTo="13/15/18" original="やっ">yatsu</w>
        <w wordId="18" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="17" udTo="" original="て">te</w>
        <w wordId="19" pos="VERB" lemma="くる" tag="動詞-非自立可能" udType="ROOT" udFrom="19" udTo="17/19/20/21" original="き">ki</w>
        <w wordId="20" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="19" udTo="" original="ます">masu</w>
        <w wordId="21" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="19" udTo="" original="。">.</w>
    </s>
    <s sentId="24" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="ADV" lemma="どう" tag="副詞" udType="advmod" udFrom="6" udTo="2" original="どう">dou</w>
        <w wordId="2" pos="ADP" lemma="も" tag="助詞-係助詞" udType="case" udFrom="1" udTo="" original="も">mo</w>
        <w wordId="3" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="4" udTo="" original="その">sono</w>
        <w wordId="4" pos="NOUN" lemma="紙" tag="名詞-普通名詞-一般" udType="obl" udFrom="6" udTo="3/5" original="紙">kami</w>
        <w wordId="5" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="4" udTo="" original="に">ni</w>
        <w wordId="6" pos="VERB" lemma="書く" tag="動詞-一般" udType="csubj" udFrom="17" udTo="1/4/7/8/10/11/12/13/14" original="書か">kaka</w>
        <w wordId="7" pos="AUX" lemma="れる" tag="助動詞" udType="aux" udFrom="6" udTo="" original="れ">re</w>
        <w wordId="8" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="6" udTo="9" original="て">te</w>
        <w wordId="9" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="8" udTo="" original="い">i</w>
        <w wordId="10" pos="AUX" lemma="て" tag="助詞-接続助詞" udType="aux" udFrom="6" udTo="" original="て">te</w>
        <w wordId="11" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="6" udTo="" original="た">ta</w>
        <w wordId="12" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="6" udTo="" original="の">no</w>
        <w wordId="13" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="6" udTo="" original="は">ha</w>
        <w wordId="14" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="6" udTo="" original="、">,</w>
        <w wordId="15" pos="ADJ" lemma="意味深" tag="名詞-普通名詞-形状詞可能" udType="acl" udFrom="17" udTo="16" original="意味深">imishin</w>
        <w wordId="16" pos="AUX" lemma="だ" tag="助動詞" udType="cop" udFrom="15" udTo="" original="な">na</w>
        <w wordId="17" pos="NOUN" lemma="相関図" tag="名詞-普通名詞-一般" udType="obl" udFrom="53" udTo="6/15/18/19" original="相関図">soukanzu</w>
        <w wordId="18" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="17" udTo="" original="で">de</w>
        <w wordId="19" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="17" udTo="" original="、">,</w>
        <w wordId="20" pos="ADJ" lemma="ハンサム" tag="形状詞-一般" udType="acl" udFrom="23" udTo="21" original="ハンサム">hansamu</w>
        <w wordId="21" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="20" udTo="" original="な">na</w>
        <w wordId="22" pos="ADJ" lemma="若い" tag="形容詞-一般" udType="acl" udFrom="23" udTo="" original="若い">wakai</w>
        <w wordId="23" pos="NOUN" lemma="男" tag="名詞-普通名詞-一般" udType="obl" udFrom="35" udTo="20/22/24/25" original="男">otoko</w>
        <w wordId="24" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="23" udTo="" original="と">to</w>
        <w wordId="25" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="23" udTo="" original="、">,</w>
        <w wordId="26" pos="NOUN" lemma="冒頭" tag="名詞-普通名詞-一般" udType="obl" udFrom="28" udTo="27" original="冒頭">boutou</w>
        <w wordId="27" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="26" udTo="" original="で">de</w>
        <w wordId="28" pos="VERB" lemma="登場" tag="名詞-普通名詞-サ変可能" udType="acl" udFrom="31" udTo="26/29/30" original="登場">toujou</w>
        <w wordId="29" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="28" udTo="" original="し">shi</w>
        <w wordId="30" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="28" udTo="" original="た">ta</w>
        <w wordId="31" pos="NOUN" lemma="ビン" tag="名詞-普通名詞-一般" udType="obl" udFrom="33" udTo="28/32" original="ビン">bin</w>
        <w wordId="32" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="31" udTo="" original="に">ni</w>
        <w wordId="33" pos="VERB" lemma="入る" tag="動詞-一般" udType="advcl" udFrom="35" udTo="31/34" original="入っ">itsutsu</w>
        <w wordId="34" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="33" udTo="" original="た">ta</w>
        <w wordId="35" pos="ADV" lemma="ウミガメ" tag="名詞-普通名詞-一般" udType="advmod" udFrom="53" udTo="23/33/36/37/40/45/47" original="ウミガメ">umigame</w>
        <w wordId="36" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="35" udTo="" original="と">to</w>
        <w wordId="37" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="35" udTo="" original="、">,</w>
        <w wordId="38" pos="NOUN" lemma="宝箱" tag="名詞-普通名詞-一般" udType="nmod" udFrom="40" udTo="39" original="宝箱">takarabako</w>
        <w wordId="39" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="38" udTo="" original="の">no</w>
        <w wordId="40" pos="NOUN" lemma="よう" tag="形状詞-助動詞語幹" udType="dep" udFrom="35" udTo="38/41/42" original="よう">you</w>
        <w wordId="41" pos="AUX" lemma="だ" tag="助動詞" udType="cop" udFrom="40" udTo="" original="で">de</w>
        <w wordId="42" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="40" udTo="" original="、">,</w>
        <w wordId="43" pos="NOUN" lemma="男" tag="名詞-普通名詞-一般" udType="obl" udFrom="45" udTo="44" original="男">otoko</w>
        <w wordId="44" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="43" udTo="" original="から">kara</w>
        <w wordId="45" pos="ADJ" lemma="ウミガメ" tag="名詞-普通名詞-一般" udType="dep" udFrom="35" udTo="43/46" original="ウミガメ">umigame</w>
        <w wordId="46" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="45" udTo="" original="、">,</w>
        <w wordId="47" pos="ADJ" lemma="ウミガメ" tag="名詞-普通名詞-一般" udType="dep" udFrom="35" udTo="48" original="ウミガメ">umigame</w>
        <w wordId="48" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="47" udTo="" original="から">kara</w>
        <w wordId="49" pos="NOUN" lemma="宝箱" tag="名詞-普通名詞-一般" udType="obl" udFrom="53" udTo="50" original="宝箱">takarabako</w>
        <w wordId="50" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="49" udTo="" original="に">ni</w>
        <w wordId="51" pos="NOUN" lemma="矢印" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="53" udTo="52" original="矢印">yajirushi</w>
        <w wordId="52" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="51" udTo="" original="が">ga</w>
        <w wordId="53" pos="VERB" lemma="伸びる" tag="動詞-一般" udType="ROOT" udFrom="53" udTo="17/35/49/51/53/54/56/57" original="伸び">nobi</w>
        <w wordId="54" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="53" udTo="55" original="て">te</w>
        <w wordId="55" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="54" udTo="" original="い">i</w>
        <w wordId="56" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="53" udTo="" original="ます">masu</w>
        <w wordId="57" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="53" udTo="" original="。">.</w>
    </s>
    <s sentId="25" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="2" udTo="" original="その">sono</w>
        <w wordId="2" pos="NOUN" lemma="あと" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="7" udTo="1" original="あと">ato</w>
        <w wordId="3" pos="NOUN" lemma="画面" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="7" udTo="4" original="画面">gamen</w>
        <w wordId="4" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="3" udTo="" original="が">ga</w>
        <w wordId="5" pos="ADJ" lemma="真っ暗" tag="形状詞-一般" udType="advcl" udFrom="7" udTo="6" original="真っ暗">makkura</w>
        <w wordId="6" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="5" udTo="" original="に">ni</w>
        <w wordId="7" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="acl" udFrom="9" udTo="2/3/5/8" original="なっ">natsu</w>
        <w wordId="8" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="7" udTo="" original="た">ta</w>
        <w wordId="9" pos="NOUN" lemma="後" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="19" udTo="7/10" original="後">nochi</w>
        <w wordId="10" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="9" udTo="" original="、">,</w>
        <w wordId="11" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="obj" udFrom="15" udTo="12" original="カメ">kame</w>
        <w wordId="12" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="11" udTo="" original="を">wo</w>
        <w wordId="13" pos="NOUN" lemma="ビン" tag="名詞-普通名詞-一般" udType="obl" udFrom="15" udTo="14" original="ビン">bin</w>
        <w wordId="14" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="13" udTo="" original="から">kara</w>
        <w wordId="15" pos="VERB" lemma="開放" tag="名詞-普通名詞-サ変可能" udType="acl" udFrom="17" udTo="11/13/16" original="開放">kaihou</w>
        <w wordId="16" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="15" udTo="" original="する">suru</w>
        <w wordId="17" pos="NOUN" lemma="きっかけ" tag="名詞-普通名詞-一般" udType="obj" udFrom="19" udTo="15/18" original="きっかけ">kikkake</w>
        <w wordId="18" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="17" udTo="" original="を">wo</w>
        <w wordId="19" pos="VERB" lemma="作る" tag="動詞-一般" udType="acl" udFrom="21" udTo="9/17/20" original="作っ">tsukutsu</w>
        <w wordId="20" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="19" udTo="" original="た">ta</w>
        <w wordId="21" pos="NOUN" lemma="老人" tag="名詞-普通名詞-一般" udType="ccomp" udFrom="24" udTo="19/22/23" original="老人">roujin</w>
        <w wordId="22" pos="AUX" lemma="だ" tag="助動詞" udType="cop" udFrom="21" udTo="" original="だ">da</w>
        <w wordId="23" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="21" udTo="" original="と">to</w>
        <w wordId="24" pos="VERB" lemma="思う" tag="動詞-一般" udType="acl" udFrom="26" udTo="21/25" original="思わ">omowa</w>
        <w wordId="25" pos="AUX" lemma="れる" tag="助動詞" udType="aux" udFrom="24" udTo="" original="れる">reru</w>
        <w wordId="26" pos="NOUN" lemma="人物" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="34" udTo="24/27" original="人物">jinbutsu</w>
        <w wordId="27" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="26" udTo="" original="が">ga</w>
        <w wordId="28" pos="NOUN" lemma="南国" tag="名詞-普通名詞-一般" udType="nmod" udFrom="30" udTo="29" original="南国">nangoku</w>
        <w wordId="29" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="28" udTo="" original="の">no</w>
        <w wordId="30" pos="NOUN" lemma="ビーチ" tag="名詞-普通名詞-一般" udType="obl" udFrom="34" udTo="28/31" original="ビーチ">biichi</w>
        <w wordId="31" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="30" udTo="" original="で">de</w>
        <w wordId="32" pos="NOUN" lemma="目" tag="名詞-普通名詞-一般" udType="obj" udFrom="34" udTo="33" original="目">me</w>
        <w wordId="33" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="32" udTo="" original="を">wo</w>
        <w wordId="34" pos="VERB" lemma="覚ます" tag="動詞-一般" udType="ROOT" udFrom="34" udTo="26/30/32/34/35/36" original="覚まし">samashi</w>
        <w wordId="35" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="34" udTo="" original="ます">masu</w>
        <w wordId="36" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="34" udTo="" original="。">.</w>
    </s>
    <s sentId="26" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="頭" tag="名詞-普通名詞-一般" udType="obj" udFrom="3" udTo="2" original="頭">atama</w>
        <w wordId="2" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="を">wo</w>
        <w wordId="3" pos="VERB" lemma="かく" tag="動詞-一般" udType="advcl" udFrom="5" udTo="1/4" original="かき">kaki</w>
        <w wordId="4" pos="SCONJ" lemma="ながら" tag="助詞-接続助詞" udType="mark" udFrom="3" udTo="" original="ながら">nagara</w>
        <w wordId="5" pos="VERB" lemma="寝ぼける" tag="動詞-一般" udType="acl" udFrom="7" udTo="3/6" original="寝ぼけ">neboke</w>
        <w wordId="6" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="5" udTo="" original="た">ta</w>
        <w wordId="7" pos="NOUN" lemma="まま" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="14" udTo="5/8" original="まま">mama</w>
        <w wordId="8" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="7" udTo="" original="、">,</w>
        <w wordId="9" pos="NOUN" lemma="砂浜" tag="名詞-普通名詞-一般" udType="obj" udFrom="11" udTo="10" original="砂浜">sunahama</w>
        <w wordId="10" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="を">wo</w>
        <w wordId="11" pos="NOUN" lemma="あて" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="14" udTo="9/12" original="あて">ate</w>
        <w wordId="12" pos="ADP" lemma="も" tag="助詞-係助詞" udType="case" udFrom="11" udTo="" original="も">mo</w>
        <w wordId="13" pos="ADJ" lemma="ない" tag="形容詞-非自立可能" udType="advcl" udFrom="14" udTo="" original="なく">naku</w>
        <w wordId="14" pos="VERB" lemma="歩く" tag="動詞-一般" udType="advcl" udFrom="45" udTo="7/11/13/15/16/17/19/20" original="歩き">aruki</w>
        <w wordId="15" pos="VERB" lemma="始める" tag="動詞-非自立可能" udType="advcl" udFrom="14" udTo="" original="始め">hajime</w>
        <w wordId="16" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="14" udTo="" original="た">ta</w>
        <w wordId="17" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="14" udTo="18" original="の">no</w>
        <w wordId="18" pos="AUX" lemma="です" tag="助動詞" udType="fixed" udFrom="17" udTo="" original="です">desu</w>
        <w wordId="19" pos="SCONJ" lemma="が" tag="助詞-接続助詞" udType="mark" udFrom="14" udTo="" original="が">ga</w>
        <w wordId="20" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="14" udTo="" original="、">,</w>
        <w wordId="21" pos="NOUN" lemma="途中" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="24" udTo="22" original="途中">tochuu</w>
        <w wordId="22" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="21" udTo="" original="で">de</w>
        <w wordId="23" pos="ADV" lemma="先ほど" tag="名詞-普通名詞-副詞可能" udType="advmod" udFrom="24" udTo="" original="先ほど">sakihodo</w>
        <w wordId="24" pos="VERB" lemma="登場" tag="名詞-普通名詞-サ変可能" udType="advcl" udFrom="29" udTo="21/23/25/26/27/28" original="登場">toujou</w>
        <w wordId="25" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="24" udTo="" original="し">shi</w>
        <w wordId="26" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="24" udTo="" original="た">ta</w>
        <w wordId="27" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="24" udTo="" original="の">no</w>
        <w wordId="28" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="24" udTo="" original="と">to</w>
        <w wordId="29" pos="ADJ" lemma="同じ" tag="連体詞" udType="amod" udFrom="30" udTo="24" original="同じ">onaji</w>
        <w wordId="30" pos="NOUN" lemma="宝箱" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="34" udTo="29/31" original="宝箱">takarabako</w>
        <w wordId="31" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="30" udTo="" original="が">ga</w>
        <w wordId="32" pos="NOUN" lemma="砂浜" tag="名詞-普通名詞-一般" udType="obl" udFrom="34" udTo="33" original="砂浜">sunahama</w>
        <w wordId="33" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="32" udTo="" original="に">ni</w>
        <w wordId="34" pos="VERB" lemma="おく" tag="動詞-非自立可能" udType="acl" udFrom="38" udTo="30/32/35/36" original="おか">oka</w>
        <w wordId="35" pos="AUX" lemma="れる" tag="助動詞" udType="aux" udFrom="34" udTo="" original="れ">re</w>
        <w wordId="36" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="34" udTo="37" original="て">te</w>
        <w wordId="37" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="36" udTo="" original="いる">iru</w>
        <w wordId="38" pos="NOUN" lemma="こと" tag="名詞-普通名詞-一般" udType="obl" udFrom="45" udTo="34/39/40" original="こと">koto</w>
        <w wordId="39" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="38" udTo="" original="に">ni</w>
        <w wordId="40" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="38" udTo="" original="、">,</w>
        <w wordId="41" pos="NOUN" lemma="老人" tag="名詞-普通名詞-一般" udType="dislocated" udFrom="45" udTo="42" original="老人">roujin</w>
        <w wordId="42" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="41" udTo="" original="は">ha</w>
        <w wordId="43" pos="NOUN" lemma="気" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="45" udTo="44" original="気">ki</w>
        <w wordId="44" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="43" udTo="" original="が">ga</w>
        <w wordId="45" pos="VERB" lemma="付く" tag="動詞-非自立可能" udType="ROOT" udFrom="45" udTo="14/38/41/43/45/46/47/48" original="付き">tsuki</w>
        <w wordId="46" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="45" udTo="" original="まし">mashi</w>
        <w wordId="47" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="45" udTo="" original="た">ta</w>
        <w wordId="48" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="45" udTo="" original="。">.</w>
    </s>
    <s sentId="27" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="VERB" lemma="驚く" tag="動詞-一般" udType="advcl" udFrom="5" udTo="2" original="驚い">odoroi</w>
        <w wordId="2" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="1" udTo="" original="て">te</w>
        <w wordId="3" pos="NOUN" lemma="宝箱" tag="名詞-普通名詞-一般" udType="obj" udFrom="5" udTo="4" original="宝箱">takarabako</w>
        <w wordId="4" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="3" udTo="" original="を">wo</w>
        <w wordId="5" pos="VERB" lemma="さする" tag="動詞-一般" udType="advcl" udFrom="13" udTo="1/3/6/7" original="さする">sasuru</w>
        <w wordId="6" pos="SCONJ" lemma="と" tag="助詞-接続助詞" udType="mark" udFrom="5" udTo="" original="と">to</w>
        <w wordId="7" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="5" udTo="" original="、">,</w>
        <w wordId="8" pos="NOUN" lemma="箱" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="13" udTo="9" original="箱">hako</w>
        <w wordId="9" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="8" udTo="" original="は">ha</w>
        <w wordId="10" pos="ADJ" lemma="怪しい" tag="形容詞-一般" udType="advcl" udFrom="13" udTo="11/12" original="怪し">ayashi</w>
        <w wordId="11" pos="PART" lemma="げ" tag="接尾辞-形状詞的" udType="mark" udFrom="10" udTo="" original="げ">ge</w>
        <w wordId="12" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="10" udTo="" original="に">ni</w>
        <w wordId="13" pos="VERB" lemma="発光" tag="名詞-普通名詞-サ変可能" udType="advcl" udFrom="27" udTo="5/8/10/14/15" original="発光">hakkou</w>
        <w wordId="14" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="13" udTo="" original="し">shi</w>
        <w wordId="15" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="13" udTo="" original="、">,</w>
        <w wordId="16" pos="NOUN" lemma="崩れ落ちる" tag="動詞-一般" udType="obl" udFrom="23" udTo="17" original="崩れ落ち">kuzureochi</w>
        <w wordId="17" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="16" udTo="" original="、">,</w>
        <w wordId="18" pos="DET" lemma="その" tag="連体詞" udType="det" udFrom="19" udTo="" original="その">sono</w>
        <w wordId="19" pos="NOUN" lemma="中" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="23" udTo="18/20" original="中">naka</w>
        <w wordId="20" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="19" udTo="" original="から">kara</w>
        <w wordId="21" pos="PROPN" lemma="ひかり" tag="名詞-普通名詞-一般" udType="obl" udFrom="23" udTo="22" original="ひかり">hikari</w>
        <w wordId="22" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="21" udTo="" original="で">de</w>
        <w wordId="23" pos="VERB" lemma="できる" tag="動詞-非自立可能" udType="acl" udFrom="25" udTo="16/19/21/24" original="でき">deki</w>
        <w wordId="24" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="23" udTo="" original="た">ta</w>
        <w wordId="25" pos="ADV" lemma="ウミガメ" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="27" udTo="23/26" original="ウミガメ">umigame</w>
        <w wordId="26" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="25" udTo="" original="が">ga</w>
        <w wordId="27" pos="VERB" lemma="出現" tag="名詞-普通名詞-サ変可能" udType="ROOT" udFrom="27" udTo="13/25/27/28/29/30" original="出現">shutsugen</w>
        <w wordId="28" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="27" udTo="" original="し">shi</w>
        <w wordId="29" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="27" udTo="" original="ます">masu</w>
        <w wordId="30" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="27" udTo="" original="。">.</w>
    </s>
    <s sentId="28" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="老人" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="3" udTo="2" original="老人">roujin</w>
        <w wordId="2" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="が">ga</w>
        <w wordId="3" pos="VERB" lemma="驚く" tag="動詞-一般" udType="advcl" udFrom="9" udTo="1/4/6" original="驚い">odoroi</w>
        <w wordId="4" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="3" udTo="5" original="て">te</w>
        <w wordId="5" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="4" udTo="" original="いる">iru</w>
        <w wordId="6" pos="SCONJ" lemma="と" tag="助詞-格助詞" udType="mark" udFrom="3" udTo="" original="と">to</w>
        <w wordId="7" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="9" udTo="8" original="カメ">kame</w>
        <w wordId="8" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="7" udTo="" original="は">ha</w>
        <w wordId="9" pos="VERB" lemma="歩く" tag="動詞-一般" udType="advcl" udFrom="16" udTo="3/7/10/11" original="歩き">aruki</w>
        <w wordId="10" pos="VERB" lemma="出す" tag="動詞-非自立可能" udType="advcl" udFrom="9" udTo="" original="出し">dashi</w>
        <w wordId="11" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="9" udTo="" original="、">,</w>
        <w wordId="12" pos="CCONJ" lemma="そして" tag="接続詞" udType="cc" udFrom="16" udTo="13" original="そして">soshite</w>
        <w wordId="13" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="12" udTo="" original="、">,</w>
        <w wordId="14" pos="NOUN" lemma="空" tag="名詞-普通名詞-一般" udType="obj" udFrom="16" udTo="15" original="空">sora</w>
        <w wordId="15" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="14" udTo="" original="を">wo</w>
        <w wordId="16" pos="VERB" lemma="泳ぐ" tag="動詞-一般" udType="advcl" udFrom="18" udTo="9/12/14/17" original="泳い">oyoi</w>
        <w wordId="17" pos="SCONJ" lemma="で" tag="助詞-接続助詞" udType="mark" udFrom="16" udTo="" original="で">de</w>
        <w wordId="18" pos="VERB" lemma="いく" tag="動詞-非自立可能" udType="ROOT" udFrom="18" udTo="16/18/19/20" original="いき">iki</w>
        <w wordId="19" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="18" udTo="" original="ます">masu</w>
        <w wordId="20" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="18" udTo="" original="。">.</w>
    </s>
    <s sentId="29" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="VERB" lemma="する" tag="動詞-非自立可能" udType="cc" udFrom="33" udTo="2/3" original="する">suru</w>
        <w wordId="2" pos="SCONJ" lemma="と" tag="助詞-接続助詞" udType="fixed" udFrom="1" udTo="" original="と">to</w>
        <w wordId="3" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="1" udTo="" original="、">,</w>
        <w wordId="4" pos="NOUN" lemma="空" tag="名詞-普通名詞-一般" udType="obl" udFrom="10" udTo="5" original="空">sora</w>
        <w wordId="5" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="4" udTo="" original="に">ni</w>
        <w wordId="6" pos="NOUN" lemma="海底" tag="名詞-普通名詞-一般" udType="obl" udFrom="10" udTo="7" original="海底">kaitei</w>
        <w wordId="7" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="6" udTo="" original="で">de</w>
        <w wordId="8" pos="NOUN" lemma="紙" tag="名詞-普通名詞-一般" udType="obj" udFrom="10" udTo="9" original="紙">kami</w>
        <w wordId="9" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="8" udTo="" original="を">wo</w>
        <w wordId="10" pos="VERB" lemma="持つ" tag="動詞-一般" udType="acl" udFrom="17" udTo="4/6/8/11/13" original="持っ">motsu</w>
        <w wordId="11" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="10" udTo="12" original="て">te</w>
        <w wordId="12" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="11" udTo="" original="い">i</w>
        <w wordId="13" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="10" udTo="" original="た">ta</w>
        <w wordId="14" pos="ADJ" lemma="美しい" tag="形容詞-一般" udType="acl" udFrom="15" udTo="" original="美しい">utsukushii</w>
        <w wordId="15" pos="NOUN" lemma="女" tag="名詞-普通名詞-一般" udType="nmod" udFrom="17" udTo="14/16" original="女">onna</w>
        <w wordId="16" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="15" udTo="" original="の">no</w>
        <w wordId="17" pos="NOUN" lemma="人" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="25" udTo="10/15/18" original="人">nin</w>
        <w wordId="18" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="17" udTo="" original="が">ga</w>
        <w wordId="19" pos="NOUN" lemma="宙" tag="名詞-普通名詞-一般" udType="obl" udFrom="21" udTo="20" original="宙">chuu</w>
        <w wordId="20" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="19" udTo="" original="に">ni</w>
        <w wordId="21" pos="VERB" lemma="浮く" tag="動詞-一般" udType="advcl" udFrom="25" udTo="19/22" original="浮い">ui</w>
        <w wordId="22" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="21" udTo="" original="て">te</w>
        <w wordId="23" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="obj" udFrom="25" udTo="24" original="カメ">kame</w>
        <w wordId="24" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="23" udTo="" original="を">wo</w>
        <w wordId="25" pos="VERB" lemma="待つ" tag="動詞-一般" udType="advcl" udFrom="33" udTo="17/21/23/26/28" original="待っ">matsu</w>
        <w wordId="26" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="25" udTo="27" original="て">te</w>
        <w wordId="27" pos="VERB" lemma="おる" tag="動詞-非自立可能" udType="fixed" udFrom="26" udTo="" original="おり">ori</w>
        <w wordId="28" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="25" udTo="" original="、">,</w>
        <w wordId="29" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="nmod" udFrom="31" udTo="30" original="カメ">kame</w>
        <w wordId="30" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="29" udTo="" original="と">to</w>
        <w wordId="31" pos="NOUN" lemma="抱擁" tag="名詞-普通名詞-サ変可能" udType="obj" udFrom="33" udTo="29/32" original="抱擁">houyou</w>
        <w wordId="32" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="31" udTo="" original="を">wo</w>
        <w wordId="33" pos="VERB" lemma="交わす" tag="動詞-非自立可能" udType="ROOT" udFrom="33" udTo="1/25/31/33/34/35" original="交わし">majiwashi</w>
        <w wordId="34" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="33" udTo="" original="ます">masu</w>
        <w wordId="35" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="33" udTo="" original="。">.</w>
    </s>
    <s sentId="30" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="CCONJ" lemma="する" tag="動詞-非自立可能" udType="cc" udFrom="29" udTo="2" original="する">suru</w>
        <w wordId="2" pos="SCONJ" lemma="と" tag="助詞-格助詞" udType="fixed" udFrom="1" udTo="" original="と">to</w>
        <w wordId="3" pos="NOUN" lemma="カメ" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="29" udTo="4" original="カメ">kame</w>
        <w wordId="4" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="3" udTo="" original="は">ha</w>
        <w wordId="5" pos="NOUN" lemma="次第" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="23" udTo="6/7" original="次第">shidai</w>
        <w wordId="6" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="5" udTo="" original="に">ni</w>
        <w wordId="7" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="5" udTo="" original="、">,</w>
        <w wordId="8" pos="ADV" lemma="先ほど" tag="名詞-普通名詞-副詞可能" udType="advmod" udFrom="11" udTo="" original="先ほど">sakihodo</w>
        <w wordId="9" pos="NOUN" lemma="紙" tag="名詞-普通名詞-一般" udType="obl" udFrom="11" udTo="10" original="紙">kami</w>
        <w wordId="10" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="に">ni</w>
        <w wordId="11" pos="VERB" lemma="書く" tag="動詞-一般" udType="advcl" udFrom="18" udTo="8/9/12/13/15/16/17" original="書か">kaka</w>
        <w wordId="12" pos="AUX" lemma="れる" tag="助動詞" udType="aux" udFrom="11" udTo="" original="れ">re</w>
        <w wordId="13" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="11" udTo="14" original="て">te</w>
        <w wordId="14" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="13" udTo="" original="い">i</w>
        <w wordId="15" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="11" udTo="" original="た">ta</w>
        <w wordId="16" pos="SCONJ" lemma="の" tag="助詞-準体助詞" udType="mark" udFrom="11" udTo="" original="の">no</w>
        <w wordId="17" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="11" udTo="" original="と">to</w>
        <w wordId="18" pos="ADJ" lemma="同じ" tag="連体詞" udType="amod" udFrom="19" udTo="11" original="同じ">onaji</w>
        <w wordId="19" pos="NOUN" lemma="男" tag="名詞-普通名詞-一般" udType="nmod" udFrom="21" udTo="18/20" original="男">otoko</w>
        <w wordId="20" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="19" udTo="" original="の">no</w>
        <w wordId="21" pos="NOUN" lemma="人" tag="名詞-普通名詞-一般" udType="obl" udFrom="23" udTo="19/22" original="人">nin</w>
        <w wordId="22" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="21" udTo="" original="に">ni</w>
        <w wordId="23" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="advcl" udFrom="29" udTo="5/21/24" original="なり">nari</w>
        <w wordId="24" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="23" udTo="" original="、">,</w>
        <w wordId="25" pos="NOUN" lemma="二人" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="29" udTo="26" original="二人">futari</w>
        <w wordId="26" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="25" udTo="" original="は">ha</w>
        <w wordId="27" pos="NOUN" lemma="空中" tag="名詞-普通名詞-一般" udType="obl" udFrom="29" udTo="28" original="空中">kuuchuu</w>
        <w wordId="28" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="27" udTo="" original="で">de</w>
        <w wordId="29" pos="VERB" lemma="抱き合う" tag="動詞-一般" udType="ROOT" udFrom="29" udTo="1/3/23/25/27/29/30/31" original="抱き合い">dakiai</w>
        <w wordId="30" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="29" udTo="" original="ます">masu</w>
        <w wordId="31" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="29" udTo="" original="。">.</w>
    </s>
    <s sentId="31" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="ほど" tag="名詞-普通名詞-副詞可能" udType="compound" udFrom="2" udTo="" original="ほど">hodo</w>
        <w wordId="2" pos="ADJ" lemma="ない" tag="形容詞-非自立可能" udType="advcl" udFrom="8" udTo="1/3" original="なく">naku</w>
        <w wordId="3" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="2" udTo="" original="、">,</w>
        <w wordId="4" pos="NOUN" lemma="二人" tag="名詞-普通名詞-副詞可能" udType="nmod" udFrom="6" udTo="5" original="二人">futari</w>
        <w wordId="5" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="4" udTo="" original="の">no</w>
        <w wordId="6" pos="NOUN" lemma="体" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="8" udTo="4/7" original="体">karada</w>
        <w wordId="7" pos="ADP" lemma="も" tag="助詞-係助詞" udType="case" udFrom="6" udTo="" original="も">mo</w>
        <w wordId="8" pos="VERB" lemma="光る" tag="動詞-一般" udType="advcl" udFrom="19" udTo="2/6/9/10" original="光り">hikari</w>
        <w wordId="9" pos="VERB" lemma="はじめる" tag="動詞-非自立可能" udType="advcl" udFrom="8" udTo="" original="はじめ">hajime</w>
        <w wordId="10" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="8" udTo="" original="、">,</w>
        <w wordId="11" pos="NOUN" lemma="二人" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="17" udTo="12" original="二人">futari</w>
        <w wordId="12" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="11" udTo="" original="は">ha</w>
        <w wordId="13" pos="NOUN" lemma="光" tag="名詞-普通名詞-一般" udType="nmod" udFrom="15" udTo="14" original="光">hikari</w>
        <w wordId="14" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="13" udTo="" original="の">no</w>
        <w wordId="15" pos="NOUN" lemma="粒" tag="名詞-普通名詞-一般" udType="obl" udFrom="17" udTo="13/16" original="粒">tsubu</w>
        <w wordId="16" pos="ADP" lemma="と" tag="助詞-格助詞" udType="case" udFrom="15" udTo="" original="と">to</w>
        <w wordId="17" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="advcl" udFrom="19" udTo="11/15/18" original="なっ">natsu</w>
        <w wordId="18" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="17" udTo="" original="て">te</w>
        <w wordId="19" pos="VERB" lemma="消える" tag="動詞-一般" udType="ROOT" udFrom="19" udTo="8/17/19/20/22/23/24" original="消え">kie</w>
        <w wordId="20" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="19" udTo="21" original="て">te</w>
        <w wordId="21" pos="VERB" lemma="しまう" tag="動詞-非自立可能" udType="fixed" udFrom="20" udTo="" original="しまい">shimai</w>
        <w wordId="22" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="19" udTo="" original="まし">mashi</w>
        <w wordId="23" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="19" udTo="" original="た">ta</w>
        <w wordId="24" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="19" udTo="" original="。">.</w>
    </s>
    <s sentId="32" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="AUX" lemma="です" tag="助動詞" udType="dep" udFrom="29" udTo="2/3" original="です">desu</w>
        <w wordId="2" pos="SCONJ" lemma="が" tag="助詞-接続助詞" udType="fixed" udFrom="1" udTo="" original="が">ga</w>
        <w wordId="3" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="1" udTo="" original="、">,</w>
        <w wordId="4" pos="NOUN" lemma="光" tag="名詞-普通名詞-一般" udType="nmod" udFrom="6" udTo="5" original="光">hikari</w>
        <w wordId="5" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="4" udTo="" original="の">no</w>
        <w wordId="6" pos="NOUN" lemma="粒" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="10" udTo="4/7" original="粒">tsubu</w>
        <w wordId="7" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="6" udTo="" original="は">ha</w>
        <w wordId="8" pos="NOUN" lemma="空中" tag="名詞-普通名詞-一般" udType="obj" udFrom="10" udTo="9" original="空中">kuuchuu</w>
        <w wordId="9" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="8" udTo="" original="を">wo</w>
        <w wordId="10" pos="VERB" lemma="ただよう" tag="動詞-一般" udType="advcl" udFrom="29" udTo="6/8/11" original="ただよい">tadayoi</w>
        <w wordId="11" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="10" udTo="" original="、">,</w>
        <w wordId="12" pos="ADJ" lemma="最終的" tag="名詞-普通名詞-形状詞可能" udType="nsubj" udFrom="19" udTo="13/14" original="最終的">saishuuteki</w>
        <w wordId="13" pos="AUX" lemma="だ" tag="助動詞" udType="cop" udFrom="12" udTo="" original="に">ni</w>
        <w wordId="14" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="12" udTo="" original="は">ha</w>
        <w wordId="15" pos="NOUN" lemma="夕方" tag="名詞-普通名詞-副詞可能" udType="nmod" udFrom="17" udTo="16" original="夕方">yuugata</w>
        <w wordId="16" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="15" udTo="" original="の">no</w>
        <w wordId="17" pos="NOUN" lemma="空" tag="名詞-普通名詞-一般" udType="obj" udFrom="19" udTo="15/18" original="空">sora</w>
        <w wordId="18" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="17" udTo="" original="を">wo</w>
        <w wordId="19" pos="VERB" lemma="上昇" tag="名詞-普通名詞-サ変可能" udType="advcl" udFrom="29" udTo="12/17/20/21" original="上昇">joushou</w>
        <w wordId="20" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="19" udTo="" original="し">shi</w>
        <w wordId="21" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="19" udTo="" original="、">,</w>
        <w wordId="22" pos="ADJ" lemma="暗い" tag="形容詞-一般" udType="acl" udFrom="23" udTo="" original="暗い">kurai</w>
        <w wordId="23" pos="NOUN" lemma="夜空" tag="名詞-普通名詞-一般" udType="obl" udFrom="29" udTo="22/24" original="夜空">yozora</w>
        <w wordId="24" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="23" udTo="" original="に">ni</w>
        <w wordId="25" pos="NOUN" lemma="光" tag="名詞-普通名詞-一般" udType="nmod" udFrom="27" udTo="26" original="光">hikari</w>
        <w wordId="26" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="25" udTo="" original="の">no</w>
        <w wordId="27" pos="NOUN" lemma="柱" tag="名詞-普通名詞-一般" udType="obj" udFrom="29" udTo="25/28" original="柱">hashira</w>
        <w wordId="28" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="27" udTo="" original="を">wo</w>
        <w wordId="29" pos="VERB" lemma="形成" tag="名詞-普通名詞-サ変可能" udType="ROOT" udFrom="29" udTo="1/10/19/23/27/29/30/31/32" original="形成">keisei</w>
        <w wordId="30" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="29" udTo="" original="し">shi</w>
        <w wordId="31" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="29" udTo="" original="ます">masu</w>
        <w wordId="32" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="29" udTo="" original="。">.</w>
    </s>
    <s sentId="33" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="先ほど" tag="名詞-普通名詞-副詞可能" udType="nmod" udFrom="3" udTo="2" original="先ほど">sakihodo</w>
        <w wordId="2" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="の">no</w>
        <w wordId="3" pos="NOUN" lemma="老人" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="13" udTo="1/4/5" original="老人">roujin</w>
        <w wordId="4" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="3" udTo="" original="は">ha</w>
        <w wordId="5" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="3" udTo="" original="、">,</w>
        <w wordId="6" pos="NOUN" lemma="砂浜" tag="名詞-普通名詞-一般" udType="obl" udFrom="13" udTo="7" original="砂浜">sunahama</w>
        <w wordId="7" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="6" udTo="" original="で">de</w>
        <w wordId="8" pos="DET" lemma="この" tag="連体詞" udType="det" udFrom="9" udTo="" original="この">kono</w>
        <w wordId="9" pos="NOUN" lemma="二人" tag="名詞-普通名詞-副詞可能" udType="nmod" udFrom="11" udTo="8/10" original="二人">futari</w>
        <w wordId="10" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="9" udTo="" original="の">no</w>
        <w wordId="11" pos="NOUN" lemma="再会" tag="名詞-普通名詞-サ変可能" udType="obj" udFrom="13" udTo="9/12" original="再会">saikai</w>
        <w wordId="12" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="11" udTo="" original="を">wo</w>
        <w wordId="13" pos="VERB" lemma="祝福" tag="名詞-普通名詞-サ変可能" udType="advcl" udFrom="20" udTo="3/6/11/14/15" original="祝福">shukufuku</w>
        <w wordId="14" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="13" udTo="" original="し">shi</w>
        <w wordId="15" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="13" udTo="" original="、">,</w>
        <w wordId="16" pos="NOUN" lemma="天" tag="名詞-普通名詞-一般" udType="obl" udFrom="20" udTo="17" original="天">ten</w>
        <w wordId="17" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="16" udTo="" original="に">ni</w>
        <w wordId="18" pos="NOUN" lemma="手" tag="名詞-普通名詞-助数詞可能" udType="obj" udFrom="20" udTo="19" original="手">te</w>
        <w wordId="19" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="18" udTo="" original="を">wo</w>
        <w wordId="20" pos="VERB" lemma="振る" tag="動詞-一般" udType="advcl" udFrom="39" udTo="13/16/18/21/22/24/25/26/27" original="振り">furi</w>
        <w wordId="21" pos="VERB" lemma="続ける" tag="動詞-非自立可能" udType="advcl" udFrom="20" udTo="" original="続け">tsuzuke</w>
        <w wordId="22" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="20" udTo="23" original="て">te</w>
        <w wordId="23" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="22" udTo="" original="い">i</w>
        <w wordId="24" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="20" udTo="" original="まし">mashi</w>
        <w wordId="25" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="20" udTo="" original="た">ta</w>
        <w wordId="26" pos="SCONJ" lemma="が" tag="助詞-接続助詞" udType="mark" udFrom="20" udTo="" original="が">ga</w>
        <w wordId="27" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="20" udTo="" original="、">,</w>
        <w wordId="28" pos="NOUN" lemma="光" tag="名詞-普通名詞-一般" udType="obj" udFrom="30" udTo="29" original="光">hikari</w>
        <w wordId="29" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="28" udTo="" original="を">wo</w>
        <w wordId="30" pos="VERB" lemma="浴びる" tag="動詞-一般" udType="acl" udFrom="33" udTo="28/31" original="浴び">abi</w>
        <w wordId="31" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="30" udTo="32" original="て">te</w>
        <w wordId="32" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="31" udTo="" original="いる">iru</w>
        <w wordId="33" pos="NOUN" lemma="うち" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="39" udTo="30/34/35" original="うち">uchi</w>
        <w wordId="34" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="33" udTo="" original="に">ni</w>
        <w wordId="35" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="33" udTo="" original="、">,</w>
        <w wordId="36" pos="NOUN" lemma="体" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="39" udTo="37" original="体">karada</w>
        <w wordId="37" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="36" udTo="" original="が">ga</w>
        <w wordId="38" pos="ADV" lemma="どんどん" tag="副詞" udType="advmod" udFrom="39" udTo="" original="どんどん">dondon</w>
        <w wordId="39" pos="VERB" lemma="若返り" tag="名詞-普通名詞-サ変可能" udType="advcl" udFrom="47" udTo="20/33/36/38/40" original="若返り">wakagaeri</w>
        <w wordId="40" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="39" udTo="" original="、">,</w>
        <w wordId="41" pos="NUM" lemma="二十" tag="名詞-数詞" udType="nummod" udFrom="42" udTo="" original="二十">nijuu</w>
        <w wordId="42" pos="NOUN" lemma="代" tag="名詞-普通名詞-助数詞可能" udType="nmod" udFrom="45" udTo="41/43/44" original="代">dai</w>
        <w wordId="43" pos="ADP" lemma="くらい" tag="助詞-副助詞" udType="case" udFrom="42" udTo="" original="くらい">kurai</w>
        <w wordId="44" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="42" udTo="" original="の">no</w>
        <w wordId="45" pos="NOUN" lemma="若者" tag="名詞-普通名詞-一般" udType="obl" udFrom="47" udTo="42/46" original="若者">wakamono</w>
        <w wordId="46" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="45" udTo="" original="に">ni</w>
        <w wordId="47" pos="VERB" lemma="なる" tag="動詞-非自立可能" udType="ROOT" udFrom="47" udTo="39/45/47/48/49/50" original="なり">nari</w>
        <w wordId="48" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="47" udTo="" original="まし">mashi</w>
        <w wordId="49" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="47" udTo="" original="た">ta</w>
        <w wordId="50" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="47" udTo="" original="。">.</w>
    </s>
    <s sentId="34" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="自分" tag="名詞-普通名詞-一般" udType="nmod" udFrom="3" udTo="2" original="自分">jibun</w>
        <w wordId="2" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="の">no</w>
        <w wordId="3" pos="NOUN" lemma="変化" tag="名詞-普通名詞-サ変可能" udType="obl" udFrom="7" udTo="1/4" original="変化">henka</w>
        <w wordId="4" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="3" udTo="" original="に">ni</w>
        <w wordId="5" pos="NOUN" lemma="気" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="7" udTo="6" original="気">ki</w>
        <w wordId="6" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="5" udTo="" original="が">ga</w>
        <w wordId="7" pos="VERB" lemma="付く" tag="動詞-非自立可能" udType="advcl" udFrom="10" udTo="3/5/8/9" original="付い">tsui</w>
        <w wordId="8" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="7" udTo="" original="て">te</w>
        <w wordId="9" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="7" udTo="" original="、">,</w>
        <w wordId="10" pos="VERB" lemma="喜ぶ" tag="動詞-一般" udType="acl" udFrom="12" udTo="7/11" original="喜ん">yorokon</w>
        <w wordId="11" pos="AUX" lemma="だ" tag="助動詞" udType="aux" udFrom="10" udTo="" original="だ">da</w>
        <w wordId="12" pos="NOUN" lemma="若者" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="21" udTo="10/13/14" original="若者">wakamono</w>
        <w wordId="13" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="12" udTo="" original="は">ha</w>
        <w wordId="14" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="12" udTo="" original="、">,</w>
        <w wordId="15" pos="NOUN" lemma="笑顔" tag="名詞-普通名詞-一般" udType="obl" udFrom="21" udTo="16" original="笑顔">egao</w>
        <w wordId="16" pos="ADP" lemma="で" tag="助詞-格助詞" udType="case" udFrom="15" udTo="" original="で">de</w>
        <w wordId="17" pos="NOUN" lemma="二人" tag="名詞-普通名詞-副詞可能" udType="obl" udFrom="21" udTo="18" original="二人">futari</w>
        <w wordId="18" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="17" udTo="" original="に">ni</w>
        <w wordId="19" pos="NOUN" lemma="手" tag="名詞-普通名詞-助数詞可能" udType="obj" udFrom="21" udTo="20" original="手">te</w>
        <w wordId="20" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="19" udTo="" original="を">wo</w>
        <w wordId="21" pos="VERB" lemma="振る" tag="動詞-一般" udType="ROOT" udFrom="21" udTo="12/15/17/19/21/22/23/24" original="振り">furi</w>
        <w wordId="22" pos="VERB" lemma="続ける" tag="動詞-非自立可能" udType="advcl" udFrom="21" udTo="" original="続け">tsuzuke</w>
        <w wordId="23" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="21" udTo="" original="ます">masu</w>
        <w wordId="24" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="21" udTo="" original="。">.</w>
    </s>
    <s sentId="35" Task="1" textID="1" personID="2" personAge="18" language="Japanese" personFirstLang="日" personSecondLang="英">
        <w wordId="1" pos="NOUN" lemma="若者" tag="名詞-普通名詞-一般" udType="nmod" udFrom="3" udTo="2" original="若者">wakamono</w>
        <w wordId="2" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="1" udTo="" original="の">no</w>
        <w wordId="3" pos="NOUN" lemma="後ろ" tag="名詞-普通名詞-一般" udType="nmod" udFrom="5" udTo="1/4" original="後ろ">ushiro</w>
        <w wordId="4" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="3" udTo="" original="の">no</w>
        <w wordId="5" pos="NOUN" lemma="夜" tag="名詞-普通名詞-副詞可能" udType="nmod" udFrom="7" udTo="3/6" original="夜">yoru</w>
        <w wordId="6" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="5" udTo="" original="の">no</w>
        <w wordId="7" pos="NOUN" lemma="海" tag="名詞-普通名詞-一般" udType="obl" udFrom="14" udTo="5/8/9" original="海">umi</w>
        <w wordId="8" pos="ADP" lemma="に" tag="助詞-格助詞" udType="case" udFrom="7" udTo="" original="に">ni</w>
        <w wordId="9" pos="ADP" lemma="は" tag="助詞-係助詞" udType="case" udFrom="7" udTo="" original="は">ha</w>
        <w wordId="10" pos="NOUN" lemma="満天" tag="名詞-普通名詞-一般" udType="nmod" udFrom="12" udTo="11" original="満天">manten</w>
        <w wordId="11" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="10" udTo="" original="の">no</w>
        <w wordId="12" pos="NOUN" lemma="星" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="14" udTo="10/13" original="星">hoshi</w>
        <w wordId="13" pos="ADP" lemma="が" tag="助詞-格助詞" udType="case" udFrom="12" udTo="" original="が">ga</w>
        <w wordId="14" pos="VERB" lemma="輝く" tag="動詞-一般" udType="advcl" udFrom="24" udTo="7/12/15" original="輝き">kagayaki</w>
        <w wordId="15" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="14" udTo="" original="、">,</w>
        <w wordId="16" pos="PROPN" lemma="人魚" tag="名詞-普通名詞-一般" udType="nsubj" udFrom="24" udTo="17" original="人魚">ningyo</w>
        <w wordId="17" pos="ADP" lemma="も" tag="助詞-係助詞" udType="case" udFrom="16" udTo="" original="も">mo</w>
        <w wordId="18" pos="ADV" lemma="また" tag="副詞" udType="cc" udFrom="24" udTo="19" original="また">mata</w>
        <w wordId="19" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="18" udTo="" original="、">,</w>
        <w wordId="20" pos="NOUN" lemma="海面" tag="名詞-普通名詞-一般" udType="obl" udFrom="24" udTo="21" original="海面">kaimen</w>
        <w wordId="21" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="20" udTo="" original="から">kara</w>
        <w wordId="22" pos="NOUN" lemma="姿" tag="名詞-普通名詞-一般" udType="obj" udFrom="24" udTo="23" original="姿">sugata</w>
        <w wordId="23" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="22" udTo="" original="を">wo</w>
        <w wordId="24" pos="VERB" lemma="現す" tag="動詞-一般" udType="advcl" udFrom="32" udTo="14/16/18/20/22/25" original="現し">arawashi</w>
        <w wordId="25" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="24" udTo="" original="、">,</w>
        <w wordId="26" pos="NOUN" lemma="槍" tag="名詞-普通名詞-一般" udType="obl" udFrom="32" udTo="27" original="槍">yari</w>
        <w wordId="27" pos="ADP" lemma="から" tag="助詞-格助詞" udType="case" udFrom="26" udTo="" original="から">kara</w>
        <w wordId="28" pos="NOUN" lemma="黄金色" tag="名詞-普通名詞-一般" udType="nmod" udFrom="30" udTo="29" original="黄金色">koganeiro</w>
        <w wordId="29" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="28" udTo="" original="の">no</w>
        <w wordId="30" pos="NOUN" lemma="ハート" tag="名詞-普通名詞-一般" udType="obj" udFrom="32" udTo="28/31" original="ハート">haato</w>
        <w wordId="31" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="30" udTo="" original="を">wo</w>
        <w wordId="32" pos="VERB" lemma="発射" tag="名詞-普通名詞-サ変可能" udType="advcl" udFrom="40" udTo="24/26/30/33/34/35" original="発射">hassha</w>
        <w wordId="33" pos="AUX" lemma="する" tag="動詞-非自立可能" udType="aux" udFrom="32" udTo="" original="し">shi</w>
        <w wordId="34" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="32" udTo="" original="て">te</w>
        <w wordId="35" pos="PUNCT" lemma="、" tag="補助記号-読点" udType="punct" udFrom="32" udTo="" original="、">,</w>
        <w wordId="36" pos="NOUN" lemma="二人" tag="名詞-普通名詞-副詞可能" udType="nmod" udFrom="38" udTo="37" original="二人">futari</w>
        <w wordId="37" pos="ADP" lemma="の" tag="助詞-格助詞" udType="case" udFrom="36" udTo="" original="の">no</w>
        <w wordId="38" pos="NOUN" lemma="再会" tag="名詞-普通名詞-サ変可能" udType="obj" udFrom="40" udTo="36/39" original="再会">saikai</w>
        <w wordId="39" pos="ADP" lemma="を" tag="助詞-格助詞" udType="case" udFrom="38" udTo="" original="を">wo</w>
        <w wordId="40" pos="VERB" lemma="祝う" tag="動詞-一般" udType="ROOT" udFrom="40" udTo="32/38/40/41/43/44/45" original="祝っ">iwatsu</w>
        <w wordId="41" pos="SCONJ" lemma="て" tag="助詞-接続助詞" udType="mark" udFrom="40" udTo="42" original="て">te</w>
        <w wordId="42" pos="VERB" lemma="いる" tag="動詞-非自立可能" udType="fixed" udFrom="41" udTo="" original="い">i</w>
        <w wordId="43" pos="AUX" lemma="ます" tag="助動詞" udType="aux" udFrom="40" udTo="" original="まし">mashi</w>
        <w wordId="44" pos="AUX" lemma="た" tag="助動詞" udType="aux" udFrom="40" udTo="" original="た">ta</w>
        <w wordId="45" pos="PUNCT" lemma="。" tag="補助記号-句点" udType="punct" udFrom="40" udTo="" original="。">.</w>
    </s>
  </document>

`;
/* ---------- 状態とユーティリティ ---------- */
let currentData = defaultData;
let uploadFileName = "keioSFC";
let isFileUploaded = false;
let hits = [];
let parsedSentences = [];
let currentStartIndex = 0;
let sortCol = null;
let sortAsc = true;
let hasSearched = false;
let searchAbort = false;
let selectedHitNo = null;
let isUDViewActive = false; // ★ V7.3 追加

// ★ 追加: 動的UIのための状態
let detectedAttributes = new Set();
let isCustomized = false;
// ★ 変更: デフォルトのフォームHTMLを保持する変数を宣言 (初期化は DOMContentLoaded で行う)
let defaultKeywordForm = "";
let defaultLMatrixForm = "";
let defaultRMatrixForm = "";
let defaultKeyForm_ud = "";   // ★ 追加
let defaultHMatrixForm = ""; // ★ 追加
let defaultDMatrixForm = ""; // ★ 追加
// ★ 変更: デフォルトの品詞関連の属性（日本語UI用）
// ★ 変更: 隣接性検索用と係り受け検索用でデフォルト属性を分離
const defaultWAttributes_Adj = ['pos','pos1','pos2','pos3','conjClass','conjForm','root', 'udType'];
// ★ V7.7: udType を係り受け検索のデフォルト属性に追加
const defaultWAttributes_Dep = ['pos','pos1','pos2','pos3','conjClass','conjForm','root', 'udType'];
// ★ 変更: デフォルトUIで使う属性リスト (isCustomized = false の時)
let defaultWAttributes = defaultWAttributes_Adj; 
// ★ V7.4: posColors を動的に生成するため let に変更し、空にする
let posColors = {};
let attributeExamples = {}; // 属性ごとのサンプルテキストを保持
const staticHeaders = [
  {label:"通し番号", key:"no"},
  {label:"タスク番号", key:"Task"},
  {label:"作文番号", key:"textID"},
  {label:"前文脈", key:"prev"},
  {label:"キー", key:"key"},
  {label:"後文脈", key:"next"}
];
const defaultDynamicHeaders = [
  {label:"個人ID", key:"personID"},
  {label:"年齢", key:"personAge"},
  {label:"使用言語", key:"language"},
  {label:"第一言語", key:"personFirstLang"},
  {label:"第二言語", key:"personSecondLang"},
  {label:"品詞", key:"pos"},
  {label:"品詞細分類1", key:"pos1"},
  {label:"品詞細分類2", key:"pos2"},
  {label:"品詞細分類3", key:"pos3"},
  {label:"活用型", key:"conjClass"},
  {label:"活用形", key:"conjForm"},
  {label:"原形", key:"root"},
  {label:"読み", key:"reading"}
];
let currentDynamicHeaders = defaultDynamicHeaders;
function getCurrentHeaders() {
  return staticHeaders.concat(currentDynamicHeaders);
}
const $ = id => document.getElementById(id);
function trimStr(s){ return (s===null||s===undefined) ? "" : String(s).trim(); }
function getWAttr(w,a){ return trimStr(w.getAttribute(a)); }
/* ---------- パース / 条件チェック ---------- */
function parseSentencesFromCurrentData(){
  try {
    const parser = new DOMParser();
    const trimmedData = currentData.trim();
    if (trimmedData === "") {
        return {error:null, sentences:[]};
    }
    let xml;
    xml = parser.parseFromString(trimmedData,"application/xml");
    let parserError = xml.getElementsByTagName("parsererror");
    if(parserError.length > 0) {
        if (trimmedData.startsWith('<?xml')) {
            const errorDetails = parserError[0].textContent || "";
            const cleanedDetails = errorDetails.replace(/error on line.*:/i, '').trim();
            return {error:`XMLパースエラー（整形式XMLですが構造が不正です）。詳細: ${cleanedDetails}`, sentences:[]};
        }
        const wrappedXml = parser.parseFromString(`<root>${trimmedData}</root>`,"application/xml");
        const wrappedError = wrappedXml.getElementsByTagName("parsererror");
        if (wrappedError.length === 0) {
            xml = wrappedXml;
        } else {
            const errorDetails = wrappedError[0].textContent || parserError[0].textContent || "";
            const cleanedDetails = errorDetails.replace(/error on line.*:/i, '').trim();
            return {error:`データの XML パースに失敗しました。データ形式（タグの構造など）を確認してください。詳細: ${cleanedDetails}`, sentences:[]};
        }
    }
    const sentences = Array.from(xml.getElementsByTagName("s"));
    return {error:null, sentences};
  } catch(e){
    return {error:`不明なエラー（パース）: ${e.message}`, sentences:[]};
  }
}

// ★ 変更: enablePosSubfields はデフォルトUI (isCustomized=false) の時だけ機能させる
function enablePosSubfields(prefix){
  if (isCustomized) return; // カスタムUI時は無効
  const posEl = $(prefix + 'pos');
  if(!posEl) return;
  const val = trimStr(posEl.value);
  ['pos1','pos2','pos3'].forEach(n => {
    const el = $(prefix + n);
    if(!el) return;
    el.disabled = (val === "");
    if(val === "") el.value = "";
  });
}
/* ---------- 初期イベント登録 ---------- */
document.addEventListener('DOMContentLoaded', ()=>{
 // ★ 変更: DOM構築後のHTML保存処理
  try {
    // ★ 変更: V8.0 - id="key_tbody" から取得し、デフォルトフォームを生成
    const kwTable = $('key_table');
    if (kwTable && kwTable.tBodies && kwTable.tBodies.length > 0) {
        // デフォルトフォーム(隣接性)を生成
        let keywordHTML = `<tr><td class="label">原文文字列 (表層形)</td><td><input id="surface" type="text" placeholder="例：カエッ" /></td></tr>`;
        
        // ★ 変更: V8.0 - defaultWAttributes_Adj を使う
        defaultWAttributes_Adj.forEach(attr => {
            let placeholder = "";
            if (attr === 'pos') placeholder = "例：名詞";
            if (attr === 'pos1') placeholder = "例：固有名詞（※品詞によって利用可否が変わります）";
            if (attr === 'pos2') placeholder = "例：人名（※品詞によって利用可否が変わります）";
            if (attr === 'pos3') placeholder = "例：名（※品詞によって利用可否が変わります）";
            if (attr === 'root') placeholder = "例：帰る";
            if (attr === 'udType') placeholder = "例：nsubj"; // ★ この行を追加
            const disabled = (attr === 'pos1' || attr === 'pos2' || attr === 'pos3') ? 'disabled' : '';
            keywordHTML += `<tr><td class="label">${attr}</td><td><input id="${attr}" type="text" placeholder="${placeholder}" ${disabled} /></td></tr>`;
        });
        $('key_tbody').innerHTML = keywordHTML;
        defaultKeywordForm = keywordHTML; // これがデフォルト定義

    } else {
         console.warn("key_table or key_tbody not found. Default form not saved.");
         defaultKeywordForm = ""; // フォールバック
    }
    
    
    defaultLMatrixForm = "";
    defaultRMatrixForm = "";
    defaultKeyForm_ud = "";   
    defaultHMatrixForm = ""; 
    defaultDMatrixForm = ""; 

  } catch (e) {
    console.error("デフォルトフォームの保存に失敗:", e);
  }
  
  // ★ 削除: タブ関連のリスナーはすべて不要

  /* Upload button */
  // ★ 変更: V8.0 - showUploadBtn_ud は存在しないため、リスナー1つでよい
  $('showUploadBtn').addEventListener('click', ()=> {
    $('uploadFieldset').style.display = 'block';
    $('showUploadBtn').style.display = 'none';
  });
  $('fileInput').addEventListener('change', handleFileUpload);
  
  $('clearDataBtn').addEventListener('click', ()=> {
    currentData = defaultData;
    uploadFileName = "keioSFC";
    isFileUploaded = false;
    isCustomized = false;
    detectedAttributes.clear();
    rebuildForms(null); // ★ 変更: rebuildForms(null) はキーノードのみをリセット
    
    const initialParsed = parseSentencesFromCurrentData();
    if (!initialParsed.error) {
        scanAndGenerateColors(initialParsed.sentences);
    }
    
    currentDynamicHeaders = defaultDynamicHeaders;
    $('fileInput').value = "";
    $('fileError').style.display='none';
    $('errorMsg').style.display='none';
    $('customizeBtn').style.display = 'none';
    hits = []; hasSearched=false; selectedHitNo=null; currentStartIndex=0;
    $('uploadFieldset').style.display='none';
    $('showUploadBtn').style.display='inline-block';
    
    // ★ 追加: V8.0 - clearAll を呼んで動的ボックスも消す
    clearAll(); 
    // renderTableは clearAll 内部で呼ばれる
  });

  $('customizeBtn').addEventListener('click', scanAttributesAndRebuildUI);

  // ★ 削除: L/R/H/D の Show/Hide/ClearAll ボタンのリスナーはすべて不要 (V8.0 で動的生成)

  /* 文書情報表示 */
  // ★ 変更: V8.0 - _ud 版のリスナーは不要
  $('showDocBtn').addEventListener('click', ()=> {
    $('docFieldset').style.display = 'block';
    $('showDocBtn').style.display = 'none';
  });
  $('clearDocBtn').addEventListener('click', ()=> {
    ['Task','textID','personID','personAge','language','personFirstLang','personSecondLang'].forEach(id => { if($(id)) $(id).value = ""; });
  });
  // ★ 変更: removeDocBtn のロジックを onclick 属性から移動
  $('removeDocBtn').addEventListener('click', ()=> {
      ['Task','textID','personID','personAge','language','personFirstLang','personSecondLang'].forEach(id => { if($(id)) $(id).value = ""; });
      $('docFieldset').style.display = 'none';
      $('showDocBtn').style.display = 'inline-block';
  });

  /* search / clear / download / page size / encoding */
  $('searchBtn').addEventListener('click', onSearchClick);
  $('clearBtn').addEventListener('click', clearAll);
  $('downloadBtn').addEventListener('click', ()=> downloadCSV($('encoding').value));
  $('pageSize').addEventListener('change', ()=> { clampStartIndex(); renderTable(); });
  
  /* Enter triggers search */
  document.addEventListener('keydown', e => {
      if(e.key === 'Enter' && e.target.tagName === 'INPUT' && e.target.type === 'text'){
          e.preventDefault();
          onSearchClick();
      }
  });

  /* tooltip follow */
  document.addEventListener('mousemove', e => {
    const tt = $('tooltip');
    if(tt.style.display === 'block'){
      const gap = 12; let x = e.clientX + gap, y = e.clientY + gap;
      const bw = tt.offsetWidth, bh = tt.offsetHeight;
      if(x + bw > window.innerWidth) x = e.clientX - bw - gap;
      if(y + bh > window.innerHeight) y = e.clientY - bh - gap;
      tt.style.left = x + 'px'; tt.style.top = y + 'px';
    }
  });
  
  /* pos enabling */
  document.body.addEventListener('input', e => {
      // ★ 変更: V8.0 - id="pos" のみ
      if (e.target.matches('#pos')) {
          enablePosSubfields(''); // prefixなし
      }
  });

  /* showArticle button handler */
  $('showArticleBtn').addEventListener('click', ()=> {
    if(selectedHitNo === null) return;
    const range = $('articleRange').value;
    showArticleDetailByHitNo(selectedHitNo, range);
  });
  /* articleRange change -> auto update */
  $('articleRange').addEventListener('change', ()=> {
    if($('showArticleBtn').style.display !== 'none' && selectedHitNo !== null){
      $('showArticleBtn').click();
    }
  });
  /* click meta: center selected hit */
  $('sentenceMeta').addEventListener('click', ()=> {
    if(selectedHitNo === null) return;
    const sorted = getSortedRows();
    const posInSorted = sorted.findIndex(r => r.no === selectedHitNo);
    if(posInSorted === -1) return;
    const pageSize = parseInt($('pageSize').value,10);
    let desiredStart = posInSorted - Math.floor(pageSize/2);
    const maxStart = Math.max(0, sorted.length - pageSize);
    if(desiredStart < 0) desiredStart = 0;
    if(desiredStart > maxStart) desiredStart = maxStart;
    currentStartIndex = desiredStart;
    renderTable();
  });
  
  enableAllPosSubfields(); 

  const initialParsed = parseSentencesFromCurrentData();
  if (!initialParsed.error) {
      scanAndGenerateColors(initialParsed.sentences);
  }
  
  renderTable();

  $('udToggleBtn').addEventListener('click', toggleUDView);
});
/* ---------- ★ V8.0 (新UI) 動的検索ボックス生成 ---------- */













function showSearchArea(type) {
        const gridCell = document.querySelector(`.grid-cell.${type === 'H' ? 'up' : (type === 'D' ? 'down' : (type === 'L' ? 'left' : 'right'))}`);
        if (!gridCell) return;
        
        const triggerBtn = $(`trigger${type}`);
        const wrapperId = `${type}-area-wrapper`;
        let newLabel = "";
        let isDep = false; // H/D (係り受け) かどうか

        // ★ 1. ラッパーを表示 (インラインフレックス + 縦積み + 中央揃え)
        const wrapper = $(wrapperId);
        wrapper.style.display = 'inline-flex';
        wrapper.style.flexDirection = 'column';
        wrapper.style.alignItems = 'center';
		
        // ★ 2. タイプに応じてヘッダー生成とボタン設定
        if (type === 'L' || type === 'R') {
            // --- L/R: 垂直テーブル (列追加) 方式 ---
            isDep = false;
            
            // ★ L/R: ラッパーに「単一のテーブル」を生成
            let attributes = isCustomized ? Array.from(detectedAttributes) : defaultWAttributes_Adj;
            let surfacePlaceholder = isCustomized ? (attributeExamples['surface'] ? '例：' + attributeExamples['surface'] : "") : "例：カエッ";
            
            let tableHTML = `<table class="lr-table" id="${type}-table"><tbody>`;
            // 1. 列ヘッダー行 (L1, R1)
            tableHTML += `<tr><th class="label"></th><td class="col-header">${type}1</td></tr>`;
            // 2. 原文文字列行
            tableHTML += `<tr><th class="label">原文文字列</th><td><input id="${type}1_surface" type="text" placeholder="${surfacePlaceholder}" /></td></tr>`;
            // 3. 属性行
            attributes.forEach(attr => {
                if (attr === 'surface') return;
                let placeholder = "";
                if (isCustomized) {
                    placeholder = attributeExamples[attr] ? '例：' + attributeExamples[attr] : "";
                } else {
                    if (attr === 'pos') placeholder = "例：名詞";
                    if (attr === 'root') placeholder = "例：帰る";
                    if (attr === 'udType') placeholder = "例：nsubj"; // ★ この行を追加
                }
                tableHTML += `<tr><th class="label">${attr}</th><td><input id="${type}1_${attr}" type="text" placeholder="${placeholder}" /></td></tr>`;
            });
            // 4. 削除ボタン行
            tableHTML += `<tr><th class="label"></th><td class="col-controls"><button type="button" class="remove-col-btn" data-level="1">削除</button></td></tr>`;
            tableHTML += '</tbody></table>';
            
            $(wrapperId).innerHTML = tableHTML;
            
            // 5. 削除ボタンにイベントリスナーを追加 (★ removeColumn が必要)
            $(wrapperId).querySelector('.remove-col-btn').addEventListener('click', (e) => removeColumn(type, e.target.dataset.level));

            newLabel = (type === 'L') ? '◀ Ｌ列追加' : '▶ Ｒ列追加';
            
        } else if (type === 'H') {
            // --- H (親): ★ 新しい複数チェーンロジック ---
            isDep = true;
            // ★ 最初の H チェーン (Chain 1) を作成
            createDependencyChain('H');
            
            // ★ 「さらに別の親関係を指定する」ボタンを表示
            const addChainBtn = $('H-add-chain-btn');
            addChainBtn.style.display = 'inline-block';
            
            // ★ ボタンをラッパー(緑枠)の中に移動させる
            const wrapper = $(wrapperId);
            wrapper.appendChild(addChainBtn);
            
            // ★ 「▲ 親ノード...」ボタンを非表示にする
            triggerBtn.style.display = 'none';

            if (!$('key_udType')) { 
                const keyTbody = $('key_tbody');
                if (!isCustomized && !defaultWAttributes_Dep.includes('udType')) {
                    defaultWAttributes_Dep.push('udType');
                }
                const newRow = keyTbody.insertRow();
                newRow.id = "key_udType_row"; 
                newRow.innerHTML = `<td class="label">関係 (udType)</td><td><input id="key_udType" type="text" placeholder="例: nsubj" /></td>`;
                if (defaultKeywordForm.indexOf('key_udType') === -1) {
                    defaultKeywordForm += newRow.outerHTML;
                }
            }
            
            newLabel = '▲ 親ノードを追加'; // H-table-1 の「行追加ボタン」のラベル

        } else if (type === 'D') {
            // --- D (子): ★ 新しい複数チェーンロジック ---
            isDep = true;
            // ★ 最初の D チェーン (Chain 1) を作成
            createDependencyChain('D'); 
            
            // ★ 「さらに別の親関係を指定する」ボタンを表示
            const addChainBtn = $('D-add-chain-btn');
            addChainBtn.style.display = 'inline-block';
            
            // ★ ボタンをラッパー(緑枠)の中に移動させる
            const wrapper = $(wrapperId);
            wrapper.appendChild(addChainBtn);
            
            // ★ 「▼ 子ノード...」ボタンを非表示にする
            triggerBtn.style.display = 'none';

            if (!$('key_udType')) { /* (キーノードへの udType 追加ロジック ... 変更なし) */ }
            newLabel = '▼ 子ノードを追加'; // D-table-1 の「行追加ボタン」のラベル
        }

        // ★ 3. トリガーボタンのテキストとクリック動作を「追加」モードに変更
        triggerBtn.textContent = newLabel;
        triggerBtn.onclick = () => {
            if (type === 'L' || type === 'R') {
                addColumn(type);
            } else if (type === 'H') {
                // H: Chain 1 のテーブルに行を追加
                const tbody = $('H-table-1').tBodies[0];
                const existingBoxes = tbody.querySelectorAll('tr').length;
                addSearchBox('H', existingBoxes + 1, 1); // ★ chainIndex 1
            } else if (type === 'D') {
                // D: Chain 1 のテーブルに行を追加
                const tbody = $('D-table-1').tBodies[0];
                const existingBoxes = tbody.querySelectorAll('tr').length;
                addSearchBox('D', existingBoxes + 1, 1); // chainIndex 1
            }
        };
    }

    // L2, L3... や H2, H3... を動的に追加する
    function addSearchBox(type, level, chainIndex) { // ★ chainIndex を追加
        // ★ H/D 共に chainIndex 1, 2, 3... を使用
        const tbody = $(`${type}-table-${chainIndex}`).tBodies[0]; // ★ ID修正
        if (!tbody) return;

        // ★ ID体系を変更 (ChainIndex を含める)
        const boxId = `${type}-chain${chainIndex}-box${level}`;
        if ($(boxId)) return;

        const boxHTML_tds = createDynamicFieldsetHTML(type, level, chainIndex); // ★ chainIndex を渡す
        
        const boxRow = document.createElement('tr'); 
        boxRow.id = boxId; // ★ ID体系を変更
        boxRow.innerHTML = boxHTML_tds;
        
        if (type === 'H') {
            tbody.prepend(boxRow); 
        } else {
            tbody.appendChild(boxRow); 
        }
        
        boxRow.querySelector('.remove-btn').addEventListener('click', () => {
            const tbody = boxRow.parentNode;
            boxRow.remove(); 

            const remainingRowsInTbody = tbody.querySelectorAll('tr').length;
            if (remainingRowsInTbody.length === 0) {
                 if (type === 'H') {
                    clearDynamicBoxes(type);
                 }
                 // D の場合: 最後の1行を消しても表(Chain)は残す (Chain削除ボタンで消す)
            } else {
                renumberHDRows(tbody, type, chainIndex); // ★ chainIndex を渡す
            }
        });
    }
  
 // ★ 変更: H/D のチェーン (表) を動的に作成する
    function createDependencyChain(type) {
        const wrapper = $(`${type}-area-wrapper`);
        const existingChains = wrapper.querySelectorAll(`div[id^="${type}-chain-"]`).length; // ★ H/D
        const chainIndex = existingChains + 1; // 1-based index

       const chainContainer = document.createElement('div');
        chainContainer.id = `${type}-chain-${chainIndex}`;
        chainContainer.style = "padding: 0; margin-top: 8px; width: 100%;"; // ★ width: 100% に変更
		
        // 1. チェーンのヘッダー (と削除ボタン)
        const header = document.createElement('div');
        header.style = "display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;";
        const legend = document.createElement('legend');
        const legendText = (type === 'H' ? '親関係' : '子関係'); // ★ H/D
        legend.textContent = `${legendText} (Chain ${chainIndex})`;
        legend.style = "color:#1f6f3a; font-weight:700;";
        header.appendChild(legend);
        
       if (chainIndex > 1) {
            const hr = document.createElement('hr');
            hr.style = "border: none; border-top: 1px dashed #9fcf9f; margin: 10px 0;";
            chainContainer.prepend(hr); 
        }

        // ★★★ 修正 (Hの時だけ「行追加ボタン」を「上」に配置) ★★★
        if (type === 'H') {
            const addRowBtn_H = document.createElement('button');
            addRowBtn_H.type = 'button';
            addRowBtn_H.textContent = '▲ 親ノードを追加';
            addRowBtn_H.className = 'trigger-btn'; 
            //addRowBtn_H.style.backgroundColor = '#d4a373'; // ★ 茶色に変更
            addRowBtn_H.style.marginBottom = '8px'; // ★ ヘッダーとのマージン
            addRowBtn_H.onclick = () => {
                const tbody = $(`${type}-table-${chainIndex}`).tBodies[0];
                const existingBoxes = tbody.querySelectorAll('tr').length;
                addSearchBox(type, existingBoxes + 1, chainIndex);
            };
            chainContainer.appendChild(addRowBtn_H); // ★ ヘッダーの上（Chainコンテナ直下）に追加
        }

        // ★ すべてのチェーン (Chain 1 含む) に削除ボタンを追加
        const removeChainBtn = document.createElement('button');
        removeChainBtn.type = 'button';
        removeChainBtn.textContent = `この${legendText}(Chain)を削除`; // ★ H/D
        removeChainBtn.className = 'remove-btn remove-col-btn';
        removeChainBtn.onclick = () => {
            chainContainer.remove();
            
            const wrapper = $(`${type}-area-wrapper`);
            const remainingChains = wrapper.querySelectorAll(`div[id^="${type}-chain-"]`).length; // ★ H/D
            
            if (remainingChains === 0) {
                clearDynamicBoxes(type);
            } else {
                renumberChains(type); // ★ H/D
            }
        };
        header.appendChild(removeChainBtn); // ★ 削除ボタンはヘッダー右側
        chainContainer.appendChild(header);
        // ★★★ 修正ここまで ★★★

        // 2. 属性リストの取得
        let attributes = isCustomized ? Array.from(detectedAttributes) : defaultWAttributes_Dep;
        
        // 3. チェーンのテーブル
        let tableHTML = `<table class="lr-table" id="${type}-table-${chainIndex}" style="width: auto; margin-left: auto; margin-right: auto;">`;
        tableHTML += '<thead><tr><th class="label" style="width: 40px; text-align: right; padding-right: 8px;"></th><th class="label" style="min-width: 120px; text-align: left;">原文文字列</th>';
        attributes.forEach(attr => { if (attr !== 'surface') tableHTML += `<th class="label" style="min-width: 120px; text-align: left;">${attr}</th>`; });
        tableHTML += '<th class="label" style="width: auto;"></th></tr></thead><tbody></tbody></table>';
        
        const tableWrapper = document.createElement('div');
        tableWrapper.innerHTML = tableHTML;
        chainContainer.appendChild(tableWrapper);
        
        // 4. 行追加ボタン (★ Dの時だけテーブルの下に配置)
        if (type === 'D') {
            const addRowBtn_D = document.createElement('button');
            addRowBtn_D.type = 'button';
            addRowBtn_D.textContent = '▼ 子ノードを追加';
            addRowBtn_D.className = 'trigger-btn';
            addRowBtn_D.style.marginTop = '8px';
            addRowBtn_D.onclick = () => {
                const tbody = $(`${type}-table-${chainIndex}`).tBodies[0];
                const existingBoxes = tbody.querySelectorAll('tr').length;
                addSearchBox(type, existingBoxes + 1, chainIndex);
            };
            chainContainer.appendChild(addRowBtn_D);
        }
        
        // 5. ラッパーにチェーンを追加
        wrapper.appendChild(chainContainer);
        
        // 6. 「さらに別...」ボタンをラッパーの末尾に移動させる
        const addChainBtn = $(`${type}-add-chain-btn`); // ★ H/D
        if (addChainBtn) {
            wrapper.appendChild(addChainBtn);
        }
        
        // 7. 最初の行 (H1/D1) を追加
        addSearchBox(type, 1, chainIndex);
    }

    // ★ 変更: H/D チェーン削除時にIDを振り直すヘルパー
    function renumberChains(type) {
        const wrapper = $(`${type}-area-wrapper`); // ★ H/D
        const chains = wrapper.querySelectorAll(`div[id^="${type}-chain-"]`); // ★ H/D
        
        chains.forEach((chain, index) => {
            const newChainIndex = index + 1; // 1-based
            const oldChainIndexMatch = chain.id.match(/-(\d+)$/); // ★ ID取得を一般化
            if (!oldChainIndexMatch) return;
            const oldChainIndex = parseInt(oldChainIndexMatch[1], 10);
            
            if (newChainIndex === oldChainIndex) return;

            // 1. ChainコンテナのID
            chain.id = `${type}-chain-${newChainIndex}`;
            
            // 2. Legend
            const legendText = (type === 'H' ? '親関係' : '子関係'); // ★ H/D
            chain.querySelector('legend').textContent = `${legendText} (Chain ${newChainIndex})`;
            
            // 3. テーブルID
            const table = chain.querySelector(`table[id^="${type}-table-"]`); // ★ H/D
            if (table) table.id = `${type}-table-${newChainIndex}`;
            
            // 4. 行追加ボタンの onclick
            const addRowBtn = chain.querySelector('.trigger-btn');
            if (addRowBtn) {
                addRowBtn.onclick = () => {
                    const tbody = $(`${type}-table-${newChainIndex}`).tBodies[0];
                    const existingBoxes = tbody.querySelectorAll('tr').length;
                    addSearchBox(type, existingBoxes + 1, newChainIndex);
                };
            }
            
            // 5. テーブル内の全行のIDを振り直す
            const tbody = table.tBodies[0];
            renumberHDRows(tbody, type, newChainIndex, oldChainIndex); // ★ type を渡す
        });
    }
  
 // ★ 変更: H/D 行削除時にIDとラベルを振り直すヘルパー関数
    function renumberHDRows(tbody, type, chainIndex, oldChainIndex = -1) { // ★ chainIndex と oldChainIndex を追加
        const rows = Array.from(tbody.querySelectorAll('tr'));
        const attributes = isCustomized ? Array.from(detectedAttributes) : defaultWAttributes_Dep;
        
        // oldChainIndex が渡された場合 (renumberChains からの呼び出し)、
        // 内部の input ID もすべて振り直す必要がある
        const forceIdUpdate = (oldChainIndex !== -1 && oldChainIndex !== chainIndex);
        
        if (type === 'D') {
            // D: DOMの順序 (1, 2, 3...) 通りに振り直す
            rows.forEach((row, index) => {
                const newLevel = index + 1;
                const oldLevelMatch = row.id.match(/-box(\d+)$/);
                if (!oldLevelMatch) return;
                const oldLevel = parseInt(oldLevelMatch[1], 10);
                
                if (newLevel === oldLevel && !forceIdUpdate) return; // 変更不要

                // ★ ID体系を変更
                row.id = `${type}-chain${chainIndex}-box${newLevel}`;
                row.querySelector('th.label').textContent = `${type}${newLevel}`;
                
                // ★★★ 修正 (typo: level -> newLevel) ★★★
                const surfaceInput = row.querySelector(`input`); 
                if (surfaceInput) surfaceInput.id = `${type}${chainIndex}-${newLevel}-surface`;

                attributes.forEach(attr => {
                    if (attr === 'surface') return;
                    const input = row.querySelector(`input[id$="-${attr}"]`);
                    if (input) input.id = `${type}${chainIndex}-${newLevel}-${attr}`; // ★★★ 修正 (typo: level -> newLevel)
                });
            });
        } else if (type === 'H') {
            // H: DOMの逆順 (N, N-1, ... 1)
            let newLevel = rows.length; 
            rows.forEach((row) => { 
                const oldLevelMatch = row.id.match(/-box(\d+)$/);
                if (!oldLevelMatch) return;
                const oldLevel = parseInt(oldLevelMatch[1], 10);
                
                if (newLevel === oldLevel && !forceIdUpdate) { newLevel--; return; }
                
                // ★★★ 修正 (chain0 -> chainIndex) ★★★
                row.id = `${type}-chain${chainIndex}-box${newLevel}`;
                row.querySelector('th.label').textContent = `${type}${newLevel}`;
                
                const surfaceInput = row.querySelector(`input`); 
                if (surfaceInput) surfaceInput.id = `${type}${chainIndex}-${newLevel}-surface`; // ★★★ 修正 (H0 -> type + chainIndex)

                attributes.forEach(attr => {
                    if (attr === 'surface') return;
                    const input = row.querySelector(`input[id$="-${attr}"]`);
                    if (input) input.id = `${type}${chainIndex}-${newLevel}-${attr}`; // ★★★ 修正 (H0 -> type + chainIndex)
                });
                newLevel--;
            });
        }
    }
	
// isCustomized フラグに応じて、H/D の「行」のHTMLを生成する (H/D 専用)
    function createDynamicFieldsetHTML(type, level, chainIndex) { // ★ chainIndex を追加
        let attributes, surfacePlaceholder;
        
        if (isCustomized) {
            attributes = Array.from(detectedAttributes);
            surfacePlaceholder = attributeExamples['surface'] ? '例：' + attributeExamples['surface'] : "";
        } else {
            attributes = defaultWAttributes_Dep;
            surfacePlaceholder = ""; 
        }

        // ★ ID体系を変更 (e.g., D1-1-surface)
        let html = '';
        html += `<th class="label" style="text-align: right; padding-right: 8px;">${type}${level}</th>`; 
        html += `<td><input id="${type}${chainIndex}-${level}-surface" type="text" placeholder="${surfacePlaceholder}" /></td>`; // 原文
        
        html += attributes.filter(attr => attr !== 'surface').map(attr => {
            let placeholder = "";
            if (isCustomized) { /* ... (中略) ... */ } 
            else {
                if (attr === 'pos') placeholder = "例：名詞";
                if (attr === 'root') placeholder = "例：帰る";
                if (attr === 'udType') placeholder = "例：nsubj";
            }
            // ★ ID体系を変更
            return `<td><input id="${type}${chainIndex}-${level}-${attr}" type="text" placeholder="${placeholder}" /></td>`
        }).join('');
        
        html += `<td class="col-controls"><button type="button" class="remove-btn remove-col-btn">削除</button></td>`;
        return html;
    }



/* ---------- クリア ---------- */
function clearAll(){
  // 1. 文書情報クリア
  const docIds = ['Task','textID','personID','personAge','language','personFirstLang','personSecondLang'];
  docIds.forEach(id => { if($(id)) $(id).value = ""; });
  // (文書情報フィールドセットは閉じない)

  // 2. L/R/H/D 動的ボックスをクリア
  clearDynamicBoxes(); // ★ V8.0 新ヘルパー

  // 3. キーノード フォーム クリア
  // ★ 変更: V8.0 - rebuildForms(null) がキーノードをリセットする
  rebuildForms(null); 

  // 4. デフォルトUIの場合のみ、pos連動を再有効化
  if (!isCustomized) {
      enableAllPosSubfields();
  }
  
  // ★ 削除: V8.0 - activeSearchMode のリセットは不要

  // 5. 検索結果・状態クリア
  hits=[]; currentStartIndex=0; sortCol=null; sortAsc=true; hasSearched=false; searchAbort=false; selectedHitNo=null;
  $('tableContainer').innerHTML=""; $('hitCount').style.display='none'; $('hitCount').textContent=''; $('pagerTop').innerHTML=''; $('pagerBottom').innerHTML='';
  
  $('errorMsg').style.display='none'; $('errorMsg').textContent='';
  $('fileError').style.display='none'; 
  $('progressWrap').style.display='none'; $('progressText').style.display='none'; $('sentenceDetail').style.display='none'; $('sentenceArea').innerHTML=''; $('sentenceMeta').style.display='none'; $('articleBox').style.display='none';
  $('tooltip').style.display='none';
  
  isUDViewActive = false;
  if ($('udToggleBtn')) {
    $('udToggleBtn').textContent = 'UD表示 OFF';
    $('udToggleBtn').classList.remove('active');
  }
  if ($('udCanvasContainer')) {
    $('udCanvasContainer').style.display = 'none';
  }
  if ($('sentenceArea')) {
    $('sentenceArea').style.display = 'block';
  }
  
  // 6. ヘッダーのクリア
  if (!isCustomized) {
      currentDynamicHeaders = defaultDynamicHeaders;
  }
  renderTable();
}

// ★ 新設: L/R テーブルに「列」を追加する関数
    function addColumn(type) {
        const table = $(type + '-table');
        if (!table) return;
        const tbody = table.tBodies[0];
        const rows = tbody.rows;
        if (rows.length === 0) return;
        
        // 既存の列数 (th が1, td が 1...N) から新しいレベルを計算
        const newLevel = rows[0].cells.length; // th(0), L1(1). New level is 2.
        
        let attributes = isCustomized ? Array.from(detectedAttributes) : defaultWAttributes_Adj;
        let surfacePlaceholder = isCustomized ? (attributeExamples['surface'] ? '例：' + attributeExamples['surface'] : "") : "例：カエッ";

        // 1. 列ヘッダーセル (L2, R2...) を追加
        const headerCell = rows[0].insertCell(-1);
        headerCell.className = 'col-header';
        headerCell.textContent = `${type}${newLevel}`;

        // 2. 原文文字列セルを追加
        const surfaceCell = rows[1].insertCell(-1);
        surfaceCell.innerHTML = `<input id="${type}${newLevel}_surface" type="text" placeholder="${surfacePlaceholder}" />`;

        // 3. 属性セルを追加
        let attrIndex = 0;
        attributes.forEach(attr => {
            if (attr === 'surface') return;
            // rows[2] が 1番目の属性行
            const row = rows[2 + attrIndex];
            if (row) {
                let placeholder = "";
                if (isCustomized) {
                    placeholder = attributeExamples[attr] ? '例：' + attributeExamples[attr] : "";
                } else {
                    if (attr === 'pos') placeholder = "例：名詞";
                    if (attr === 'root') placeholder = "例：帰る";
                    if (attr === 'udType') placeholder = "例：nsubj"; // ★ この行を追加
                }
                const cell = row.insertCell(-1);
                cell.innerHTML = `<input id="${type}${newLevel}_${attr}" type="text" placeholder="${placeholder}" />`;
            }
            attrIndex++;
        });

        // 4. 削除ボタンセルを追加
        const controlRow = rows[rows.length - 1];
        const controlCell = controlRow.insertCell(-1);
        controlCell.className = 'col-controls';
        controlCell.innerHTML = `<button type="button" class="remove-col-btn" data-level="${newLevel}">削除</button>`;
        
        // 5. 新しい削除ボタンにイベントリスナーを追加
        controlCell.querySelector('.remove-col-btn').addEventListener('click', (e) => removeColumn(type, e.target.dataset.level));
    }

    // ★ 新設: L/R テーブルから「列」を削除する関数
    function removeColumn(type, level) {
        level = parseInt(level, 10); // data-level は 1-based
        const table = $(type + '-table');
        if (!table) return;
        const tbody = table.tBodies[0];
        const rows = tbody.rows;
        const numCols = rows[0].cells.length - 1; // -1 for <th>

        if (level === 1 && numCols === 1) {
            // ★ 最後の1列 (L1 or R1) を削除する場合
            clearDynamicBoxes(type); // clearDynamicBoxes がリセット処理を行う
        } else {
            // ★ 途中の列を削除する場合
            // cell index は level と一致する (cell 0 = th, cell 1 = L1)
            for (let i = 0; i < rows.length; i++) {
                if (rows[i].cells[level]) {
                    rows[i].deleteCell(level);
                }
            }
            
            // ★ 削除後、残った列のインデックスを振り直す
            // (例: L1, L2, L3 で L2 を削除 -> L3 を L2 に)
            for (let c = level; c < rows[0].cells.length; c++) { // c は cell index (1-based)
                // ヘッダー行 (L3 -> L2)
                rows[0].cells[c].textContent = `${type}${c}`;
                // 入力欄のID (L3_surface -> L2_surface)
                // 1行目 (原文)
                rows[1].cells[c].querySelector('input').id = `${type}${c}_surface`;
                // 属性行
                let attrIndex = 0;
                let attributes = isCustomized ? Array.from(detectedAttributes) : defaultWAttributes_Adj;
                attributes.forEach(attr => {
                    if (attr === 'surface') return;
                    rows[2 + attrIndex].cells[c].querySelector('input').id = `${type}${c}_${attr}`;
                    attrIndex++;
                });
                // 削除ボタン行
                const btn = rows[rows.length - 1].cells[c].querySelector('.remove-col-btn');
                if (btn) btn.dataset.level = c;
            }
        }
    }
	
    
/* ---------- ★ V7.2 追加: UI動的構築 ---------- */
function scanAttributesAndRebuildUI() {
    isCustomized = true;
    const parsed = parseSentencesFromCurrentData();
    if (parsed.error) {
        $('fileError').textContent = `カスタマイズ失敗: ${parsed.error}`;
        $('fileError').style.display = 'block';
        isCustomized = false;
        return;
    }
    if (parsed.sentences.length === 0) {
        $('fileError').textContent = "カスタマイズ失敗: 有効な <s> タグが見つかりません。";
        $('fileError').style.display = 'block';
        isCustomized = false;
        return;
    }

    // 属性をスキャン
    detectedAttributes.clear();
    const sentences = parsed.sentences;
    for (const s of sentences) {
        const words = s.getElementsByTagName('w');
        for (const w of words) {
            for (const attr of w.attributes) {
                detectedAttributes.add(attr.name);
            }
        }
    }

    const sortedAttributes = Array.from(detectedAttributes).sort();
    
    // フォームを再構築
    rebuildForms(sortedAttributes);

    // 検索結果テーブルのヘッダーも更新（結果はクリア）
    hits = [];
    hasSearched = false;
    currentStartIndex = 0;
    selectedHitNo = null;
    currentDynamicHeaders = sortedAttributes.map(attrName => {
        return { label: attrName, key: attrName };
    });
    renderTable(); // 空のテーブルをカスタムヘッダーで描画
}

function rebuildForms(attributes) {
    // ★ 変更: V8.0 - 中央のキーノード (key_tbody) のみ管理
    const keywordTbody = $('key_tbody');
    if (!keywordTbody) return; // 早期リターン

    if (attributes === null) {
        // デフォルトに戻す
        keywordTbody.innerHTML = defaultKeywordForm;
    } else {
        // カスタムUIを構築
        let surfacePlaceholder = attributeExamples['surface'] ? '例：' + attributeExamples['surface'] : '';
        let keywordHTML = `<tr><td class="label">原文文字列 (表層形)</td><td><input id="surface" type="text" placeholder="${surfacePlaceholder}" /></td></tr>`;
        attributes.forEach(attr => {
            let attrPlaceholder = attributeExamples[attr] ? '例：' + attributeExamples[attr] : '';
            keywordHTML += `<tr><td class="label">${attr}</td><td><input id="${attr}" type="text" placeholder="${attrPlaceholder}" /></td></tr>`;
        });
        keywordTbody.innerHTML = keywordHTML;
    }
    
    // デフォルトに戻した場合のみ、pos連動を有効化
    if (attributes === null) {
        enableAllPosSubfields();
    }
    
    // ★ 追加: V8.0 - 動的な L/R/H/D ボックスもすべてクリア
    clearDynamicBoxes();
}

function clearDynamicBoxes(typeToClear = null) {
    // typeToClear が指定された場合 (例: 'L') はそれだけを、
    // null の場合はすべてをクリアする
    const types = typeToClear ? [typeToClear] : ['H', 'D', 'L', 'R'];
    
    types.forEach(type => {
        const wrapper = $(`${type}-area-wrapper`); // L/R/H/D 共通のラッパー
        if (wrapper) {
            wrapper.innerHTML = ''; // 中身 (L/Rテーブル or H/D行) を空にする
            wrapper.style.display = 'none'; 
        }
        
        const trigger = $(`trigger${type}`);
        if (trigger) {
            trigger.style.display = 'inline-block';
            
            // ★ トリガーボタンを「指定」モードにリセット
            let resetLabel = "";
            if (type === 'L') resetLabel = 'Lワード検索を指定';
            else if (type === 'R') resetLabel = 'Rワード検索を指定';
            else if (type === 'H') resetLabel = '親ノード検索を指定';
            else if (type === 'D') resetLabel = '子ノード検索を指定';
            
            trigger.textContent = resetLabel;
            trigger.onclick = () => showSearchArea(type);
        }
        
        
        // H/D のみ、ラッパーの外にあるヘッダーを削除
        if (type === 'H') { // ★ H
            const addChainBtn = $('H-add-chain-btn');
            if (addChainBtn) {
                addChainBtn.style.display = 'none';
                const gridCell = trigger.parentNode; 
                if (gridCell) {
                    gridCell.appendChild(addChainBtn);
                }
            }
        }
        
        // ★ D の場合、「さらに別...」ボタンを非表示にし、元の位置に戻す
        if (type === 'D') {
            const addChainBtn = $('D-add-chain-btn');
            // ...
            if (addChainBtn) {
                addChainBtn.style.display = 'none';
                // 元の親 (.grid-cell.down) に戻す
                const gridCell = trigger.parentNode; 
                if (gridCell) {
                    gridCell.appendChild(addChainBtn);
                }
            }
        }
        
    });

    // ★ 削除: アラインメントの再評価ロジックをすべて削除
    // (CSS側で align-items: start; に固定されているため不要)


    // ★ フルクリア (clearAll) の場合のみ、udTypeをリセット
    if (!typeToClear) {
        if ($('key_udType_row')) { 
            $('key_udType_row').remove();
        }
    }
}

/* ---------- ★ V7.4: 動的POSカラー生成 ---------- */

// HSL (Hue, Saturation, Lightness) から RGB への変換
function hslToRgb(h, s, l){
    let r, g, b;
    if(s == 0){
        r = g = b = l; // achromatic
    } else {
        const hue2rgb = (p, q, t) => {
            if(t < 0) t += 1;
            if(t > 1) t -= 1;
            if(t < 1/6) return p + (q - p) * 6 * t;
            if(t < 1/2) return q;
            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;
            return p;
        }
        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
    }
    return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
}

// ランダムな薄い色 (RGB配列) を生成
function getRandomPastelColor() {
    const hue = Math.random();
    const saturation = 0.7 + Math.random() * 0.1; // 彩度を高め (0.7-0.8)
    const lightness = 0.85 + Math.random() * 0.1; // 明度を高く (0.85-0.95)
    return hslToRgb(hue, saturation, lightness);
}

// posColorsオブジェクトからCSSルールを生成し、<style>タグに注入
function injectPosStyles(colors) {
    const styleEl = $('dynamicPosStyles');
    if (!styleEl) return;
    
    let css = '';
    for (const pos in colors) {
        const bg = colors[pos].bg;
        const border = colors[pos].border;
        
        // ★ V7.6 修正:
        // バグ (不正な正規表現) を削除。
        // 'pos' 属性の値 (例: "名詞", "NOUN") をそのままクラス名として使用する。
        // (span.classList.add(pos) の仕様と一致させる)
        
        css += `.${pos}.hover, .${pos}:hover {\n`;
        css += `  background: ${bg};\n`;
        css += `  border: 2px dashed ${border};\n`;
        css += `}\n`;
    }
    styleEl.textContent = css;
}
// センテンスをスキャンし、posColorsを生成・注入
function scanAndGenerateColors(sentences) {
    posColors = {}; // グローバルをリセット
    attributeExamples = {}; // ★ 追加: 凡例データもリセット
    const posSet = new Set();
    
    sentences.forEach(s => {
        const words = s.getElementsByTagName('w');
        Array.from(words).forEach(w => {
            const pos = w.getAttribute('pos') || 'その他';
            posSet.add(pos);

            // ★ 追加: 属性のサンプルテキストを収集
            Array.from(w.attributes).forEach(attr => {
                if (!attributeExamples[attr.name] && attr.value.trim() !== "") {
                    attributeExamples[attr.name] = attr.value.trim();
                }
            });
            // ★ 追加: surface (textContent) のサンプルテキストを収集
            const surfaceText = w.textContent.trim();
            if (!attributeExamples['surface'] && surfaceText !== "") {
                attributeExamples['surface'] = surfaceText;
            }
        });
    });
    
    // 'その他' があれば、固定色を先に追加
    if (posSet.has('その他')) {
        posColors['その他'] = {bg:"whitesmoke", border:"rgba(0,0,0,0.12)"};
        posSet.delete('その他');
    }

    // 残りのPOSにランダム色を割り当て
    posSet.forEach(pos => {
        const [r, g, b] = getRandomPastelColor();
        posColors[pos] = {
            bg: `rgb(${r},${g},${b})`,
            // ボーダー色は背景色より少し暗く、透明度を持たせる
            border: `rgba(${Math.max(0, r-40)},${Math.max(0, g-40)},${Math.max(0, b-40)},0.45)`
        };
    });
    
    // 生成したCSSを注入
    injectPosStyles(posColors);
}

/* ---------- 条件収集 / マッチング ---------- */
function enableAllPosSubfields(){
    if (isCustomized) return;
    ['', 'L1_','L2_','L3_','L4_','L5_','R1_','R2_','R3_','R4_','R5_'].forEach(p=>enablePosSubfields(p)); 
}
function handleFileUpload(e){
  const file = e.target.files[0];
  $('fileError').style.display='none'; $('fileError').textContent = '';
  $('errorMsg').style.display='none';
  if(!file) return;

  const readerForEncoding = new FileReader();
  readerForEncoding.onload = function(ev) {
    const codes = new Uint8Array(ev.target.result);
    const encoding = Encoding.detect(codes);
    const textReader = new FileReader();
    
    textReader.onload = function(eText) {
      const text = eText.target.result;
      const previousData = currentData;
      currentData = text;
      const parsed = parseSentencesFromCurrentData();
      if (parsed.error) {
          currentData = previousData;
          $('fileError').textContent = `ファイルの読み込みに失敗しました: ${parsed.error}`;
          $('fileError').style.display = 'block';
          $('fileInput').value = ""; 
          return;
      }
      if (parsed.sentences.length === 0 && text.trim() !== "") {
        currentData = previousData;
        $('fileError').textContent = "ファイルから有効なデータ（<s>タグ）が見つかりませんでした。";
        $('fileError').style.display = 'block';
        $('fileInput').value = "";
        return;
      }

      // 成功した場合の処理
      isFileUploaded = true;
      isCustomized = false; // ★ 追加: アップロード直後は非カスタマイズ状態
      rebuildForms(null); // ★ 追加: フォームをデフォルトに戻す
      $('customizeBtn').style.display = 'inline-block'; // ★ 追加: カスタマイズボタンを表示
      
      // ★ V7.4: アップロードされたデータをスキャンしてPOSカラーを生成
      // (parsed はこのスコープで利用可能)
      scanAndGenerateColors(parsed.sentences);
      
      uploadFileName = (file.name || "uploaded").replace(/\.[^/.]+$/, "");
      hits = []; hasSearched=false; selectedHitNo=null; currentStartIndex=0; renderTable();
    };
    textReader.onerror = function() {
      $('fileError').textContent = "ファイルのテキスト読み込みに失敗しました。";
      $('fileError').style.display = 'block';
    };
    try {
        textReader.readAsText(file, encoding || 'UTF-8');
    } catch (e) {
        $('fileError').textContent = "ファイルの読み込み開始に失敗しました。(Encoding Error)";
        $('fileError').style.display = 'block';
    }
  };
  readerForEncoding.onerror = function() {
    $('fileError').textContent = "ファイルのエンコーディング検出に失敗しました。";
    $('fileError').style.display = 'block';
  };
  readerForEncoding.readAsArrayBuffer(file);
}

function collectConditions(){
  
  // 1. 文書情報
  const s_cond = {};
  const docKeys = ['Task','textID','personID','personAge','language','personFirstLang','personSecondLang'];
  docKeys.forEach(k => {
      if($(k)) s_cond[k] = trimStr($(k).value);
  });

  // 2. 属性リストの決定 (隣接性用と係り受け用を個別に用意)
  let adj_attributes, dep_attributes;
  if (isCustomized) {
      adj_attributes = Array.from(detectedAttributes);
      dep_attributes = Array.from(detectedAttributes);
  } else {
      adj_attributes = defaultWAttributes_Adj;
      dep_attributes = defaultWAttributes_Dep;
  }
  
  // 3. キーノード条件 (両方の属性リストをマージして収集)
  const key_cond = {};
  // ★ isCustomized=false の場合、両方のデフォルト属性リストをマージ
  const key_attributes = isCustomized ? adj_attributes : Array.from(new Set([...adj_attributes, ...dep_attributes]));
  
  key_cond['surface'] = trimStr($('surface') ? $('surface').value : "");
  key_attributes.forEach(attr => {
      // $(attr) はキーノードの入力フィールド (例: $('#pos'), $('#root'))
      if($(attr) && $(attr).value) key_cond[attr] = trimStr($(attr).value);
  });
  // key_udType は動的に追加されるため、個別にチェック
  if ($('key_udType') && $('key_udType').value) {
      key_cond['udType'] = trimStr($('key_udType').value);
  }

  // ★ 変更: L, R, H, D を独立して収集 (動的配列に変更)
  const l_conds = []; // L1, L2... を収集
  const r_conds = []; // R1, R2... を収集
  const h_conds = []; // H1, H2... を収集
  const d_conds = []; // D1, D2... を収集
  // 4. Lワード収集 (adj_attributes を使用)
  const l_table = $('L-table');
  if (l_table) {
      const rows = l_table.tBodies[0].rows;
      if (rows.length > 0) {
          const numCols = rows[0].cells.length - 1; // -1 for <th>
          const adj_attributes = isCustomized ? Array.from(detectedAttributes) : defaultWAttributes_Adj;

          for (let c = 1; c <= numCols; c++) { // c は列インデックス (1-based)
              const tmp = {};
              // row[1] (2行目) は surface
              tmp['surface'] = trimStr(rows[1].cells[c].querySelector('input').value);
              
              let attrIndex = 0;
              adj_attributes.forEach(attr => {
                  if (attr === 'surface') return;
                  // row[2] (3行目) からが属性
                  const row = rows[2 + attrIndex];
                  if (row && row.cells[c]) {
                      tmp[attr] = trimStr(row.cells[c].querySelector('input').value);
                  }
                  attrIndex++;
              });
              l_conds.push(Object.values(tmp).some(v => v !== "") ? tmp : null);
          }
          l_conds.reverse(); // [L1, L2, L3] -> [L3, L2, L1]
      }
  }

  // 5. Rワード収集 (adj_attributes を使用)
  const r_table = $('R-table');
  if (r_table) {
      const rows = r_table.tBodies[0].rows;
      if (rows.length > 0) {
          const numCols = rows[0].cells.length - 1; // -1 for <th>
          const adj_attributes = isCustomized ? Array.from(detectedAttributes) : defaultWAttributes_Adj;

          for (let c = 1; c <= numCols; c++) { // c は列インデックス (1-based)
              const tmp = {};
              // row[1] (2行目) は surface
              tmp['surface'] = trimStr(rows[1].cells[c].querySelector('input').value);
              
              let attrIndex = 0;
              adj_attributes.forEach(attr => {
                  if (attr === 'surface') return;
                  // row[2] (3行目) からが属性
                  const row = rows[2 + attrIndex];
                  if (row && row.cells[c]) {
                      tmp[attr] = trimStr(row.cells[c].querySelector('input').value);
                  }
                  attrIndex++;
              });
              r_conds.push(Object.values(tmp).some(v => v !== "") ? tmp : null); // [R1, R2, R3]
          }
      }
  }
  l_conds.reverse(); // [L1, L2, L3] -> [L3, L2, L1]

  // 5. Rワード収集 (adj_attributes を使用)
  let k_r = 1;
  while(true) {
      const box = $(`R-box-${k_r}`);
      if (!box) break;
      const tmp = {};
      tmp['surface'] = trimStr($(`R${k_r}_surface`) ? $(`R${k_r}_surface`).value : "");
      adj_attributes.forEach(attr => {
          if($(`R${k_r}_${attr}`)) tmp[attr] = trimStr($(`R${k_r}_${attr}`).value);
      });
      r_conds.push(Object.values(tmp).some(v => v !== "") ? tmp : null); // [R1, R2, R3]
      k_r++;
  }

  // 6. Hノード収集 (dep_attributes を使用)
  // ★ H は複数チェーン (chainIndex=1, 2, 3...)
  let h_chain_idx = 1;
  while(true) {
      const h_table = $(`H-table-${h_chain_idx}`);
      if (!h_table) break;
      
      const current_chain_conds = []; // このチェーンの [H1, H2...]
      const h_tbody = h_table.tBodies[0];
      const h_rows = h_tbody.querySelectorAll('tr'); // DOM順 (H-N ... H-1)

      h_rows.forEach((row, index) => {
          const levelMatch = row.id.match(/-box(\d+)$/);
          const level = levelMatch ? parseInt(levelMatch[1], 10) : 0;
          
          const tmp = {};
          tmp['surface'] = trimStr($(`H${h_chain_idx}-${level}-surface`) ? $(`H${h_chain_idx}-${level}-surface`).value : ""); 
          dep_attributes.forEach(attr => {
              if($(`H${h_chain_idx}-${level}-${attr}`)) tmp[attr] = trimStr($(`H${h_chain_idx}-${level}-${attr}`).value);
          });
          current_chain_conds.push(Object.values(tmp).some(v => v !== "") ? tmp : null);
      });
      
      // ★ h_rows は [HN...H1] の順で収集されるので、 [H1...HN] に reverse する
      current_chain_conds.reverse();
      h_conds.push(current_chain_conds); // [ [H1a, H2a...], [H1b, H2b...] ]
      h_chain_idx++;
  }

  // 7. Dノード収集 (dep_attributes を使用)
  // ★ D は複数チェーン (chainIndex=1, 2, 3...)
  let d_chain_idx = 1;
  while(true) {
      const d_table = $(`D-table-${d_chain_idx}`);
      if (!d_table) break;
      
      const current_chain_conds = []; // このチェーンの [D1, D2...]
      const d_tbody = d_table.tBodies[0];
      const d_rows = d_tbody.querySelectorAll('tr');

      d_rows.forEach((row, index) => {
          const level = index + 1; // Dは DOM順 (D1, D2...)
          const tmp = {};
          // ★ ID体系を変更 (e.g., D1-1-surface)
          tmp['surface'] = trimStr($(`D${d_chain_idx}-${level}-surface`) ? $(`D${d_chain_idx}-${level}-surface`).value : "");
          dep_attributes.forEach(attr => {
              if($(`D${d_chain_idx}-${level}-${attr}`)) tmp[attr] = trimStr($(`D${d_chain_idx}-${level}-${attr}`).value);
          });
          current_chain_conds.push(Object.values(tmp).some(v => v !== "") ? tmp : null);
      });
      
      d_conds.push(current_chain_conds); // [ [D1a, D2a...], [D1b, D2b...] ]
      d_chain_idx++;
  }
  // 8. 戻り値 (4種類の条件をすべて返す)
  return { 
      s_cond: s_cond, 
      key_cond: key_cond, 
      l_conds: l_conds, // L5..L1
      r_conds: r_conds, // R1..R5
      h_conds: h_conds, // H5..H1
      d_conds: d_conds  // D1..D5
  };
}

// 日本語品詞名 -> XMLの英語タグ への対応表
const posJpToEn = {
  "名詞": "NOUN", "固有名詞": "PROPN", "代名詞": "PRON", "動詞": "VERB",
  "形容詞": "ADJ", "副詞": "ADV", "連体詞": "DET", "接続詞": "CCONJ",
  "助詞": "ADP", "助動詞": "AUX", "感動詞": "INTJ", "記号": "PUNCT",
  "接頭辞": "NOUN", "数詞": "NUM", "補助記号": "PUNCT", "形状詞": "ADJ",
};

// ★ 変更: wordMatchesExact (動的UI対応)
function wordMatchesExact(w, cond){
  if(!w) return false;

  if (isCustomized) {
      // --- カスタマイズUIの場合 ---
      // cond には 'surface' と検出された全属性が含まれる
      for (const attrName in cond) {
          if (!cond[attrName]) continue; // 条件指定なし

          if (attrName === 'surface') {
              if (w.textContent.trim() !== cond.surface) return false;
          } else if (defaultWAttributes.includes(attrName) || detectedAttributes.has(attrName)) {
              // 'pos'などのデフォルト属性も、カスタム時は属性としてそのまま比較
              if (getWAttr(w, attrName) !== cond[attrName]) return false;
          }
          // (文書情報キー(Taskなど)はここではチェックしない)
      }
  } else {
      // --- デフォルトUIの場合 ---
      const attrNames = ['pos','pos1','pos2','pos3','conjClass','conjForm','root'];
      for(const name of attrNames) {
          if (cond[name]) {
              let condValue = cond[name];
              let xmlValue = getWAttr(w, name);

              // デフォルト時のみ、'pos'の日本語変換を行う
              if (name === 'pos' && posJpToEn[condValue]) {
                  condValue = posJpToEn[condValue];
              }
              if (xmlValue !== condValue) return false;
          }
      }
      if(cond.surface && w.textContent.trim() !== cond.surface) return false;
  }
  
  return true;
}

function sentenceMatchesExact(s, cond){
  const sKeys = ['Task','textID','personID','personAge','language','personFirstLang','personSecondLang'];
  for(const k of sKeys) if(cond[k] && trimStr(s.getAttribute(k)) !== cond[k]) return false;
  return true;
}

function keywordAllEmpty(){
  let keys;
  if (isCustomized) {
      keys = ['surface', ...Array.from(detectedAttributes)];
  } else {
      // ★ 変更: V8.0 - デフォルトは adjacency + 'udType' (あれば)
      keys = [...defaultWAttributes_Adj, 'surface'];
      if ($('key_udType')) {
          // 'key_udType' は defaultWAttributes_Dep に含まれるが、
          // Adjacency モードから H を押したケースをカバーするため、明示的に追加
          keys.push('udType');
      }
  }
  // ★ 変更: V8.0 - prefix なし
  return keys.every(id => trimStr($(id) ? $(id).value : "") === "");
}

/* ---------- 検索（プログレス/中断処理） ---------- */
function onSearchClick(){
  $('errorMsg').style.display = 'none'; $('errorMsg').textContent = '';
  $('fileError').style.display = 'none';
  
  // ★ 変更: V8.0 - keywordAllEmpty は 'key_table' を見る
  if (keywordAllEmpty()){
      $('errorMsg').textContent = "キーワード / キーノード条件を指定してください";
      $('errorMsg').style.display = 'block';
      return;
  }

  // ★ 変更: V8.0 - collectConditions がモードを決定
  const conditions = collectConditions();
  
  // ★ 変更: V8.0 - runSearchWithProgress に conditions を渡す
  runSearchWithProgress(conditions);
}

function runSearchWithProgress(conditions){
  const parsed = parseSentencesFromCurrentData();
  if(parsed.error){ $('errorMsg').textContent = parsed.error; $('errorMsg').style.display='block'; return; }
  parsedSentences = parsed.sentences;
  const sentences = parsed.sentences;
  const totalSent = sentences.length;
  hits = []; currentStartIndex=0; sortCol=null; sortAsc=true; hasSearched=false; searchAbort=false; selectedHitNo=null;
  const progressWrap = $('progressWrap'); const progressBar = $('progressBar'); const progressText = $('progressText');
  progressWrap.style.display='block'; progressBar.style.width='0%'; progressText.style.display='block'; progressText.textContent='検索中です (0% 完了)';
  const startTime = Date.now(); const timeoutMs = 10000; const targetUpdates = 100;
  const batchSize = Math.max(1, Math.ceil(totalSent / targetUpdates));
  
  // ★ 変更: V8.1 - L/R/H/D すべての条件を受け取る
  const { s_cond, key_cond, l_conds, r_conds, h_conds, d_conds } = conditions;

  // ★ 変更: V8.1 - H/D条件がひとつでも null でない (＝指定されている) かどうか
  const hasDependencyCond = h_conds.some(c => c !== null) || d_conds.some(c => c !== null);
  
  // uploadedFileAttrNames は「検索にヒットしたwタグ」から属性を集める
  let uploadedFileAttrNames = new Set();  
  const generateDisplayText = (details, separator) => {
    return details.map(d => d.isMatched ? `(${d.text})` : d.text).join(separator);
  };
  const generateOriginalText = (details) => {
    return details.map(d => d.isMatched ? `(${d.original})` : d.original).join('');
  };

  let idx = 0; let serial = 0; const serializer = new XMLSerializer(); 
  function processChunk(){
    if(searchAbort){ progressWrap.style.display='none'; progressText.style.display='block'; progressText.textContent="ファイルが大きすぎます。検索は中断されました。"; hasSearched=false; renderTable(); return; }
    const chunkEnd = Math.min(totalSent, idx + batchSize);
    
    for(; idx < chunkEnd; idx++){
      const s = sentences[idx];
      // 1. 文書条件チェック
      if(!sentenceMatchesExact(s, s_cond)) continue;
      const words = Array.from(s.getElementsByTagName('w'));
      if (words.length === 0) continue;

      // ★ 変更: V8.1 - 係り受け検索が必要な場合はマップを作成
      let wordMap, childrenMap;
      if (hasDependencyCond) {
          wordMap = new Map();
          words.forEach(w => {
              const wordId = w.getAttribute('wordId');
              if (wordId) wordMap.set(wordId, w);
          });
          childrenMap = new Map();
          words.forEach(w => {
              const headId = w.getAttribute('udFrom');
              if (headId && headId !== "0" && headId !== w.getAttribute('wordId')) {
                  if (!childrenMap.has(headId)) childrenMap.set(headId, []);
                  childrenMap.get(headId).push(w);
              }
          });
      }

      // 2. 検索ループ (全単語をキー候補としてチェック)
      for(let i=0;i<words.length;i++){
        const w = words[i];
        
        // 2-1. キー条件チェック
        if(!wordMatchesExact(w, key_cond)) continue;
        
        const Lset = new Set(); // マッチした単語の「インデックス(i)」を格納
        const Rset = new Set(); // マッチした単語の「インデックス(i)」を格納
        const Hset = new Set(); // マッチした単語の「wordId (string)」を格納
        const Dset = new Set(); // マッチした単語の「wordId (string)」を格納

        // 2-2. L (隣接性・前方) チェック
        let lMatch = true;
        for(let lk=0; lk<l_conds.length; lk++){ // [0]=L5, [4]=L1
          if(l_conds[lk] === null) continue; // このレベルは条件指定なし
          const targetIndex = i - (l_conds.length - lk); // i-5, ..., i-1
          const lw = words[targetIndex];
          if(!wordMatchesExact(lw, l_conds[lk])){ lMatch = false; break; }
          Lset.add(targetIndex);
        }
        if(!lMatch) continue;

        // 2-3. R (隣接性・後方) チェック
        let rMatch = true;
        for(let rk=0; rk<r_conds.length; rk++){ // [0]=R1, [4]=R5
          if(r_conds[rk] === null) continue;
          const targetIndex = i + (rk+1); // i+1, ...
          const rw = words[targetIndex];
          if(!wordMatchesExact(rw, r_conds[rk])){ rMatch = false; break; }
          Rset.add(targetIndex);
        }
        if(!rMatch) continue;

        // 2-4. H (係り受け・親) チェック
        let hMatch = true;
        
        // ★ H条件が指定されている (h_conds が [[]] ではない) 場合のみチェック
        // (h_conds.some(chain => chain.length > 0) で、空のチェーン配列 [[], []] を除外)
        if (hasDependencyCond && h_conds.length > 0 && h_conds.some(chain => chain.length > 0 && chain.some(c => c !== null))) {

            // ★ 再帰関数 (チェーンの H_k (k=level) 以降がマッチするか)
            function checkParentChain(currentNode, chain, depth, Hset_chain) {
                if (depth === chain.length) return true; // チェーン完走
                
                const h_cond = chain[depth];
                if (h_cond === null) {
                    return checkParentChain(currentNode, chain, depth + 1, Hset_chain); // 条件指定なし
                }

                const headId = currentNode.getAttribute('udFrom');
                // ★ getAttribute が "26/27" のような複数の親を返す可能性を考慮 (ただしパースは最初のIDのみ)
                const firstHeadId = headId ? headId.split('/')[0] : null; 
                const parentW = wordMap.get(firstHeadId);

                if (wordMatchesExact(parentW, h_cond)) {
                    if (checkParentChain(parentW, chain, depth + 1, Hset_chain)) {
                        Hset_chain.add(parentW.getAttribute('wordId')); // マッチしたノードを記録
                        return true;
                    }
                }
                return false; // このノードからは条件に合う親チェーンが見つからなかった
            }

            let any_h_chain_found = false;
            
            // ★ h_conds は [ [H1a, H2a...], [H1b, H2b...] ]
            for (const h_chain of h_conds) {
                if (h_chain.length === 0 || h_chain.every(c => c === null)) continue;
                
                const Hset_for_this_chain = new Set();
                // ★ H1 (h_chain[0]) からチェック開始
                if (checkParentChain(w, h_chain, 0, Hset_for_this_chain)) {
                    any_h_chain_found = true;
                    Hset.add(...Hset_for_this_chain); // Hset にマージ
                    break; // ★ OR logic: 1つでもマッチしたらOK
                }
            }
            
            hMatch = any_h_chain_found;
        }
        if(!hMatch) continue;

        // 2-5. D (係り受け・子) チェック
        let dMatch = true;
        
        // ★ D条件が指定されている (d_conds が [[]] ではない) 場合のみチェック
        if (hasDependencyCond && d_conds.length > 0) {

            // ★ 再帰関数 (チェーンの D_k 以降がマッチするか)
            // (Dset はヒット表示用に、マッチしたノードの wordId を記録する)
            function checkChainRecursive(currentNode, chain, depth, Dset) {
                if (depth === chain.length) return true; // チェーン完走
                
                const d_cond = chain[depth];
                if (d_cond === null) {
                    return checkChainRecursive(currentNode, chain, depth + 1); // 条件指定なし
                }

                const children = childrenMap.get(currentNode.getAttribute('wordId')) || [];
                for (const childW of children) {
                    if (wordMatchesExact(childW, d_cond)) {
                        if (checkChainRecursive(childW, chain, depth + 1, Dset)) {
                            Dset.add(childW.getAttribute('wordId')); // マッチしたノードを記録
                            return true;
                        }
                    }
                }
                return false; // このノードからは条件に合う子チェーンが見つからなかった
            }

            let all_d_chains_found = true;
            const keyWordChildren = childrenMap.get(w.getAttribute('wordId')) || [];
            // ★ マッチングに「消費」できる子のプール
            const availableChildren = new Set(keyWordChildren); 
            
            // ★ d_conds は [ [D1a, D2a...], [D1b, D2b...] ]
            for (const d_chain of d_conds) {
                if (d_chain.length === 0 || d_chain.every(c => c === null)) continue;
                
                let found_match_for_this_chain = false;
                const d1_cond = d_chain[0];

                // ★ D1 が指定されていない場合 (D2から指定など) はキーノード (w) から再帰をスタート
                if (d1_cond === null) {
                    if (checkChainRecursive(w, d_chain, 1, Dset)) {
                         found_match_for_this_chain = true;
                         // (D1がないので availableChildren は消費しない)
                    }
                } else {
                    // ★ D1 が指定されている場合:
                    // 利用可能な子 (availableChildren) の中から D1 にマッチし、
                    // かつ D2... の連鎖も満たす子を探す
                    for (const childNode of availableChildren) {
                        if (wordMatchesExact(childNode, d1_cond)) {
                            if (checkChainRecursive(childNode, d_chain, 1, Dset)) {
                                found_match_for_this_chain = true;
                                availableChildren.delete(childNode); // ★ この子をプールから消費
                                Dset.add(childNode.getAttribute('wordId')); // D1 を記録
                                break; // このチェーンのマッチングは完了
                            }
                        }
                    }
                }

                if (!found_match_for_this_chain) {
                    all_d_chains_found = false; // 必須チェーンの1つが見つからなかった
                    break;
                }
            }
            
            dMatch = all_d_chains_found;
        }
        if(!dMatch) continue;

        // --- 3. ヒット！ (すべての条件がマッチ) ---
        serial++;
        const beforeWords = words.slice(0,i);
        const afterWords = words.slice(i+1);

        // ( ) 付けのためのロジック (L/R と H/D の両方を考慮)
        const prevDetails = beforeWords.map((x, idxBw) => ({
          text: x.textContent.trim(),
          original: getWAttr(x, 'original') || x.textContent.trim(),
          isMatched: Lset.has(idxBw) || (hasDependencyCond && Hset.has(x.getAttribute('wordId')))
        }));
        const keyDetails = {
          text: w.textContent.trim(),
          original: getWAttr(w, 'original') || w.textContent.trim(),
          isMatched: false // キー自体は括弧でくくらない
        };
        const nextDetails = afterWords.map((x, idxAw) => ({
          text: x.textContent.trim(),
          original: getWAttr(x, 'original') || x.textContent.trim(),
          isMatched: Rset.has(i + 1 + idxAw) || (hasDependencyCond && Dset.has(x.getAttribute('wordId')))
        }));
        
        const prevData = { upper: generateDisplayText(prevDetails, ' '), lower: generateOriginalText(prevDetails) };
        const keyData = { upper: keyDetails.text, lower: keyDetails.original };
        const nextData = { upper: generateDisplayText(nextDetails, ' '), lower: generateOriginalText(nextDetails) };
        
        // CSV/XML出力用の無修正データ
        const sentenceXML = serializer.serializeToString(s);
        const prevRaw = beforeWords.map((x, idxBw) => (Lset.has(idxBw) || (hasDependencyCond && Hset.has(x.getAttribute('wordId')))) ? "(" + x.outerHTML + ")" : x.outerHTML).join("");
        const nextRaw = afterWords.map((x, idxAw) => (Rset.has(i + 1 + idxAw) || (hasDependencyCond && Dset.has(x.getAttribute('wordId')))) ? "(" + x.outerHTML + ")" : x.outerHTML).join("");
        
        const hit_w_attrs = {};
        if (isFileUploaded) {
            Array.from(w.attributes).forEach(attr => {
                hit_w_attrs[attr.name] = attr.value;
                uploadedFileAttrNames.add(attr.name);
            });
        }

        // ヒットデータを格納
        hits.push({
          no: serial,
          Task: trimStr(s.getAttribute('Task')),
          textID: trimStr(s.getAttribute('textID')),
          prev: prevData,
          key: keyData,
          next: nextData,
          personID: trimStr(s.getAttribute('personID')),
          personAge: trimStr(s.getAttribute('personAge')),
          language: trimStr(s.getAttribute('language')),
          personFirstLang: trimStr(s.getAttribute('personFirstLang')),
          personSecondLang: trimStr(s.getAttribute('personSecondLang')),
          pos: getWAttr(w,'pos'),
          pos1: getWAttr(w,'pos1'),
          pos2: getWAttr(w,'pos2'),
          pos3: getWAttr(w,'pos3'),
          conjClass: getWAttr(w,'conjClass'),
          conjForm: getWAttr(w,'conjForm'),
          root: getWAttr(w,'root'),
          reading: (getWAttr(w,'pronunciation')||getWAttr(w,'reading')),
          rawPrev: prevRaw, rawKey: w.outerHTML, rawNext: nextRaw, rawSentence: sentenceXML,
          keyIndex: i,
          sentenceNodeIndex: idx,
          w_attrs: hit_w_attrs
        });

      } // 2. 検索ループ (for i) 終了
    } // 1. 文 (for idx) ループ終了
    
    // progress
    const progress = Math.floor((idx / Math.max(1,totalSent)) * 100);
    $('progressBar').style.width = progress + '%';
    $('progressText').textContent = `検索中です (${progress}% 完了)`;
    const elapsed = Date.now() - startTime;
    if(elapsed > timeoutMs && progress < 10) searchAbort = true;
    if(searchAbort){ $('progressWrap').style.display='none'; $('progressText').style.display='block'; $('progressText').textContent = "ファイルが大きすぎます。検索は中断されました。"; hasSearched=false; renderTable(); return; }
    
    if(idx < totalSent) { setTimeout(processChunk,0); }
    else {
      // 検索完了
      if (isFileUploaded) {
          currentDynamicHeaders = Array.from(uploadedFileAttrNames).sort().map(attrName => {
              return { label: attrName, key: attrName };
          });
      } else {
          currentDynamicHeaders = defaultDynamicHeaders;
      }
      
      hasSearched=true; $('progressBar').style.width='100%'; $('progressText').textContent='検索完了 (100% 完了)'; setTimeout(()=>{$('progressWrap').style.display='none'; $('progressText').style.display='none';},500); currentStartIndex=0; renderTable();
    }
  }
  setTimeout(processChunk,0);
}
/* ---------- 表示 / ソート / ページング ---------- */
function getSortedRows(){
  let rows = hits.slice();
  const headers = getCurrentHeaders();
  if(sortCol !== null){
    const key = headers[sortCol].key;
    const isStatic = staticHeaders.find(sh => sh.key === key);
    
    rows.sort((a,b) => {
      let valA, valB;

      // ★ 変更: isFileUploaded フラグのみで判断 (isCustomized は不要)
      if (isFileUploaded && !isStatic) {
          valA = a.w_attrs[key];
          valB = b.w_attrs[key];
      } else {
          valA = a[key];
          valB = b[key];
      }
      
      if (key === 'prev' || key === 'key' || key === 'next') {
          valA = valA ? valA.upper : "";
          valB = valB ? valB.upper : "";
      }

      const A = (valA ?? "").toString(); const B = (valB ?? "").toString();
      const nA = Number(A), nB = Number(B);
      if(!isNaN(nA) && !isNaN(nB)) return sortAsc ? nA - nB : nB - nA;
      return sortAsc ? A.localeCompare(B,'ja') : B.localeCompare(A,'ja');
    });
  }
  return rows;
}
function clampStartIndex(){
  const pageSize = parseInt($('pageSize').value,10);
  const rows = getSortedRows();
  const maxStart = Math.max(0, rows.length - pageSize);
  if(currentStartIndex > maxStart) currentStartIndex = maxStart;
  if(currentStartIndex < 0) currentStartIndex = 0;
}
function renderTable(){
  const container = $('tableContainer'); container.innerHTML = "";
  const pageSize = parseInt($('pageSize').value,10);
  const rows = getSortedRows();
  const total = rows.length;
  clampStartIndex();
  const start = currentStartIndex;
  const end = Math.min(start + pageSize, total);
  const pageRows = rows.slice(start, end);
  const tbl = document.createElement('table'); tbl.className='output';
  const thead = document.createElement('thead'); const thr = document.createElement('tr');
  const headers = getCurrentHeaders();
  headers.forEach((h, idx) => {
    const th = document.createElement('th'); th.textContent = h.label;
    th.addEventListener('click', ()=> { if(sortCol === idx) sortAsc = !sortAsc; else { sortCol = idx; sortAsc = true; } renderTable(); });
    thr.appendChild(th);
  });
  thead.appendChild(thr); tbl.appendChild(thead);
  const tbody = document.createElement('tbody');
  pageRows.forEach((r, i) => {
    const tr = document.createElement('tr');
    headers.forEach(h => {
      const td = document.createElement('td');
      
      let val;
      const isStatic = staticHeaders.find(sh => sh.key === h.key);
      // ★ 変更: isFileUploaded フラグのみで判断
      if (isFileUploaded && !isStatic) {
          val = r.w_attrs[h.key];
      } else {
          val = r[h.key];
      }

      // V7.1 二段表示ロジック
      if (h.key === 'prev' || h.key === 'next') {
        if (val) {
            const upperDiv = document.createElement('div');
            upperDiv.textContent = val.upper;
            upperDiv.className = 'context-upper';
            const lowerDiv = document.createElement('div');
            lowerDiv.textContent = val.lower;
            lowerDiv.className = 'context-lower';
            td.appendChild(upperDiv);
            td.appendChild(lowerDiv);
        }
      } else if(h.key === 'key'){
        if (val) {
            const span = document.createElement('span');
            span.className='key-cell-container';
            span.dataset.hitNo = r.no;
            const upperDiv = document.createElement('div');
            upperDiv.textContent = val.upper;
            upperDiv.className = 'context-upper';
            const lowerDiv = document.createElement('div');
            lowerDiv.textContent = val.lower;
            lowerDiv.className = 'context-lower';
            span.appendChild(upperDiv);
            span.appendChild(lowerDiv);
            span.addEventListener('click', ()=> {
              const hitNo = parseInt(span.dataset.hitNo,10);
              const sorted = getSortedRows();
              const posInSorted = sorted.findIndex(x => x.no === hitNo);
              if(posInSorted === -1) return;
              $('pageSize').value = '5';
              const newPageSize = 5;
              let desiredStart = posInSorted - Math.floor(newPageSize/2);
              const maxStart = Math.max(0, sorted.length - newPageSize);
              if(desiredStart < 0) desiredStart = 0;
              if(desiredStart > maxStart) desiredStart = maxStart;
              currentStartIndex = desiredStart;
              selectedHitNo = hitNo;
              renderTable();
              const hitIdx = hits.findIndex(hh => hh.no === hitNo);
              if(hitIdx !== -1) showSentenceDetailByIndex(hitIdx);
            });
            td.appendChild(span);
        }
      } else {
        td.textContent = val ?? "";
      }
      tr.appendChild(td);
    });
    if(selectedHitNo !== null && r.no === selectedHitNo) tr.classList.add('selected-row');
    tbody.appendChild(tr);
  });
  tbl.appendChild(tbody); container.appendChild(tbl);
  if(hasSearched){
    $('hitCount').style.display = 'block';
    $('hitCount').innerHTML = `<b>${total}</b>件ヒットしました`;
  } else { $('hitCount').style.display='none'; $('hitCount').innerHTML=''; }
  renderPager(total, pageSize);
}
function renderPager(total, pageSize){
  const top = $('pagerTop'); const bottom = $('pagerBottom');
  [top,bottom].forEach(el => el.innerHTML = '');
  const totalPages = Math.max(1, Math.ceil(total / pageSize));
  clampStartIndex();
  const currentPageIndex = Math.floor(currentStartIndex / pageSize);
  if(currentStartIndex > 0){
    const prevBtn = document.createElement('button'); prevBtn.textContent = `前の${pageSize}件を表示`;
    prevBtn.addEventListener('click', ()=>{ currentStartIndex = Math.max(0, currentStartIndex - pageSize); renderTable(); });
    top.appendChild(prevBtn); const prevBtn2 = prevBtn.cloneNode(true);
    prevBtn2.addEventListener('click', ()=>{ currentStartIndex = Math.max(0, currentStartIndex - pageSize); renderTable(); });
    bottom.appendChild(prevBtn2);
  }
  const info = document.createElement('span'); info.className='small';
  info.textContent = ` ${currentPageIndex+1} / ${totalPages} ページ (全 ${total} 件) `;
  top.appendChild(info.cloneNode(true)); bottom.appendChild(info);
  if(currentStartIndex + pageSize < total){
    const nextBtn = document.createElement('button'); nextBtn.textContent = `次の${pageSize}件を表示`;
    nextBtn.addEventListener('click', ()=>{ currentStartIndex = Math.min(total - pageSize, currentStartIndex + pageSize); renderTable(); });
    top.appendChild(nextBtn); const nextBtn2 = nextBtn.cloneNode(true);
    nextBtn2.addEventListener('click', ()=>{ currentStartIndex = Math.min(total - pageSize, currentStartIndex + pageSize); renderTable(); });
    bottom.appendChild(nextBtn2);
  }
}
/* ---------- 文詳細表示 / 文の表示（キー選択） ---------- */
function showSentenceDetailByIndex(hitIndex){
  const hit = hits[hitIndex]; if(!hit) return;
  selectedHitNo = hit.no;
  renderTable();
  const detail = $('sentenceDetail'); const meta = $('sentenceMeta'); const area = $('sentenceArea');
  area.innerHTML = ""; meta.style.display='block'; meta.textContent = `${hit.no || ''}-${hit.Task || ''}-${hit.textID || ''}`;
  $('showArticleBtn').style.display = 'inline-block'; $('articleRangeLabel').style.display = 'inline-block';
  $('articleBox').style.display='none'; $('articleContent').innerHTML='';

  // ★ V7.3 描画エリアの表示切り替え
  if (isUDViewActive) {
    // UD表示がアクティブ
    $('sentenceArea').style.display = 'none';
    $('udCanvasContainer').style.display = 'block';
    drawUDTree(hit); // ★ 新しい関数を呼ぶ
  } else {
    // 通常の文詳細表示
    $('sentenceArea').style.display = 'block';
    $('udCanvasContainer').style.display = 'none';
    try {
      const parser = new DOMParser();
      const doc = parser.parseFromString(hit.rawSentence, "application/xml");
      const wnodes = Array.from(doc.getElementsByTagName('w'));
      wnodes.forEach((wn, idx) => {
        const span = document.createElement('span');
        span.classList.add('word');
        const pos = (wn.getAttribute('pos') || 'その他');
        span.classList.add(pos);
        span.dataset.pos = pos;
        // ★ 変更: ツールチップ用に、w_attrs (全属性) を data-* に格納
        if (isFileUploaded) {
            // ★ 修正: hit.w_attrs (キーワードの属性) ではなく、wn (現在の単語) の全属性を参照する
            Array.from(wn.attributes).forEach(attr => {
                span.dataset[attr.name] = attr.value;
            });
        } else {
            // デフォルトデータ用の属性
            span.dataset.pos1 = wn.getAttribute('pos1') || "";
            span.dataset.pos2 = wn.getAttribute('pos2') || "";
            span.dataset.pos3 = wn.getAttribute('pos3') || "";
            span.dataset.conjClass = wn.getAttribute('conjClass') || "";
            span.dataset.conjForm = wn.getAttribute('conjForm') || "";
            span.dataset.root = wn.getAttribute('root') || "";
            span.dataset.reading = wn.getAttribute('pronunciation') || wn.getAttribute('reading') || "";
        }
        span.textContent = wn.textContent || "";
        if(pos === '記号') span.classList.add('punct');
        if(typeof hit.keyIndex === 'number' && idx === hit.keyIndex){
          span.classList.add('key-selected');
          const col = posColors[pos] ? posColors[pos].border : 'rgba(0,0,0,0.2)';
          span.style.border = `2px solid ${col}`; span.style.borderRadius = '4px';
        }
        span.addEventListener('mouseenter', onWordMouseEnter);
        span.addEventListener('mouseleave', onWordMouseLeave);
        span.addEventListener('mousemove', onWordMouseMove);
        area.appendChild(span);
      });
    } catch(e){
      area.textContent = "文の表示に失敗しました。";
    }
  }
  
  detail.style.display = 'block';
  $('tooltip').style.display = 'none';
}
/* ---------- ツールチップ / ホバー処理 ---------- */
// ★ 変更: ツールチップ (動的属性対応)
function onWordMouseEnter(e){
  const span = e.currentTarget; const pos = span.dataset.pos || '';
  const areaRoot = span.closest('.sentence-area') || span.closest('.article-box') || document;
  const siblings = areaRoot.querySelectorAll('.word');
  siblings.forEach(w => { if((w.dataset.pos||'') === pos) w.classList.add('hover'); });
  
  const lines = [];
  // data-* 属性をすべて表示する
  // ★ 修正: 'pos' を先に表示し、その後 'pos' 以外をすべて表示する
  if (span.dataset.pos) {
      lines.push(`pos：${span.dataset.pos}`);
  }
  Object.keys(span.dataset).forEach(key => {
      // 'pos' 以外で、値が存在するものを追加
      if (key !== 'pos' && span.dataset[key]) {
          lines.push(`${key}：${span.dataset[key]}`);
      }
  });

  const tt = $('tooltip'); tt.textContent = lines.join("\n");
  const pc = posColors[pos] ? posColors[pos].bg : '#fff'; tt.style.background = pc; tt.style.border='1px solid #ccc';
  tt.style.display = 'block';
}
function onWordMouseLeave(e){
  const span = e.currentTarget; const pos = span.dataset.pos || '';
  const areaRoot = span.closest('.sentence-area') || span.closest('.article-box') || document;
  const siblings = areaRoot.querySelectorAll('.word');
  siblings.forEach(w => { if((w.dataset.pos||'') === pos) w.classList.remove('hover'); });
  const tt = $('tooltip'); tt.style.display = 'none';
}
function onWordMouseMove(e){
  const tt = $('tooltip'); if(tt.style.display === 'block'){
    const gap = 12; let x = e.clientX + gap, y = e.clientY + gap;
    const bw = tt.offsetWidth, bh = tt.offsetHeight;
    if(x + bw > window.innerWidth) x = e.clientX - bw - gap;
    if(y + bh > window.innerHeight) y = e.clientY - bh - gap;
    tt.style.left = x + 'px'; tt.style.top = y + 'px';
  }
}
/* ---------- 文章詳細表示（前後 N 文 または 同一 textID の全文） ---------- */
function showArticleDetailByHitNo(hitNo, range){
  const hitIdx = hits.findIndex(h => h.no === hitNo); if(hitIdx === -1) return;
  const hit = hits[hitIdx];
  if(!parsedSentences || parsedSentences.length === 0) return;
  let indices = [];
  if(range === 'all'){
    parsedSentences.forEach((s, idx)=>{ if(trimStr(s.getAttribute('textID')) === trimStr(hit.textID)) indices.push(idx); });
    if(indices.length === 0) return;
    const start = Math.min(...indices), end = Math.max(...indices);
    renderArticleRange(start, end, hit);
    return;
  }
  const N = parseInt(range,10);
  const sIdx = hit.sentenceNodeIndex;
  const start = Math.max(0, sIdx - N);
  const end = Math.min(parsedSentences.length - 1, sIdx + N);
  renderArticleRange(start, end, hit);
}
function renderArticleRange(start, end, hit){
  const articleContent = $('articleContent'); articleContent.innerHTML = "";
  for(let i=start;i<=end;i++){
    const sNode = parsedSentences[i];
    const div = document.createElement('div'); div.style.marginBottom='8px';
    if(i === hit.sentenceNodeIndex) div.style.background = '#f0fff0';
    const wnodes = Array.from(sNode.getElementsByTagName('w'));
    wnodes.forEach((wn, idx) => {
      const span = document.createElement('span');
      span.classList.add('word');
      const pos = (wn.getAttribute('pos') || 'その他');
      span.classList.add(pos);
      span.dataset.pos = pos;
      
      // ★ 変更: ツールチップ用に、w の全属性を data-* に格納
      if (isFileUploaded) {
          Array.from(wn.attributes).forEach(attr => {
              span.dataset[attr.name] = attr.value;
          });
      } else {
          // デフォルトデータ用の属性
          span.dataset.pos1 = wn.getAttribute('pos1') || "";
          span.dataset.pos2 = wn.getAttribute('pos2') || "";
          span.dataset.pos3 = wn.getAttribute('pos3') || "";
          span.dataset.conjClass = wn.getAttribute('conjClass') || "";
          span.dataset.conjForm = wn.getAttribute('conjForm') || "";
          span.dataset.root = wn.getAttribute('root') || "";
          span.dataset.reading = wn.getAttribute('pronunciation') || wn.getAttribute('reading') || "";
      }
      
      span.textContent = wn.textContent || "";
      if(pos === '記号') span.classList.add('punct');
      if(i === hit.sentenceNodeIndex && typeof hit.keyIndex === 'number' && idx === hit.keyIndex){
        span.classList.add('key-selected');
        const col = posColors[pos] ? posColors[pos].border : 'rgba(0,0,0,0.2)';
        span.style.border = `2px solid ${col}`; span.style.borderRadius = '4px';
      }
      span.addEventListener('mouseenter', onWordMouseEnter);
      span.addEventListener('mouseleave', onWordMouseLeave);
      span.addEventListener('mousemove', onWordMouseMove);
      div.appendChild(span);
    });
    articleContent.appendChild(div);
  }
  $('articleBox').style.display = 'block';
  $('articleBox').scrollIntoView({behavior:'smooth', block:'nearest'});
}
/* ---------- CSV（無修正列を末尾に付与） ---------- */
function sanitizeFilename(s){ return (s||"").replace(/[\/\\?%*:|"<>]/g, '_'); }

function buildCondString(){
    let parts = [];
    
    // 1. キー条件 (代表的なものをピックアップ)
    let keyKeys;
    if (isCustomized) {
        keyKeys = ['surface', 'pos', 'wordId', 'lemma']; // カスタム時は代表的なもの
    } else {
        keyKeys = ['pos','root','surface', 'udType']; // デフォルト + UD
    }
    keyKeys.forEach(k=>{
        const el = $(k); // V8.0: key_ はつかない
        const v = el ? trimStr(el.value || "") : "";
        if(v) parts.push(`Key-${v}`);
    });

    // 2. L/R/H/D 条件 (L1/R1/H1/D1 の 'surface' または 'root' があれば採用)
    ['L', 'R', 'H', 'D'].forEach(type => {
        const k = 1; // L1, R1, H1, D1 のみ
        let v = "";
        const surfaceEl = $(`${type}${k}_surface`);
        // 'root' は isCustomized=false の時のみ存在する可能性がある
        const rootEl = $(`${type}${k}_root`); 
        
        if (surfaceEl && surfaceEl.value) v = trimStr(surfaceEl.value);
        else if (rootEl && rootEl.value) v = trimStr(rootEl.value);

        if(v) parts.push(`${type}${k}-${v}`);
    });

    // 3. 文書情報
    ['textID','personID'].forEach(k=>{
        const el = $(k); const v = el ? trimStr(el.value || "") : "";
        if(v) parts.push(`${k}-${v}`);
    });

    if (parts.length === 0) parts.push('all');
    return parts.join('_');
}
function downloadCSV(encoding){
  if(hits.length === 0){ alert("出力する結果がありません。"); return; }
  const headers = getCurrentHeaders();
  const visibleLabels = headers.map(h => h.label);
  const headerRow = visibleLabels.concat(["無修正前文脈","無修正キー","無修正後文脈","無修正全文"]);
  const rows = hits.map(r => {
    const visible = headers.map(h => {
        let val;
        const isStatic = staticHeaders.find(sh => sh.key === h.key);
        // ★ 変更: isFileUploaded フラグのみで判断
        if (isFileUploaded && !isStatic) {
            val = r.w_attrs[h.key];
        } else {
            val = r[h.key];
        }
        if (h.key === 'prev' || h.key === 'key' || h.key === 'next') {
            return val ? val.upper : "";
        }
        return val ?? "";
    });
   return visible.concat([r.rawPrev ?? "", r.rawKey ?? "", r.rawNext ?? "", r.rawSentence ?? ""]);
  });
  // ★ 修正: 改行コードのタイプミス ("\rn" -> "\r\n")
  const csvText = [headerRow, ...rows].map(r => r.map(cell => `"${String(cell).replace(/"/g,'""')}"`).join(",")).join("\r\n");
  const date = new Date(); const yy = String(date.getFullYear()).slice(2); const mm = String(date.getMonth()+1).padStart(2,'0'); const dd = String(date.getDate()).padStart(2,'0');
  
  const datestr = `${yy}-${mm}-${dd}`; const prefix = sanitizeFilename(uploadFileName || 'keioSFC'); const condStr = sanitizeFilename(buildCondString());
  const fname = `${prefix}_${datestr}_${condStr}.csv`;
  let blob;
  if(encoding === 'shift-jis'){
    const uint8 = Encoding.convert(Encoding.stringToCode(csvText), 'SJIS', 'UNICODE');
    blob = new Blob([new Uint8Array(uint8)], {type:'text/csv'});
  } else {
    blob = new Blob(["\uFEFF" + csvText], {type:'text/csv;charset=utf-8;'});
  }
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob); a.download = fname; document.body.appendChild(a); a.click(); a.remove();
}
/* ---------- クリア ---------- */
function clearAll(){
  // 1. 文書情報クリア
  const docIds = ['Task','textID','personID','personAge','language','personFirstLang','personSecondLang'];
  docIds.forEach(id => { if($(id)) $(id).value = ""; });
  // (文書情報フィールドセットは閉じない)

  // 2. L/R/H/D 動的ボックスをクリア
  clearDynamicBoxes(); // ★ V8.0 新ヘルパー

  // 3. キーノード フォーム クリア
  // ★ 変更: V8.0 - rebuildForms(null) がキーノードをリセットする
  rebuildForms(null); 

  // 4. デフォルトUIの場合のみ、pos連動を再有効化
  if (!isCustomized) {
      enableAllPosSubfields();
  }
  
  // ★ 削除: V8.0 - activeSearchMode のリセットは不要

  // 5. 検索結果・状態クリア
  hits=[]; currentStartIndex=0; sortCol=null; sortAsc=true; hasSearched=false; searchAbort=false; selectedHitNo=null;
  $('tableContainer').innerHTML=""; $('hitCount').style.display='none'; $('hitCount').textContent=''; $('pagerTop').innerHTML=''; $('pagerBottom').innerHTML='';
  
  $('errorMsg').style.display='none'; $('errorMsg').textContent='';
  $('fileError').style.display='none'; 
  $('progressWrap').style.display='none'; $('progressText').style.display='none'; $('sentenceDetail').style.display='none'; $('sentenceArea').innerHTML=''; $('sentenceMeta').style.display='none'; $('articleBox').style.display='none';
  $('tooltip').style.display='none';
  
  isUDViewActive = false;
  if ($('udToggleBtn')) {
    $('udToggleBtn').textContent = 'UD表示 OFF';
    $('udToggleBtn').classList.remove('active');
  }
  if ($('udCanvasContainer')) {
    $('udCanvasContainer').style.display = 'none';
  }
  if ($('sentenceArea')) {
    $('sentenceArea').style.display = 'block';
  }
  
  // 6. ヘッダーのクリア
  if (!isCustomized) {
      currentDynamicHeaders = defaultDynamicHeaders;
  }
  renderTable();
}

/* ---------- ★ V7.3 UDツリー描画 ---------- */

// UD表示ボタンのトグル処理
function toggleUDView() {
  isUDViewActive = !isUDViewActive;
  const btn = $('udToggleBtn');
  const area = $('sentenceArea');
  const canvasContainer = $('udCanvasContainer');

  if (isUDViewActive) {
    btn.textContent = 'UD表示 ON';
    btn.classList.add('active');
    area.style.display = 'none';
    canvasContainer.style.display = 'block';
    // 現在選択中のヒットがあれば、即時描画
    if (selectedHitNo !== null) {
      const hitIdx = hits.findIndex(h => h.no === selectedHitNo);
      if (hitIdx !== -1) {
        drawUDTree(hits[hitIdx]);
      }
    }
  } else {
    btn.textContent = 'UD表示 OFF';
    btn.classList.remove('active');
    area.style.display = 'block';
    canvasContainer.style.display = 'none';
  }
}

// UDツリーのメイン描画関数
function drawUDTree(hit) {
  const canvas = $('udCanvas');
  const ctx = canvas.getContext('2d');
  const errDiv = $('udError');
  errDiv.style.display = 'none';
  
  // 1. データのパース
  let words = [];
  let rootNode = null;
  const wordMap = new Map();

  try {
    const parser = new DOMParser();
    const doc = parser.parseFromString(hit.rawSentence, "application/xml");
    const wnodes = Array.from(doc.getElementsByTagName('w'));
    
    if (wnodes.length === 0) throw new Error("wタグが見つかりません。");

    wnodes.forEach(wn => {
      const id = parseInt(wn.getAttribute('wordId'), 10);
      const headId = parseInt(wn.getAttribute('udFrom'), 10);
      // ★ 修正: 画像に合わせて 'original' 属性を優先
      const text = wn.getAttribute('original') || wn.textContent.trim();
      const pos = wn.getAttribute('pos') || 'その他'; // ★ V7.5: pos 属性を取得
      
      if (isNaN(id) || isNaN(headId)) {
          // udFrom が空や不正な値の場合はスキップ (例: V7.3のサンプルデータ '●' (wordId=1, udFrom="24", udTo=""))
          // ただし、これがエラーの原因になる可能性もある
          if (isNaN(id)) throw new Error(`wordId が不正です: ${wn.outerHTML}`);
          // headId が不正な場合は、ひとまず自分自身を指すようにしてエラー回避
          console.warn(`udFrom が不正なため、 ${id} を仮ルートとして扱います: ${wn.outerHTML}`);
      }

      const node = {
        id: id,
        text: text,
        pos: pos, // ★ V7.5: pos 属性をノードに保存
        headId: isNaN(headId) ? id : headId, // 不正な場合は仮にself-loop
        children: [],
        level: -1, // レイアウト計算用
        x: 0,
        y: 0
      };
      words.push(node);
      wordMap.set(id, node);
    });

    // 親子関係の構築とルートの特定
    words.forEach(node => {
      if (node.id === node.headId) {
        rootNode = node;
      } else {
        const head = wordMap.get(node.headId);
        if (head) {
          head.children.push(node);
        } else {
          // headId が存在しない場合 (例: 0 や範囲外)
          console.warn(`ID ${node.headId} の親ノードが見つかりません (ノード ${node.id})`);
          if (!rootNode) { // まだルートが未定なら、これを暫定ルートにする
            rootNode = node;
          }
        }
      }
    });

    if (!rootNode) {
        // self-loop がない場合、udFrom="0" などを探す
        const zeroHead = words.find(w => w.headId === 0);
        if (zeroHead) {
            rootNode = zeroHead;
        } else if (words.length > 0) {
            // それでもない場合、udFrom が自分以外を指しているが、
            // その headId が見つからない最初のノードをルートとみなす
             console.warn("ルートノード (headId=id or headId=0) が見つかりません。暫定ルートを適用します。");
             rootNode = words.find(w => w.headId !== w.id && !wordMap.has(w.headId)) || words[0];
        } else {
             throw new Error("描画する単語がありません。");
        }
    }

  } catch (e) {
    errDiv.textContent = `UDデータのパースに失敗しました: ${e.message}`;
    errDiv.style.display = 'block';
    return;
  }

  // 2. レイアウト計算 (レベル決定 - 葉から)
  let maxLevel = 0;
  function calculateLevel(node) {
    if (node.children.length === 0) {
      node.level = 0;
    } else {
      let maxChildLevel = 0;
      node.children.forEach(child => {
        calculateLevel(child); // 再帰的に子を計算
        if (child.level > maxChildLevel) {
          maxChildLevel = child.level;
        }
      });
      node.level = maxChildLevel + 1;
    }
    if (node.level > maxLevel) {
      maxLevel = node.level;
    }
  }
  
  // wordMapにある全ノードを対象に、未計算のノードからレベルを計算
  words.forEach(node => {
      if(node.level === -1) {
          // 接続されていない孤立ノードや、
          // 循環参照によって calculateLevel(rootNode) から漏れたノード
          // のレベルを計算する
          try {
            calculateLevel(node);
          } catch(e) {
            // 循環参照エラーなど
            console.error("レベル計算中にエラー:", e);
            node.level = 0; // 暫定的に0
          }
      }
  });


  // 3. 描画設定
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.font = '14px "Hiragino Sans", "Noto Sans JP", sans-serif';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  
  const boxHeight = 30;
  const boxPaddingY = 50; // 箱と箱のY間隔
  const boxPaddingX = 10; // 箱と箱のX間隔
  let totalWidth = 0;
  
  // テキスト幅に基づいてX座標とキャンバス幅を決定
  // ★ 順序は wordId 順 (words 配列の順)
  let currentX = 20; // 左右マージン
  const nodeMetrics = new Map();
  words.sort((a,b) => a.id - b.id); // wordId順にソート
  
  words.forEach(node => {
      const metrics = ctx.measureText(node.text);
      const boxWidth = Math.max(40, metrics.width + 16); // 最小幅40px, 左右パディング8px
      nodeMetrics.set(node.id, { width: boxWidth, height: boxHeight });
      
      node.x = currentX + (boxWidth / 2);
      currentX += boxWidth + boxPaddingX;
  });
  totalWidth = currentX + 20; // 左右マージン

  // Y座標を決定 (maxLevel = 0 が一番下)
  words.forEach(node => {
    node.y = (maxLevel - node.level) * (boxHeight + boxPaddingY) + (boxHeight / 2) + 20; // 20pxマージン
  });

  const totalHeight = (maxLevel + 1) * (boxHeight + boxPaddingY) + 40;

  // キャンバスサイズを調整
  canvas.width = totalWidth;
  canvas.height = totalHeight;

  // 4. 描画 (再度設定が必要)
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.font = '14px "Hiragino Sans", "Noto Sans JP", sans-serif';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.strokeStyle = '#888';
  ctx.lineWidth = 1.5;

  // 4a. 線の描画 (下から)
  words.forEach(node => {
    if (node.id === node.headId) return; // ルートは描画しない
    const head = wordMap.get(node.headId);
    if (!head) return; // 親が見つからない

    ctx.beginPath();
    ctx.moveTo(node.x, node.y - boxHeight / 2); // 子の上端
    ctx.lineTo(head.x, head.y + boxHeight / 2); // 親の下端
    ctx.stroke();
  });

  // 4b. ノード(箱とテキスト)の描画 (上から)
  words.forEach(node => {
    const metrics = nodeMetrics.get(node.id);
    const x = node.x - metrics.width / 2;
    const y = node.y - metrics.height / 2;

    // ★ V7.5: posColors から動的に色を取得
    // ('その他' またはハードコード値をフォールバックとして使用)
    const colorInfo = posColors[node.pos] || posColors['その他'] || { bg: '#eafff4', border: '#57a070' };

    // 箱
    ctx.fillStyle = colorInfo.bg; // ★ 動的な背景色を設定
    ctx.fillRect(x, y, metrics.width, metrics.height);
    ctx.strokeStyle = colorInfo.border; // ★ 動的な境界色を設定
    ctx.strokeRect(x, y, metrics.width, metrics.height);
    
    // テキスト
    ctx.fillStyle = '#133';
    ctx.fillText(node.text, node.x, node.y);
  });
}

/* ---------- debug helper ---------- */
window._debug = {
    getCurrentData: ()=> currentData, 
    getHits: ()=> hits, 
    getParsedSentences: ()=> parsedSentences,
    getDetectedAttrs: ()=> detectedAttributes,
    isCustomized: ()=> isCustomized
};
</script>
</body>

</html>
